{"version":3,"sources":["reportWebVitals.js","redux/actionTypes.js","redux/actionCreators/canvasActionCreator.js","redux/reducers/canvasReducer.js","redux/reducers/brushReducer.js","redux/reducers/settingReducer.js","redux/reducers/layoutReducer.js","redux/reducers/frameReducer.js","redux/reducers/rootReducer.js","redux/store.js","redux/actionCreators/multiplicateActionCreators.js","models/Frame.js","Managers/FrameManager/FrameManager.js","redux/actionCreators/layoutActionCreator.js","models/Layout.js","Managers/LayoutManager/LayoutManager.js","components/Smart/DrawWindow/WorkSpace/Canvas/Canvas.jsx","utils/ListenerManager.js","utils/ColorHelper.js","models/Tool/Tool.js","redux/actionCreators/brushActionCreators.js","models/Tool/Brush/Brush.js","models/Tool/Brush/SketchBrush.js","models/Tool/Eraser/Eraser.js","models/Tool/Hand/Hand.js","Managers/ToolManager/ToolManager.js","components/Smart/DrawWindow/WorkSpace/WorkSpace.jsx","components/Dump/TopPanel/TopPanel.jsx","components/Smart/TopPanelMenu/TopPanelMenu.jsx","components/Dump/InputsBlock/InputsBlock.jsx","components/Smart/DrawWindow/ToolSettingPanel/BrushSettingPanel/SavedBrushes/SavedBrushes.jsx","components/Smart/DrawWindow/ToolSettingPanel/BrushSettingPanel/BrushSettingPanel.jsx","components/Smart/DrawWindow/ToolSettingPanel/HandToolSettingPanel/HandToolSettingPanel.jsx","components/Smart/DrawWindow/ToolSettingPanel/ToolSettingPanel.jsx","components/Dump/LeftPanel/LeftPanel.jsx","components/Smart/DrawWindow/ToolList/ToolList.jsx","components/Dump/RightPanel/RightPanel.jsx","components/Smart/DrawWindow/RightPanelContent/Layouts/Layout/Layout.jsx","components/Dump/ContextMenu/ContextMenu.jsx","components/Smart/DrawWindow/RightPanelContent/Layouts/Layouts.jsx","components/Smart/DrawWindow/RightPanelContent/Frames/FrameBlock/FrameItem.jsx","components/Smart/DrawWindow/RightPanelContent/Frames/Frames.jsx","components/Smart/DrawWindow/RightPanelContent/Tabs/Tabs.jsx","components/Smart/DrawWindow/RightPanelContent/RightPanelContent.jsx","components/Dump/CenterSpace/CenterSpace.jsx","components/Smart/DrawWindow/DrawWindow.jsx","components/Smart/MultiplicateWindow/FrameCanvasPanel/FrameCanvasPanel.jsx","components/Smart/MultiplicateWindow/FrameRightPanel/FrameRightPanel.js","components/Smart/MultiplicateWindow/FrameTopPanelContent/FrameButtons/FrameButtons.jsx","components/Smart/MultiplicateWindow/FrameTopPanelContent/FramesInputs/FramesInputs.jsx","components/Smart/MultiplicateWindow/FrameTopPanelContent/FrameTopPanelContent.js","components/Smart/MultiplicateWindow/FrameWindow.jsx","components/Smart/MultiplicateWindow/RedirectSec.jsx","components/Smart/SaveWindow/SaveFormatTabs/SaveFormatTabs.jsx","components/Dump/Preloader/img/preloader.gif","components/Dump/Preloader/Preloader.jsx","components/Smart/SaveWindow/SaveGifPanel/SaveGifPanel.jsx","components/Smart/SaveWindow/SaveWindow.jsx","components/Main.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","CHANGE_CANVAS_SIZE","SET_CANVAS","SET_CURRENT_TOOL","SET_CANVAS_BLOCK","SET_CANVAS_POSITION","SET_CANVAS_ZOOM","CHANGE_BRUSH_SETTING","SAVE_BRUSH","CHANGE_CANVAS_DEFAULT_BACKGROUND","CHANGE_SAVED_BRUSHES","CHANGE_LAYOUT_LIST","CHANGE_CURRENT_LAYOUT","CHANGE_FRAME_LIST","SET_MULTIPLICATE_CANVAS","STOP_PLAY","CAN_PLAY","SET_CURRENT_FRAME","changeCanvasSize","width","height","type","payload","setCanvas","canvas","context","setCurrentTool","currentTool","currentToolName","setCanvasBlock","canvasBlock","setCanvasPosition","position","setCanvasZoom","zoom","initState","size","top","left","color","alpha","savedBrushes","activeTool","canvasDefaultBackground","layoutList","currentLayout","currentLayoutIndex","changeCurrentCanvas","frameList","frameCanvas","stopPlay","currentFrameIndex","rootReducer","combineReducers","state","action","brush","concat","Array","from","setting","layouts","frames","store","createStore","changeFrameList","set–°urrentFrameIndex","index","Frame","delay","id","this","_canvas","_delay","_id","_type","_open","_isSelect","FrameManager","layout","getState","document","createElement","getCanvas","getContext","drawImage","frame","push","dispatch","forEach","isSelected","setDelay","newFrameList","filter","console","log","length","unSelect","splice","isOpen","close","open","index1","index2","help","currentFrame","getDelay","setTimeout","playFilm","pause","alert","setMultiplicateCanvas","map","changeLayoutList","changeCurrentLayout","Layout","ctx","show","_ctx","_show","_name","_historyArr","_positionInHistory","saveInHistory","selected","clearRect","slice","shift","getImageData","putImageData","LayoutManager","update","mainCanvas","mainCanvasCtx","defLayoutCanvas","defLayoutCtx","createImageData","i","isHidden","setCurrentLayout","imageList","img","src","toDataURL","setAttribute","objImg","dataIndex","isCurrent","getCurrentLayoutIndex","toggleHide","clear","indexArray","value","array","includes","addLayout","minElem","Math","min","elem","deleteLayouts","select","connect","tmpCanvas","canvasZoom","bindActionCreators","props","React","createRef","toMultiplicate","e","code","ctrlKey","addFrame","preventDefault","useEffect","current","window","addEventListener","removeEventListener","Fragment","ref","className","style","transform","ListenerManager","listenersArr","_listeners","element","event","func","obj","pop","JSON","stringify","ColorHelper","hex","parseInt","rgb","replace","split","toString","join","str","startsWith","rgbaToHex","hexToRgba","rgbToHex","rgba","Tool","changeBrushSetting","Brush","_listenerManager","isFinite","toRgba","toHex","floor","setColor","SketchBrush","started","_canvasBlock","ppts","_fakeCanvas","zIndex","classList","add","cursor","tmp_ctx","endPaint","removeListener","onPaint","prepend","addListener","strokeStyle","lineWidth","lineCap","call","x","offsetX","y","offsetY","beginPath","arc","PI","c","d","quadraticCurveTo","stroke","removeAllListener","remove","Eraser","tmpCtx","imageData","tmpID","trueID","data","testFunc","Hand","startYCoord","startXCoord","mouseMove","clientY","clientX","ToolManager","toolName","destroy","create","defaultBackgorund","workSpace","useRef","getComputedStyle","setTool","init","backgroundColor","TopPanel","children","TopPanelMenu","content","useLocation","pathname","match","to","InputsBlock","title","max","step","onChange","brushSize","brushColor","brushAlpha","colorIndex","brushMenu","onClick","changeSavedBrushes","brushSetting","tool","getTool","setSize","setAlpha","changeBrushHandler","onContextMenu","timeOutId","domRect","target","getBoundingClientRect","clearTimeout","colorRightClickHandler","saveBrush","SavedBrushes","canvasSize","currentTarget","LeftPanel","alt","RightPanel","layoutBlock","append","outline","setMenuActive","pageY","pageX","innerWidth","setMenuPosition","stopPropagation","swap","deleteLayout","historyBack","historyNext","ContextMenu","active","onMouseLeave","menuPosition","useState","layoutMenu","combine","unSelectAll","LayoutModel","ReactDOM","createPortal","getElementById","getId","refFrameBlock","background","changeFrame","openCloseFrame","onClickCapture","deleteFrame","menuActive","contextMenuDelay","setContextMenuDelay","FrameMenu","setDelaySelectedFrames","confirm","deleteSelectedFrame","unSelectAllFrame","Tabs","tabsNumber","setTabsActive","setContent","CenterSpace","DrawWindow","drawCanvas","canvasRef","renderCanvas","requestAnimationFrame","FrameRightPanel","setDelayToAll","canPlay","FrameTopPanelContent","FrameWindow","RedirectSec","params","SaveFormatTabs","Preloader","preloader","repeat","setRepeat","quality","setQuality","setWidth","setHeight","setBackground","loading","setLoading","saveProportion","setSaveProportion","checked","gif","GIF","workers","fillStyle","fillRect","copy","on","blob","URL","createObjectURL","render","SaveWindow","path","exact","process","basemname","StrictMode"],"mappings":"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","file":"static/js/main.252fd5a8.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import('web-vitals').then(({getCLS, getFID, getFCP, getLCP, getTTFB}) => {\n            getCLS(onPerfEntry);\n            getFID(onPerfEntry);\n            getFCP(onPerfEntry);\n            getLCP(onPerfEntry);\n            getTTFB(onPerfEntry);\n        });\n    }\n};\n\nexport default reportWebVitals;\n","export const CHANGE_CANVAS_SIZE = 'CHANGE_CANVAS_SIZE';\r\nexport const SET_CANVAS = 'SET_CANVAS';\r\nexport const SET_CURRENT_TOOL = 'CHANGE_CURRENT_TOOL';\r\nexport const SET_CANVAS_BLOCK = 'SET_CANVAS_BLOCK';\r\nexport const SET_CANVAS_POSITION = 'SET_CANVAS_POSITION';\r\nexport const SET_CANVAS_ZOOM = 'SET_CANVAS_ZOOM';\r\n//\r\nexport const CHANGE_BRUSH_SETTING = 'CHANGE_BRUSH_SETTING';\r\nexport const SAVE_BRUSH = 'SAVE_BRUSH';\r\nexport const CHANGE_CANVAS_DEFAULT_BACKGROUND = 'CHANGE_CANVAS_DEFAULT_BACKGROUND';\r\nexport const CHANGE_SAVED_BRUSHES = 'CHANGE_SAVED_BRUSHES';\r\nexport const CHANGE_ACTIVE_TOOL = 'CHANGE_ACTIVE_TOOL';\r\n\r\n//\r\nexport const CHANGE_LAYOUT_LIST = 'CHANGE_LAYOUT_LIST';\r\nexport const CHANGE_CURRENT_LAYOUT = 'CHANGE_CURRENT_LAYOUT';\r\nexport const ADD_LAYOUT_MANAGER = 'ADD_LAYOUT_MANAGER';\r\n\r\n//\r\nexport const CHANGE_FRAME_LIST = 'CHANGE_FRAME_LIST';\r\nexport const CHANGE_CURRENT_FRAME = 'CHANGE_CURRENT_FRAME';\r\nexport const SET_MULTIPLICATE_CANVAS = 'SET_MULTIPLICATE_CANVAS';\r\nexport const STOP_PLAY = 'STOP_PLAY';\r\nexport const CAN_PLAY = 'CAN_PLAY';\r\nexport const SET_CURRENT_FRAME = 'SET_CURRENT_FRAME';\r\n\r\n//\r\n","import {\r\n    CHANGE_CANVAS_SIZE,\r\n    SET_CANVAS,\r\n    SET_CANVAS_BLOCK,\r\n    SET_CANVAS_POSITION,\r\n    SET_CANVAS_ZOOM,\r\n    SET_CURRENT_TOOL\r\n} from '../actionTypes';\r\n\r\nexport function changeCanvasSize(width, height) {\r\n    return {\r\n        type: CHANGE_CANVAS_SIZE,\r\n        payload: {\r\n            width: width,\r\n            height: height\r\n        }\r\n    };\r\n};\r\n\r\nexport function setCanvas(canvas, context) {\r\n    return {\r\n        type: SET_CANVAS,\r\n        payload: {canvas, context}\r\n    };\r\n};\r\n\r\nexport function setCurrentTool(currentTool, currentToolName) {\r\n    return {\r\n        type: SET_CURRENT_TOOL,\r\n        payload: {currentTool, currentToolName}\r\n    };\r\n};\r\n\r\nexport function setCanvasBlock(canvasBlock) {\r\n    return {\r\n        type: SET_CANVAS_BLOCK,\r\n        payload: canvasBlock\r\n    };\r\n};\r\n\r\nexport function setCanvasPosition(position) {\r\n    return {\r\n        type: SET_CANVAS_POSITION,\r\n        payload: position\r\n    };\r\n}\r\n\r\nexport function setCanvasZoom(zoom) {\r\n    return {\r\n        type: SET_CANVAS_ZOOM,\r\n        payload: zoom\r\n    };\r\n}","import {\r\n    CHANGE_CANVAS_SIZE,\r\n    SET_CANVAS,\r\n    SET_CANVAS_BLOCK,\r\n    SET_CANVAS_POSITION,\r\n    SET_CANVAS_ZOOM,\r\n    SET_CURRENT_TOOL\r\n} from './../actionTypes';\r\n\r\n\r\nlet initState = {\r\n    canvas: null,\r\n    canvasBlock: null,\r\n    context: null,\r\n    size: {\r\n        width: '100px',\r\n        height: '100px'\r\n    },\r\n    position: {\r\n        top: '1px',\r\n        left: '1px'\r\n    },\r\n    currentTool: null,\r\n    currentToolName: '',\r\n    zoom: 1\r\n\r\n};\r\n\r\nexport default function canvasReducer(state = initState, action) {\r\n    switch (action.type) {\r\n        case CHANGE_CANVAS_SIZE: {\r\n            return {\r\n                ...state,\r\n                size: {\r\n                    width: action.payload.width,\r\n                    height: action.payload.height\r\n                }\r\n            };\r\n        }\r\n\r\n        case SET_CANVAS: {\r\n            return {\r\n                ...state,\r\n                canvas: action.payload.canvas,\r\n                context: action.payload.context\r\n            };\r\n        }\r\n\r\n        case SET_CURRENT_TOOL: {\r\n            return {\r\n                ...state,\r\n                currentTool: action.payload.currentTool,\r\n                currentToolName: action.payload.currentToolName\r\n\r\n            };\r\n        }\r\n        case SET_CANVAS_BLOCK: {\r\n            return {\r\n                ...state,\r\n                canvasBlock: action.payload\r\n            };\r\n        }\r\n\r\n        case SET_CANVAS_POSITION: {\r\n            return {\r\n                ...state,\r\n                position: action.payload\r\n            };\r\n        }\r\n        case SET_CANVAS_ZOOM: {\r\n            return {\r\n                ...state,\r\n                zoom: action.payload\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n","import {CHANGE_BRUSH_SETTING, SAVE_BRUSH} from '../actionTypes';\r\nimport {CHANGE_SAVED_BRUSHES} from './../actionTypes';\r\n\r\n\r\nlet initState = {\r\n    color: '#ff0f00',\r\n    size: '20',\r\n    alpha: 1,\r\n    savedBrushes: [],\r\n    activeTool: 'SCETCH_BRUSH'\r\n};\r\n\r\nexport default function brushReducer(state = initState, action) {\r\n    switch (action.type) {\r\n        case CHANGE_BRUSH_SETTING: {\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n        }\r\n        case SAVE_BRUSH: {\r\n            return {\r\n                ...state,\r\n                savedBrushes: state.savedBrushes.concat(action.payload)\r\n            };\r\n        }\r\n        case CHANGE_SAVED_BRUSHES: {\r\n            return {\r\n                ...state,\r\n                savedBrushes: Array.from(action.payload)\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n","import {CHANGE_CANVAS_DEFAULT_BACKGROUND} from './../actionTypes';\r\n\r\n\r\nlet initState = {\r\n    canvasDefaultBackground: '#ececec'\r\n};\r\n\r\nexport default function settingReducer(state = initState, action) {\r\n    switch (action.type) {\r\n        case CHANGE_CANVAS_DEFAULT_BACKGROUND: {\r\n            return {\r\n                ...state\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n","import {CHANGE_LAYOUT_LIST} from '../actionTypes';\r\nimport {CHANGE_CURRENT_LAYOUT} from './../actionTypes';\r\n\r\n\r\n\r\nlet initState =   {\r\n    layoutList: [],\r\n    currentLayout: null,\r\n    currentLayoutIndex: 0,\r\n    changeCurrentCanvas: true\r\n};\r\n\r\nexport default function layoutReducer(state = initState, action) {\r\n    switch (action.type) {\r\n        case CHANGE_LAYOUT_LIST: {\r\n            return {\r\n                ...state,\r\n                layoutList: Array.from(action.payload)\r\n            };\r\n        }\r\n        case CHANGE_CURRENT_LAYOUT: {\r\n            return {\r\n                ...state,\r\n                currentLayout: action.payload.currentLayout,\r\n                currentLayoutIndex: action.payload.currentLayoutIndex,\r\n                changeCurrentCanvas: !state.changeCurrentCanvas\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n","import {CAN_PLAY, CHANGE_FRAME_LIST, SET_CURRENT_FRAME, SET_MULTIPLICATE_CANVAS, STOP_PLAY} from './../actionTypes';\r\n\r\n\r\nlet initState = {\r\n    frameList: [],\r\n    frameCanvas: null,\r\n    stopPlay: true,\r\n    currentFrameIndex: 0\r\n};\r\n\r\n\r\nexport default function frameReducer(state = initState, action) {\r\n    switch (action.type) {\r\n        case CHANGE_FRAME_LIST: {\r\n            return {\r\n                ...state,\r\n                frameList: action.payload.frameList.concat()\r\n            };\r\n        }\r\n        case SET_MULTIPLICATE_CANVAS: {\r\n            return {\r\n                ...state,\r\n                frameCanvas: action.payload\r\n            };\r\n        }\r\n        case STOP_PLAY: {\r\n            return {\r\n                ...state,\r\n                stopPlay: true,\r\n            };\r\n        }\r\n        case CAN_PLAY: {\r\n            return {\r\n                ...state,\r\n                stopPlay: false,\r\n            };\r\n        }\r\n        case SET_CURRENT_FRAME: {\r\n            return {\r\n                ...state,\r\n                currentFrameIndex: action.payload\r\n            };\r\n        }\r\n        default : {\r\n            return state;\r\n        }\r\n    }\r\n};","import {combineReducers} from 'redux';\r\nimport canvasReducer from './canvasReducer';\r\nimport brushReducer from './brushReducer';\r\nimport settingReducer from './settingReducer';\r\nimport layoutReducer from './layoutReducer';\r\nimport frameReducer from './frameReducer';\r\n\r\nlet rootReducer = combineReducers({\r\n    canvas: canvasReducer,\r\n    brush: brushReducer,\r\n    setting: settingReducer,\r\n    layouts: layoutReducer,\r\n    frames: frameReducer\r\n});\r\nexport default rootReducer;","import {createStore} from 'redux';\r\nimport rootReducer from './reducers/rootReducer';\r\n\r\nlet store = createStore(rootReducer);\r\nexport default store;","import {CAN_PLAY, CHANGE_FRAME_LIST, SET_MULTIPLICATE_CANVAS, STOP_PLAY} from '../actionTypes';\r\nimport {SET_CURRENT_FRAME} from './../actionTypes';\r\n\r\n\r\nexport function changeFrameList(frameList) {\r\n    return {\r\n        type: CHANGE_FRAME_LIST,\r\n        payload: {\r\n            frameList: frameList\r\n        }\r\n    };\r\n}\r\n\r\nexport function setMultiplicateCanvas(canvas) {\r\n    return {\r\n        type: SET_MULTIPLICATE_CANVAS,\r\n        payload: {\r\n            canvas: canvas,\r\n            context: canvas.getContext('2d')\r\n        }\r\n    };\r\n}\r\n\r\nexport function stopPlay() {\r\n    return {\r\n        type: STOP_PLAY\r\n    };\r\n}\r\n\r\nexport function canPlay() {\r\n    return {\r\n        type: CAN_PLAY\r\n    };\r\n}\r\n\r\nexport function set–°urrentFrameIndex(index) {\r\n    return {\r\n        type: SET_CURRENT_FRAME,\r\n        payload: index\r\n    };\r\n}","export default class Frame {\r\n    constructor(canvas, delay, id) {\r\n        this._canvas = canvas;\r\n        this._delay = delay;\r\n        this._id = id;\r\n        this._type = 'Frame';\r\n        this._open = false;\r\n        this._isSelect = false;\r\n    }\r\n\r\n    getCanvas() {\r\n        return this._canvas;\r\n    }\r\n\r\n    setDelay(delay) {\r\n        this._delay = delay;\r\n    }\r\n\r\n    getDelay() {\r\n        return this._delay;\r\n    }\r\n\r\n    setId(id) {\r\n        this._id = id;\r\n    }\r\n\r\n    getId() {\r\n        return this._id;\r\n    }\r\n\r\n    isOpen() {\r\n        return this._open;\r\n    }\r\n\r\n    open() {\r\n        this._open = true;\r\n    }\r\n\r\n    close() {\r\n        this._open = false;\r\n    }\r\n\r\n    select(){\r\n        this._isSelect = true;\r\n    }\r\n\r\n    unSelect(){\r\n        this._isSelect = false;\r\n    }\r\n    isSelected(){\r\n        return this._isSelect;\r\n    }\r\n}","import {\r\n    canPlay,\r\n    changeFrameList,\r\n    set–°urrentFrameIndex,\r\n    setMultiplicateCanvas,\r\n    stopPlay\r\n} from '../../redux/actionCreators/multiplicateActionCreators';\r\n\r\nimport store from '../../redux/store';\r\nimport Frame from '../../models/Frame';\r\n//–ü—Ä–æ—Å–ª–æ–π–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ—Ä–µ–π–º–∞–º–∏\r\n\r\nexport default class FrameManager {\r\n    static id = 0;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    static addFrame(layout, delay) {\r\n        let state = store.getState();\r\n        let stopPlay = state.frames.stopPlay;\r\n        if(!stopPlay) return;\r\n\r\n        let canvas = document.createElement('canvas');\r\n        let currentFrameIndex =state.frames.currentFrameIndex;\r\n        let frameList = state.frames.frameList;\r\n\r\n        // if (frameList.length > 120) {\r\n        //     alert('–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ—Ä–µ–π–º–æ–≤ –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 120');\r\n        //     return;\r\n        //\r\n        // }\r\n        canvas.width = layout.getCanvas().width;\r\n        canvas.height = layout.getCanvas().height;\r\n        canvas.getContext('2d').drawImage(layout.getCanvas(), 0, 0);\r\n\r\n        let frame = new Frame(canvas, delay, this.id++);\r\n\r\n\r\n        frameList.push(frame);\r\n        store.dispatch(changeFrameList(frameList));\r\n\r\n        if (currentFrameIndex === -1) store.dispatch(set–°urrentFrameIndex(0));\r\n    }\r\n\r\n    static setDelaySelectedFrames(delay){\r\n\r\n        let state = store.getState();\r\n        let frameList = state.frames.frameList;\r\n\r\n        frameList.forEach((frame, index)=>{\r\n            if(frame.isSelected()){\r\n                frame.setDelay(delay);\r\n            }\r\n        });\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n    static deleteSelectedFrame(){\r\n        let state = store.getState();\r\n        let frameList = state.frames.frameList;\r\n        let newFrameList = frameList.filter((frame, index)=>!frame.isSelected());\r\n        console.log(newFrameList);\r\n        store.dispatch(changeFrameList(newFrameList));\r\n        store.dispatch(set–°urrentFrameIndex(newFrameList.length-1));\r\n\r\n    }\r\n\r\n    static unSelectAllFrame(){\r\n        let state = store.getState();\r\n        let frameList = state.frames.frameList;\r\n        frameList.forEach((frame, index)=>{\r\n            if(frame.isSelected()){\r\n                frame.unSelect();\r\n            }\r\n        });\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n    static changeFrame() {\r\n        console.log('ok wce good');\r\n        let state = store.getState();\r\n        let stopPlay = state.frames.stopPlay;\r\n\r\n        let frameList = state.frames.frameList;\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n\r\n    static deleteFrame(index) {\r\n        let state = store.getState();\r\n        let stopPlay = state.frames.stopPlay;\r\n        if(!stopPlay) return;\r\n        let frameList = state.frames.frameList;\r\n        let currentFrameIndex = state.frames.currentFrameIndex;\r\n\r\n        frameList.splice(index, 1);\r\n\r\n        if (frameList.length - 1 < currentFrameIndex) store.dispatch(set–°urrentFrameIndex(frameList.length - 1));\r\n\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n\r\n    static openCloseFrame(frame){\r\n        if (frame.isOpen()) frame.close();\r\n        else frame.open();\r\n        let frameList = store.getState().frames.frameList;\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n\r\n    static swap(index1, index2) {\r\n        let state = store.getState();\r\n        let stopPlay = state.frames.stopPlay;\r\n        if(!stopPlay) return;\r\n        let frameList = state.frames.frameList;\r\n\r\n        if (index1 < 0 || index1 > frameList.length - 1 || index2 < 0 || index2 > frameList.length - 1) {\r\n            return;\r\n        }\r\n        let help = frameList[index1];\r\n\r\n        frameList[index1] = frameList[index2];\r\n        frameList[index2] = help;\r\n\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n\r\n\r\n\r\n    static playFilm() {\r\n        console.log('playFilm');\r\n        let state = store.getState();\r\n        let frameList = state.frames.frameList;\r\n        if(frameList.length===0) {\r\n            if(frameList.length ===0) {\r\n                alert('–°–ø–∏—Å–æ–∫ —Ñ—Ä–µ–π–º–æ–≤ –ø—É—Å—Ç !');\r\n                return;\r\n            }\r\n        }\r\n\r\n        //–ï—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ –Ω–∞ –ø–∞—É–∑—É - –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏\r\n        let currentFrameIndex = state.frames.currentFrameIndex;\r\n\r\n        let currentFrame = frameList[currentFrameIndex];\r\n\r\n        currentFrame.getDelay();\r\n\r\n        setTimeout(() => {\r\n            let state = store.getState();\r\n            let stopPlay = state.frames.stopPlay;\r\n            currentFrameIndex = state.frames.currentFrameIndex;\r\n            if (stopPlay) {\r\n                return;\r\n            }\r\n\r\n            if (frameList.length - 1 != currentFrameIndex) {\r\n                store.dispatch(set–°urrentFrameIndex(++currentFrameIndex));\r\n                this.playFilm();\r\n            } else {\r\n                this.pause();\r\n                return;\r\n            }\r\n        }, currentFrame.getDelay());\r\n    }\r\n\r\n    static pause() {\r\n        store.dispatch(stopPlay());\r\n    }\r\n\r\n    static stop() {\r\n        store.dispatch(stopPlay());\r\n        set–°urrentFrameIndex(0);\r\n    }\r\n\r\n    static set–°urrentFrameIndex(index) {\r\n        store.dispatch(set–°urrentFrameIndex(index));\r\n    }\r\n\r\n    static setMultiplicateCanvas(canvas) {\r\n        store.dispatch(setMultiplicateCanvas(canvas));\r\n    }\r\n\r\n    static setDelayToAll(delay) {\r\n        let state = store.getState();\r\n        let frameList = state.frames.frameList;\r\n        frameList.map((frame, index) => {\r\n            frame.setDelay(delay);\r\n        });\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n}","import {CHANGE_LAYOUT_LIST} from '../actionTypes';\r\nimport {CHANGE_CURRENT_LAYOUT} from './../actionTypes';\r\n\r\nexport function changeLayoutList(layoutList) {\r\n    return {\r\n        type: CHANGE_LAYOUT_LIST,\r\n        payload: layoutList\r\n    };\r\n}\r\n\r\nexport function changeCurrentLayout(currentLayout, index) {\r\n    return {\r\n        type: CHANGE_CURRENT_LAYOUT,\r\n        payload: {\r\n            currentLayout: currentLayout,\r\n            currentLayoutIndex: index\r\n        }\r\n    };\r\n}\r\n\r\n","import LayoutManager from './../Managers/LayoutManager/LayoutManager';\r\n\r\nexport default class Layout {\r\n    constructor(canvas, ctx, show, id) {\r\n        this._canvas = canvas;\r\n        this._ctx = ctx;\r\n        this._show = show;\r\n        this._name = null;\r\n        this._historyArr = [];\r\n        this._positionInHistory = -1;\r\n        this.saveInHistory();\r\n        this.selected = false;\r\n        this.id = id;\r\n    }\r\n\r\n    getId() {\r\n        return this.id;\r\n    }\r\n\r\n    toggleHide() {\r\n        if (this._show) {\r\n            this._show = false;\r\n        } else {\r\n            this._show = true;\r\n        }\r\n    }\r\n\r\n    isHidden() {\r\n        return !this._show;\r\n    }\r\n\r\n    getCanvas() {\r\n        return this._canvas;\r\n    }\r\n\r\n    getContext() {\r\n        return this._ctx;\r\n    }\r\n\r\n    clear() {\r\n        this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n        this._historyArr = [];\r\n    }\r\n\r\n    saveInHistory() {\r\n        if (this._positionInHistory !== this._historyArr.length - 1) {\r\n            this._historyArr = this._historyArr.slice(0, this._positionInHistory + 1);\r\n        }\r\n        if (this._historyArr.length > 40) {\r\n            this._historyArr.shift();\r\n        }\r\n        this._historyArr.push(this._ctx.getImageData(0, 0, this._canvas.width, this._canvas.height));\r\n        this._positionInHistory = this._historyArr.length - 1;\r\n    }\r\n\r\n    historyBack() {\r\n        if (this._positionInHistory !== 0) {\r\n            this._positionInHistory -= 1;\r\n            this._ctx.putImageData(this._historyArr[this._positionInHistory], 0, 0);\r\n            LayoutManager.update();\r\n        }\r\n    }\r\n\r\n    historyNext() {\r\n        if (this._positionInHistory !== this._historyArr.length - 1) {\r\n            this._positionInHistory += 1;\r\n            this._ctx.putImageData(this._historyArr[this._positionInHistory], 0, 0);\r\n            LayoutManager.update();\r\n        }\r\n    }\r\n\r\n    select() {\r\n        this.selected = !this.selected;\r\n    }\r\n\r\n    isSelected() {\r\n        return this.selected;\r\n    }\r\n}","import {changeCurrentLayout, changeLayoutList} from '../../redux/actionCreators/layoutActionCreator';\r\nimport store from '../../redux/store';\r\nimport Layout from './../../models/Layout';\r\n\r\n//–ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ—è–º–∏\r\nexport default class LayoutManager {\r\n\r\n    static id = 0;\r\n\r\n    static init() {\r\n        let state = store.getState();\r\n\r\n        let mainCanvas = state.canvas.canvas;\r\n        let mainCanvasCtx = state.canvas.context;\r\n\r\n        let layoutList = state.layouts.layoutList;\r\n        let currentLayoutIndex = state.layouts.currentLayoutIndex;\r\n        //–µ—Å–ª–∏ —Å–ø–∏—Å–æ–∫ —Å–ª–æ–µ–≤ –ø—É—Å—Ç, —Å–æ–∑–¥–∞–µ–º –æ–¥–∏–Ω —Å–ª–æ–π\r\n        if (layoutList.length == 0) {\r\n            let defLayoutCanvas = document.createElement('canvas');\r\n            defLayoutCanvas.width = state.canvas.size.width;\r\n            defLayoutCanvas.height = state.canvas.size.height;\r\n\r\n            let defLayoutCtx = defLayoutCanvas.getContext('2d');\r\n\r\n            defLayoutCtx.putImageData(mainCanvasCtx.createImageData(mainCanvas.width, mainCanvas.height), 0, 0);\r\n            let layout = new Layout(defLayoutCanvas, defLayoutCtx, true, ++LayoutManager.id);\r\n\r\n            layoutList.push(layout);\r\n            store.dispatch(changeLayoutList(layoutList));\r\n            store.dispatch(changeCurrentLayout(layout, currentLayoutIndex));\r\n        }\r\n        this.update();\r\n        store.dispatch(changeLayoutList(state.layouts.layoutList));\r\n    }\r\n\r\n    //–æ–±–Ω–æ–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–≤–∞—Å, –∏–∑ –≤—Å–µ—Ö —Å–ª–æ–µ–≤\r\n    static update() {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n        let mainCanvasCtx = state.canvas.context;\r\n\r\n        mainCanvasCtx.clearRect(0, 0, state.canvas.size.width, state.canvas.size.height);\r\n        for (let i = 0; i < layoutList.length; i++) {\r\n            if (!layoutList[i].isHidden()) mainCanvasCtx.drawImage(layoutList[i].getCanvas(), 0, 0);\r\n        }\r\n    }\r\n\r\n    static changeLayoutList(layoutList) {\r\n        store.dispatch(changeLayoutList(layoutList));\r\n        this.update();\r\n    }\r\n\r\n    //–î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –ø—É—Å—Ç–æ–π —Å–ª–æ–π\r\n    static addLayout() {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n\r\n        let canvas = document.createElement('canvas');\r\n\r\n        canvas.width = state.canvas.size.width;\r\n        canvas.height = state.canvas.size.height;\r\n        let context = canvas.getContext('2d');\r\n        let layout = new Layout(canvas, context, true, ++LayoutManager.id);\r\n\r\n        layoutList.splice(state.layouts.currentLayoutIndex + 1, 0, layout);\r\n        store.dispatch(changeCurrentLayout(layout, state.layouts.currentLayoutIndex + 1));\r\n        store.dispatch(changeLayoutList(layoutList));\r\n    }\r\n\r\n    static copyLayout(index) {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n\r\n\r\n        let canvas = document.createElement('canvas');\r\n        canvas.width = state.canvas.size.width;\r\n        canvas.height = state.canvas.size.height;\r\n        let context = canvas.getContext('2d');\r\n\r\n        context.drawImage(state.layouts.layoutList[index].getCanvas(), 0, 0);\r\n        let layout = new Layout(canvas, context, true, ++LayoutManager.id);\r\n\r\n        layoutList.splice(index + 1, 0, layout);\r\n\r\n        if (state.layouts.currentLayoutIndex > index) {\r\n            this.setCurrentLayout(state.layouts.currentLayoutIndex + 1);\r\n        } else {\r\n            this.update();\r\n        }\r\n    }\r\n\r\n\r\n    //–ø–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏–∑ —Å–ª–æ–µ–≤\r\n    static getCanvasList() {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n\r\n        let imageList = [];\r\n        for (let i = 0; i < layoutList.length; i++) {\r\n\r\n            let img = document.createElement('img');\r\n\r\n            let src = layoutList[i].getCanvas().toDataURL();\r\n\r\n            img.setAttribute('src', src);\r\n            img.setAttribute('data-index', i);\r\n\r\n            let objImg = {\r\n                src: src,\r\n                dataIndex: i,\r\n                id: i,\r\n                isCurrent: i === this.getCurrentLayoutIndex(),\r\n                isHidden: this.isHidden(i),\r\n                selected: layoutList[i].isSelected()\r\n            };\r\n            imageList.push(objImg);\r\n        }\r\n        return imageList;\r\n    }\r\n\r\n    //–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∞—Å—Å —Å –≤—ã–±—Ä–∞–Ω—ã–º —Å–ª–æ–µ–º \r\n    static getCurrentLayout() {\r\n        return store.getState().layouts.currentLayout;\r\n    }\r\n\r\n    static setCurrentLayout(index) {\r\n        if (index < 0) index = 0;\r\n        let currentLayout = store.getState().layouts.layoutList[index];\r\n        store.dispatch(changeCurrentLayout(currentLayout, index));\r\n    }\r\n\r\n\r\n    static getCurrentLayoutIndex() {\r\n        let state = store.getState();\r\n        return +state.layouts.currentLayoutIndex;\r\n    }\r\n\r\n\r\n    static toggleHide(index) {\r\n        let state = store.getState();\r\n        index = +index;\r\n        state.layouts.layoutList[index].toggleHide();\r\n        store.dispatch(changeLayoutList(state.layouts.layoutList));\r\n        this.update();\r\n    }\r\n\r\n\r\n    static deleteLayout(index) {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n        let currentLayout = state.layouts.currentLayout;\r\n        let currentLayoutIndex = state.layouts.currentLayoutIndex;\r\n        //–µ—Å–ª–∏ –æ—Å—Ç–∞–ª—Å—è 1 —Å–ª–æ–π, —Ç–æ –ø—Ä–æ—Å—Ç–æ –æ—á–∏—â–∞–µ–º –µ–≥–æ\r\n        if (layoutList.length <= 1) {\r\n            currentLayout.clear();\r\n            this.update();\r\n            this.setCurrentLayout(currentLayoutIndex);\r\n            return;\r\n        }\r\n        layoutList.splice(index, 1);\r\n\r\n        //–ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–¥–æ —É–¥–∞–ª–∏—Ç—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤—ã—à–µ –Ω—É–∂–Ω–æ–≥–æ\r\n        if (currentLayoutIndex >= index) {\r\n            this.setCurrentLayout(currentLayoutIndex - 1);\r\n        } else {\r\n            this.setCurrentLayout(currentLayoutIndex);\r\n        }\r\n        this.update();\r\n        store.dispatch(changeLayoutList(state.layouts.layoutList));\r\n    }\r\n\r\n    static deleteLayouts(indexArray) {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n        let currentLayout = state.layouts.currentLayout;\r\n        let currentLayoutIndex = state.layouts.currentLayoutIndex;\r\n\r\n        if (layoutList.length <= 1) {\r\n            currentLayout.clear();\r\n            this.update();\r\n            store.dispatch(changeLayoutList(layoutList));\r\n            return;\r\n        }\r\n\r\n        layoutList = layoutList.filter((value, index, array) => {\r\n            return !indexArray.includes(index);\r\n        });\r\n\r\n        store.dispatch(changeLayoutList(layoutList));\r\n\r\n        if (layoutList.length == 0) {\r\n            this.addLayout();\r\n            this.setCurrentLayout(0);\r\n            this.update();\r\n            return;\r\n        } else {\r\n            //–µ—Å–ª–∏ –∏–Ω–¥–µ–∫—Å –±–æ–ª—å—à–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ\r\n            if (currentLayoutIndex >= layoutList.length - 1) {\r\n                this.setCurrentLayout(layoutList.length - 1);\r\n            } else {\r\n                this.setCurrentLayout(currentLayoutIndex);\r\n            }\r\n        }\r\n        this.update();\r\n    }\r\n\r\n    static swap(index1, index2) {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n        let currentLayoutIndex = state.layouts.currentLayoutIndex;\r\n\r\n        if (index1 < 0 || index1 > layoutList.length - 1 || index2 < 0 || index2 > layoutList.length - 1) {\r\n            return;\r\n        }\r\n\r\n        let help = layoutList[index1];\r\n        layoutList[index1] = layoutList[index2];\r\n        layoutList[index2] = help;\r\n\r\n        if (index1 == currentLayoutIndex) {\r\n            this.setCurrentLayout(index2);\r\n        } else if (index2 == currentLayoutIndex) {\r\n            this.setCurrentLayout(index1);\r\n        } else {\r\n            this.setCurrentLayout(currentLayoutIndex);\r\n        }\r\n        this.update();\r\n        store.dispatch(changeLayoutList(state.layouts.layoutList));\r\n    }\r\n\r\n    static combine(indexArray) {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n        let currentLayoutIndex = state.layouts.currentLayoutIndex;\r\n\r\n        let minIndex = Math.min(...indexArray);\r\n        let minElem = layoutList[minIndex];\r\n\r\n        for (let i = 1; i < indexArray.length; i++) {\r\n            const elem = layoutList[indexArray[i]];\r\n            minElem.getContext().drawImage(elem.getCanvas(), 0, 0);\r\n        }\r\n        minElem.saveInHistory();\r\n        store.dispatch(changeLayoutList(layoutList));\r\n\r\n        this.deleteLayouts(indexArray.slice(1));\r\n\r\n    }\r\n\r\n\r\n    static getLayoutList() {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n\r\n        return layoutList;\r\n    }\r\n\r\n    static setLayout(layout, index) {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n\r\n        layoutList[index] = layout;\r\n        this.update();\r\n    }\r\n\r\n    //–í—ã–¥–µ–ª–∏—Ç—å —Å–ª–æ–π ( ctrl + mouse1)\r\n    static select(id) {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n\r\n        layoutList[id].select();\r\n        store.dispatch(changeLayoutList(layoutList));\r\n        this.update();\r\n    }\r\n\r\n    //—Å–¥–µ–ª–∞—Ç—å –≤—Å–µ –Ω–µ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–º–∏\r\n    static unSelectAll() {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n        layoutList.forEach((layout) => {\r\n            if (layout.isSelected()) layout.select();\r\n        });\r\n        store.dispatch(changeLayoutList(layoutList));\r\n\r\n        this.update();\r\n    }\r\n\r\n}\r\n\r\n","import React, {useEffect} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport {setCanvas} from '../../../../../redux/actionCreators/canvasActionCreator';\r\nimport store from '../../../../../redux/store';\r\nimport './Canvas.scss';\r\n\r\nimport FrameManager from '../../../../../Managers/FrameManager/FrameManager';\r\nimport LayoutManager from '../../../../../Managers/LayoutManager/LayoutManager';\r\nimport Layout from '../../../../../models/Layout';\r\n\r\nfunction Canvas(props) {\r\n\r\n    let canvas = React.createRef();\r\n\r\n    //–ö–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏–ª—Å—è, –¥–æ–±–∞–≤–ª—è–µ–º –∫–∞–Ω–≤–∞—Å –≤ state\r\n    useEffect(() => {\r\n        let context = canvas.current.getContext('2d');\r\n        props.setCanvas(canvas.current, context);\r\n\r\n        window.addEventListener('keydown', toMultiplicate);\r\n        return () => {\r\n            window.removeEventListener('keydown', toMultiplicate);\r\n        };\r\n    }, []);\r\n\r\n\r\n    function toMultiplicate(e) {\r\n        if (e.code === 'KeyS' && e.ctrlKey) {\r\n            let canvas = store.getState().canvas.canvas;\r\n            let context = store.getState().canvas.context;\r\n            if (canvas != null) {\r\n                let layout = new Layout(canvas, context, true, ++LayoutManager.id);\r\n                FrameManager.addFrame(layout, 100);\r\n            }\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <canvas ref={canvas}\r\n                    height={props.height} width={props.width}\r\n                    className='canvas'\r\n                    style={{\r\n                        top: props.top,\r\n                        left: props.left,\r\n                        transform: `scale(${props.canvasZoom})`\r\n                    }}\r\n            >\r\n            </canvas>\r\n        </React.Fragment>\r\n    );\r\n\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        width: state.canvas.size.width,\r\n        height: state.canvas.size.height,\r\n        top: state.canvas.position.top,\r\n        left: state.canvas.position.left,\r\n        tmpCanvas: state.canvas.tmpCanvas,\r\n        canvasZoom: state.canvas.zoom\r\n    };\r\n}\r\n\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        setCanvas: bindActionCreators(setCanvas, dispatch)\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);\r\n\r\n\r\n","//–∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª—É—à–∞—Ç–µ–ª—è–º–∏ —Å–æ–±—ã—Ç–∏–π\r\n// –Ω—É–∂–µ–Ω –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ –±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–ª—É—à–∞—Ç–µ–ª–∏\r\nexport default class ListenerManager {\r\n\r\n    constructor(listenersArr) {\r\n        this._listeners = listenersArr;\r\n    }\r\n\r\n    addListener(element, event, func) {\r\n        let obj = {\r\n            element,\r\n            event,\r\n            func\r\n        };\r\n        this._listeners.push(obj);\r\n        element.addEventListener(event, func);\r\n    }\r\n\r\n    removeLastListener() {\r\n        let obj = this._listeners.pop();\r\n        obj.element.removeEventListener(obj.event, obj.func);\r\n    }\r\n\r\n    removeListenersByEvent(element, event) {\r\n        for (let i = 0; i < this._listeners.length; i++) {\r\n            if (this._listeners[i].event === event && this._listeners[i].element === element) {\r\n                let obj = this._listeners[i];\r\n                obj.element.removeEventListener(obj.event, obj.func);\r\n                this._listeners.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    removeListener(element, event, func) {\r\n        for (let i = 0; i < this._listeners.length; i++) {\r\n            if (this._listeners[i].event === event\r\n                && this._listeners[i].element === element\r\n                && JSON.stringify(this._listeners[i].func) === JSON.stringify(func)) {\r\n                let obj = this._listeners[i];\r\n                obj.element.removeEventListener(obj.event, obj.func);\r\n                this._listeners.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    removeAllListener() {\r\n        while (this._listeners.length != 0) {\r\n            let obj = this._listeners.pop();\r\n            obj.element.removeEventListener(obj.event, obj.func);\r\n        }\r\n    }\r\n}","export default class ColorHelper {\r\n\r\n    static hexToRgb(hex) {\r\n        if (hex[0] === '#') hex = hex.slice(1);\r\n        let r = parseInt(hex.slice(0, 2), 16);\r\n        let g = parseInt(hex.slice(2, 4), 16);\r\n        let b = parseInt(hex.slice(4), 16);\r\n        return 'rgba(' + r + ',' + g + ',' + b + ')';\r\n    }\r\n\r\n    static hexToRgba(hex, alpha) {\r\n        if (hex[0] === '#') hex = hex.slice(1);\r\n        let r = parseInt(hex.slice(0, 2), 16);\r\n        let g = parseInt(hex.slice(2, 4), 16);\r\n        let b = parseInt(hex.slice(4), 16);\r\n        return 'rgba(' + r + ',' + g + ',' + b + ',' + alpha + ')';\r\n    }\r\n\r\n    static rgbToHex(rgb) {\r\n        rgb = rgb.replace(/[\\s()rgba;]/gi, '').split(',').map((value, index, array) => {\r\n            value = parseInt(value, 10).toString(16);\r\n            if (value.length === 1) value = '0' + value;\r\n            return value;\r\n        }).join('');\r\n        return '#' + rgb;\r\n    }\r\n\r\n    static toRgba(str, alpha) {\r\n        if (str.startsWith('rgba')) {\r\n            let hex = ColorHelper.rgbaToHex(str);\r\n            return ColorHelper.hexToRgba(hex, alpha);\r\n\r\n        }\r\n        if (str.startsWith('rgb')) {\r\n            let hex = ColorHelper.rgbToHex(str);\r\n            return this.hexToRgba(hex, alpha);\r\n        }\r\n        return this.hexToRgba(str, alpha);\r\n    }\r\n\r\n    static rgbaToHex(rgba) {\r\n        rgba = rgba.replace(/[\\s()rgba;]/gi, '');\r\n        let result = rgba.split(',').map((value, index, array) => {\r\n            if (index == array.length - 1) return 'del';\r\n            value = parseInt(value, 10).toString(16);\r\n            if (value.length === 1) value = '0' + value;\r\n            return value;\r\n        }).filter((value) => {\r\n            return value !== 'del';\r\n        }).join('');\r\n        return '#' + result;\r\n    }\r\n\r\n    static toHex(str) {\r\n        if (str.startsWith('#')) return str;\r\n        if (str.startsWith('rgba')) return ColorHelper.rgbaToHex(str);\r\n        return ColorHelper.rgbToHex(str);\r\n    }\r\n}","export default class Tool {\r\n    constructor() {\r\n    }\r\n\r\n    create() {\r\n    }\r\n\r\n    destroy() {\r\n    }\r\n\r\n    setLayout(canvas, ctx) {\r\n        this._canvas = canvas;\r\n        this._ctx = ctx;\r\n    }\r\n}","import {CHANGE_BRUSH_SETTING, SAVE_BRUSH} from '../actionTypes';\r\nimport {CHANGE_SAVED_BRUSHES} from './../actionTypes';\r\n\r\nexport function changeBrushSetting(setting) {\r\n    return {\r\n        type: CHANGE_BRUSH_SETTING,\r\n        payload: setting\r\n    };\r\n};\r\n\r\nexport function saveBrush(setting) {\r\n    return {\r\n        type: SAVE_BRUSH,\r\n        payload: setting\r\n    };\r\n}\r\n\r\nexport function changeSavedBrushes(savedBrushList) {\r\n    return {\r\n        type: CHANGE_SAVED_BRUSHES,\r\n        payload: savedBrushList\r\n    };\r\n}\r\n","import ListenerManager from '../../../utils/ListenerManager';\r\nimport ColorHelper from '../../../utils/ColorHelper';\r\nimport Tool from '../Tool';\r\nimport store from '../../../redux/store';\r\nimport {changeBrushSetting} from '../../../redux/actionCreators/brushActionCreators';\r\n\r\n//–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –∫–∏—Å—Ç–∏\r\nexport default class Brush extends Tool {\r\n\r\n    constructor() {\r\n        super();\r\n        this._listenerManager = new ListenerManager(new Array());\r\n    }\r\n\r\n    setColor(color) {\r\n        let state = store.getState();\r\n        let ctx = state.canvas.context;\r\n        if (isFinite(state.brush.alpha)) color = ColorHelper.toRgba(color, state.brush.alpha);\r\n        store.dispatch(changeBrushSetting({color}));\r\n    }\r\n\r\n    getColor() {\r\n        let state = store.getState();\r\n        return ColorHelper.toHex(state.brush.color);\r\n    }\r\n\r\n    //–ó–∞–¥–∞–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∫–∏—Å—Ç–∏\r\n    setAlpha(alpha) {\r\n        alpha = Math.floor(alpha * 100) / 100;\r\n\r\n        store.dispatch(changeBrushSetting({alpha}));\r\n\r\n        let state = store.getState();\r\n        this.setColor(state.brush.color);\r\n        // store.dispatch(changeBrushOpacity(alpha));\r\n    }\r\n\r\n    getAlpha() {\r\n        let state = store.getState();\r\n        return state.brush.alpha;\r\n    }\r\n\r\n    //—à–∏—Ä–∏–Ω–∞ –ª–∏–Ω–∏–∏\r\n    setSize(width) {\r\n        store.dispatch(changeBrushSetting({size: width}));\r\n    }\r\n\r\n    getSize() {\r\n        return store.getState().brush.size;\r\n    }\r\n}\r\n","import store from '../../../redux/store';\r\nimport Brush from './Brush';\r\nimport LayoutManager from './../../../Managers/LayoutManager/LayoutManager';\r\n\r\n\r\nexport default class SketchBrush extends Brush {\r\n    constructor() {\r\n        super();\r\n        this.started = false;\r\n        let state = store.getState();\r\n        this._canvasBlock = state.canvas.canvasBlock;\r\n    }\r\n\r\n    create() {\r\n        var ppts = [];\r\n\r\n        const tmpCanvas = document.createElement('canvas');\r\n        this._fakeCanvas = tmpCanvas;\r\n\r\n        let state = store.getState();\r\n\r\n        tmpCanvas.style.zIndex = 100;\r\n        tmpCanvas.height = state.canvas.size.height;\r\n        tmpCanvas.width = state.canvas.size.width;\r\n        tmpCanvas.style.top = state.canvas.position.top;\r\n        tmpCanvas.style.left = state.canvas.position.left;\r\n        tmpCanvas.style.position = 'absolute';\r\n        //–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞\r\n        tmpCanvas.classList.add('tmpCanvas');\r\n\r\n        tmpCanvas.style.cursor = 'crosshair';\r\n        const tmp_ctx = tmpCanvas.getContext('2d');\r\n        this._canvasBlock.prepend(tmpCanvas);\r\n        //–ù–∞–∂–∏–º–∞–µ–º –Ω–∞ –∫–ª–∞–≤–∏—à—É –º—ã—à–∏\r\n        this._listenerManager.addListener(this._canvasBlock, 'mousedown', (e) => {\r\n\r\n            let state = store.getState();\r\n            if (state.layouts.currentLayout.isHidden()) {\r\n                alert('–í—ã–±—Ä–∞–Ω–Ω—ã–π –≤–∞–º–∏ —Å–ª–æ–π —Å–∫—Ä—ã—Ç !');\r\n                return;\r\n            }\r\n            this.started = true;\r\n\r\n            this._ctx = state.layouts.currentLayout.getContext();\r\n            this._canvas = state.layouts.currentLayout.getCanvas();\r\n\r\n            this._ctx.strokeStyle = state.brush.color;\r\n            this._ctx.lineWidth = state.brush.size;\r\n            this._ctx.lineCap = 'round';\r\n\r\n            tmp_ctx.strokeStyle = this._ctx.strokeStyle;\r\n            tmp_ctx.lineWidth = this._ctx.lineWidth;\r\n            tmp_ctx.lineCap = this._ctx.lineCap;\r\n\r\n            console.log(state.canvas.size.height);\r\n\r\n            tmpCanvas.style.transform = `scale(${state.canvas.zoom})`;\r\n            tmpCanvas.style.top = state.canvas.position.top + 'px';\r\n            tmpCanvas.style.left = state.canvas.position.left + 'px';\r\n\r\n            onPaint(e);\r\n            this._listenerManager.addListener(tmpCanvas, 'mousemove', onPaint);\r\n        });\r\n\r\n        //–∫–æ–≥–¥–∞ –æ—Ç–∂–∏–º–∞–µ–º –∫–ª–∞–≤–∏—à—É –º—ã—à–∏\r\n        this._listenerManager.addListener(this._canvasBlock, 'mouseup', () => {\r\n            endPaint.call(this);\r\n        });\r\n\r\n        //–∫–æ–≥–¥–∞ –º—ã—à–∫–∞ —É—Ö–æ–¥–∏—Ç —Å —Ö–æ–ª—Å—Ç–∞\r\n        this._listenerManager.addListener(this._canvasBlock, 'mouseleave', () => {\r\n            endPaint.call(this);\r\n        });\r\n\r\n        function endPaint() {\r\n            if (this.started) {\r\n                this.started = false;\r\n\r\n                this._listenerManager.removeListener(tmpCanvas, 'mousemove', onPaint);\r\n                this._ctx.drawImage(tmpCanvas, 0, 0);\r\n\r\n                let state = store.getState();\r\n                LayoutManager.update();\r\n                state.layouts.currentLayout.saveInHistory();\r\n\r\n                tmp_ctx.clearRect(0, 0, tmpCanvas.width, tmpCanvas.height);\r\n\r\n                ppts = [];\r\n            }\r\n        }\r\n\r\n        var onPaint = (e) => {\r\n            let x = e.offsetX;\r\n            let y = e.offsetY;\r\n            ppts.push({x, y});\r\n\r\n            tmp_ctx.beginPath();\r\n            // tmp_ctx.moveTo(ppts[0].x, ppts[0].y);\r\n            tmp_ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n\r\n            if (ppts.length <= 3) {\r\n                tmp_ctx.arc(ppts[0].x, ppts[0].y, 0, 0, 2 * Math.PI);\r\n            }\r\n            for (var i = 1; i < ppts.length - 2; i++) {\r\n                var c = (ppts[i].x + ppts[i + 1].x) / 2;\r\n                var d = (ppts[i].y + ppts[i + 1].y) / 2;\r\n                tmp_ctx.quadraticCurveTo(ppts[i].x, ppts[i].y, c, d);\r\n            }\r\n            tmp_ctx.stroke();\r\n        };\r\n\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this._listenerManager.removeAllListener();\r\n        this._fakeCanvas.remove();\r\n    }\r\n}","import store from '../../../redux/store';\r\nimport LayoutManager from '../../../Managers/LayoutManager/LayoutManager';\r\nimport Brush from '../Brush/Brush';\r\n\r\nexport default class Eraser extends Brush {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    create() {\r\n        var ppts = [];\r\n\r\n        const tmpCanvas = document.createElement('canvas');\r\n        this._fakeCanvas = tmpCanvas;\r\n\r\n        let state = store.getState();\r\n\r\n        tmpCanvas.style.zIndex = 100;\r\n\r\n        tmpCanvas.height = state.canvas.size.height;\r\n        tmpCanvas.width = state.canvas.size.width;\r\n\r\n\r\n        tmpCanvas.style.transform = `scale(${state.canvas.zoom})`;\r\n        tmpCanvas.style.top = state.canvas.position.top;\r\n        tmpCanvas.style.left = state.canvas.position.left;\r\n        console.log(state.canvas.position.top);\r\n        tmpCanvas.style.position = 'absolute';\r\n        //–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞\r\n        tmpCanvas.classList.add('tmpCanvas');\r\n\r\n        tmpCanvas.style.cursor = 'crosshair';\r\n\r\n\r\n        const tmpCtx = tmpCanvas.getContext('2d');\r\n        state.canvas.canvasBlock.prepend(tmpCanvas);\r\n\r\n        this._listenerManager.addListener(tmpCanvas, 'mousedown', (e) => {\r\n\r\n            let state = store.getState();\r\n\r\n            this._ctx = state.layouts.currentLayout.getContext();\r\n            this._canvas = state.layouts.currentLayout.getCanvas();\r\n\r\n            this._ctx.lineWidth = state.brush.size;\r\n            this._ctx.lineCap = 'round';\r\n\r\n            tmpCtx.lineWidth = this._ctx.lineWidth;\r\n            tmpCtx.lineCap = this._ctx.lineCap;\r\n\r\n            this._ctx.strokeStyle = state.setting.canvasDefaultBackground;\r\n            tmpCtx.strokeStyle = state.setting.canvasDefaultBackground;\r\n\r\n            onPaint(e);\r\n\r\n            this._listenerManager.addListener(tmpCanvas, 'mousemove', onPaint);\r\n        });\r\n\r\n        this._listenerManager.addListener(tmpCanvas, 'mouseup', () => {\r\n            this._listenerManager.removeListener(tmpCanvas, 'mousemove', onPaint);\r\n\r\n            let imageData = testFunc(tmpCtx.getImageData(0, 0, tmpCanvas.width, tmpCanvas.height), this._ctx.getImageData(0, 0, tmpCanvas.width, tmpCanvas.height));\r\n\r\n            this._ctx.putImageData(imageData, 0, 0);\r\n\r\n            LayoutManager.update();\r\n            state.layouts.currentLayout.saveInHistory();\r\n\r\n            tmpCtx.clearRect(0, 0, tmpCanvas.width, tmpCanvas.height);\r\n            ppts = [];\r\n        });\r\n\r\n        var onPaint = (e) => {\r\n            let x = e.offsetX;\r\n            let y = e.offsetY;\r\n            ppts.push({x, y});\r\n\r\n            tmpCtx.beginPath();\r\n            tmpCtx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n\r\n            if (ppts.length <= 3) {\r\n                tmpCtx.arc(ppts[0].x, ppts[0].y, 0, 0, 2 * Math.PI);\r\n            }\r\n            for (var i = 1; i < ppts.length - 2; i++) {\r\n                var c = (ppts[i].x + ppts[i + 1].x) / 2;\r\n                var d = (ppts[i].y + ppts[i + 1].y) / 2;\r\n                tmpCtx.quadraticCurveTo(ppts[i].x, ppts[i].y, c, d);\r\n            }\r\n\r\n            tmpCtx.stroke();\r\n        };\r\n    }\r\n\r\n    destroy() {\r\n        this._listenerManager.removeAllListener();\r\n        this._fakeCanvas.remove();\r\n    }\r\n}\r\n\r\n//–ø—Ä–∏–Ω–∏–º–∞–µ—Ç 2 imageData \r\nfunction testFunc(tmpID, trueID) {\r\n    // 4 —Å–∏–º–≤–æ–ª–∞ red green blue opacity\r\n    for (let i = 0; i < tmpID.data.length; i = i + 4) {\r\n        if (tmpID.data[i + 3] === 255) {\r\n            trueID.data[i + 3] = 0;\r\n        }\r\n    }\r\n    return trueID;\r\n}\r\n","import store from '../../../redux/store';\r\nimport Tool from '../Tool';\r\nimport ListenerManager from '../../../utils/ListenerManager';\r\nimport {setCanvasPosition, setCanvasZoom} from '../../../redux/actionCreators/canvasActionCreator';\r\n\r\nexport default class Hand extends Tool {\r\n    constructor() {\r\n        super();\r\n        this._listenerManager = new ListenerManager(new Array());\r\n    }\r\n\r\n    create() {\r\n        console.log('create');\r\n        let state = store.getState();\r\n        let canvas = state.canvas.canvas;\r\n        let canvasBlock = state.canvas.canvasBlock;\r\n        console.log(canvasBlock);\r\n\r\n        let startYCoord = 0;\r\n        let startXCoord = 0;\r\n\r\n        canvas.style.cursor = 'move';\r\n\r\n        this._listenerManager.addListener(canvas, 'mousedown', (e) => {\r\n\r\n            startYCoord = e.clientY;\r\n            startXCoord = e.clientX;\r\n\r\n            this._listenerManager.addListener(canvasBlock, 'mousemove', mouseMove);\r\n        });\r\n\r\n        this._listenerManager.addListener(canvas, 'mouseup', (e) => {\r\n            this._listenerManager.removeListener(canvasBlock, 'mousemove', mouseMove);\r\n            this._listenerManager.removeListener(canvasBlock, 'mouseleave', mouseMove);\r\n\r\n        });\r\n\r\n        this._listenerManager.addListener(canvas, 'mouseleave', (e) => {\r\n            this._listenerManager.removeListener(canvasBlock, 'mousemove', mouseMove);\r\n            this._listenerManager.removeListener(canvasBlock, 'mouseleave', mouseMove);\r\n        });\r\n\r\n\r\n        this._listenerManager.addListener(canvas, 'contextmenu', () => {\r\n            store.dispatch(setCanvasZoom(1.5));\r\n        });\r\n\r\n        function mouseMove(e) {\r\n            //–Ω–µ–ø–æ–Ω—è—Ç–Ω–æ –ø–æ—á–µ–º—É, –Ω–æ —Ä–µ–∞–∫—Ç –Ω–µ –¥–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å offsetX\r\n\r\n\r\n            let state = store.getState();\r\n\r\n            let offsetY = -(startYCoord - e.clientY);\r\n            let offsetX = -(startXCoord - e.clientX);\r\n\r\n\r\n            console.log(offsetX);\r\n            // e.clientY - 100 -yCoord + 'px',\r\n\r\n            store.dispatch(setCanvasPosition({\r\n                top: parseInt(state.canvas.position.top) + offsetY + 'px',\r\n                left: parseInt(state.canvas.position.left) + offsetX + 'px'\r\n            }));\r\n            startYCoord = startYCoord + offsetY;\r\n            startXCoord = startXCoord + offsetX;\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        let state = store.getState();\r\n        let canvas = state.canvas.canvas;\r\n        this._listenerManager.removeAllListener();\r\n        canvas.style.cursor = 'default';\r\n\r\n    }\r\n\r\n}","import SketchBrush from '../../models/Tool/Brush/SketchBrush';\r\nimport Eraser from '../../models/Tool/Eraser/Eraser';\r\nimport Hand from '../../models/Tool/Hand/Hand';\r\nimport {changeSavedBrushes, saveBrush} from '../../redux/actionCreators/brushActionCreators';\r\nimport {setCurrentTool} from '../../redux/actionCreators/canvasActionCreator';\r\nimport store from '../../redux/store';\r\n\r\n\r\n//–∫–ª–∞—Å—Å –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Ä–∏—Å–æ–≤–∞–Ω–∏—è\r\nexport default class ToolManager {\r\n\r\n    static setTool(toolName) {\r\n        console.log('wtf SET TOOL' + toolName);\r\n        let state = store.getState();\r\n        let currentTool = state.canvas.currentTool;\r\n        if (currentTool) currentTool.destroy();\r\n\r\n        switch (toolName) {\r\n            case 'SCETCH_BRUSH': {\r\n                let brush = new SketchBrush();\r\n                brush.create();\r\n                store.dispatch(setCurrentTool(brush, 'SCETCH_BRUSH'));\r\n                break;\r\n            }\r\n            case 'ERASER': {\r\n                let brush = new Eraser();\r\n                brush.create();\r\n                store.dispatch(setCurrentTool(brush, 'ERASER'));\r\n                break;\r\n            }\r\n            case 'HAND': {\r\n                let brush = new Hand();\r\n                brush.create();\r\n                store.dispatch(setCurrentTool(brush, 'HAND'));\r\n                break;\r\n            }\r\n            default: {\r\n                let brush = new SketchBrush();\r\n                brush.create();\r\n                store.dispatch(setCurrentTool(brush, 'SCETCH_BRUSH'));\r\n                break;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    static saveBrush(brush) {\r\n        store.dispatch(saveBrush(brush));\r\n    }\r\n\r\n    static changeSavedBrushes(savedBrushes) {\r\n        store.dispatch(changeSavedBrushes(savedBrushes));\r\n    }\r\n\r\n    static getTool() {\r\n        return store.getState().canvas.currentTool;\r\n    }\r\n}\r\n\r\n","import React, {useEffect, useRef} from 'react';\r\nimport {bindActionCreators} from 'redux';\r\n\r\nimport './WorkSpace.scss';\r\nimport Canvas from './Canvas/Canvas';\r\nimport {connect} from 'react-redux';\r\nimport ToolManager from '../../../../Managers/ToolManager/ToolManager';\r\nimport LayoutManager from '../../../../Managers/LayoutManager/LayoutManager';\r\nimport {changeCanvasSize, setCanvasBlock} from '../../../../redux/actionCreators/canvasActionCreator';\r\n\r\n\r\nfunction WorkSpace(props) {\r\n\r\n    const workSpace = useRef();\r\n\r\n    //–∫–æ–≥–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è –∫–∞–Ω–≤–∞—Å, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –Ω–∏–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Å–ª–æ–∏\r\n    useEffect(() => {\r\n        console.log('first load canvas');\r\n        let style = getComputedStyle(workSpace.current);\r\n        props.changeCanvasSize(parseInt(style.width) - 2, parseInt(style.height) - 2);\r\n\r\n        if (props.canvas !== null) {\r\n            //canvasBlock –ù—É–∂–µ–Ω –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∫–∏—Å—Ç–∏. –≠—Ç–æ –±–ª–æ–∫ –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è canvas\r\n            props.setCanvasBlock(workSpace.current);\r\n            //—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–∏—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\r\n            ToolManager.setTool(props.currentToolName);\r\n            LayoutManager.init();\r\n        }\r\n    }, [props.canvas]);\r\n\r\n    return (\r\n        <div ref={workSpace} className='work-space' style={{backgroundColor: props.defaultBackgorund}}>\r\n            <Canvas></Canvas>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        changeCanvasSize: bindActionCreators(changeCanvasSize, dispatch),\r\n        setCanvasBlock: bindActionCreators(setCanvasBlock, dispatch)\r\n    };\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        canvas: state.canvas.canvas,\r\n        context: state.canvas.context,\r\n        defaultBackgorund: state.setting.canvasDefaultBackground,\r\n        currentLayout: state.layouts.currentLayout,\r\n        currentToolName: state.canvas.currentToolName\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(WorkSpace);","import React from 'react';\r\nimport './TopPanel.scss';\r\n\r\nexport default function TopPanel(props) {\r\n    return (\r\n        <div className='top-panel'>\r\n            <div className=\"top-panel__logo\">\r\n                {/* <img src=\"./img/test-logo.jpg\" alt=\"\"/> */}\r\n            </div>\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport {useLocation} from 'react-router';\r\nimport {NavLink} from 'react-router-dom';\r\nimport './TopPanelMenu.scss';\r\n\r\nexport default function TopPanelMenu(props) {\r\n\r\n    let location = useLocation();\r\n    let content;\r\n\r\n\r\n    let forSwitch = location.pathname.match(/\\/\\w+/)[0];\r\n    // console.log('top panel');\r\n    // console.log(forSwitch);\r\n    switch (forSwitch) {\r\n        case '/draw':  {\r\n            content =\r\n                <>\r\n                    <NavLink to='/save' className='top-panel__menu-item'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</NavLink>\r\n                    <NavLink to='/frames' className='top-panel__menu-item'>–†–∞–±–æ—Ç–∞—Ç—å —Å –∫–∞–¥—Ä–∞–º–∏</NavLink>\r\n                </>\r\n            break;\r\n        }\r\n        case '/frames': {\r\n            content =\r\n                <>\r\n                    <NavLink to='/save' className='top-panel__menu-item'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</NavLink>\r\n                    <NavLink to='/draw' className='top-panel__menu-item'>–†–∏—Å–æ–≤–∞—Ç—å</NavLink>\r\n                </>;\r\n            break;\r\n        }\r\n        case '/save': {\r\n            content =\r\n                <>\r\n                    <NavLink to='/draw' className='top-panel__menu-item'>–†–∏—Å–æ–≤–∞—Ç—å</NavLink>\r\n                    <NavLink to='/frames' className='top-panel__menu-item'>–†–∞–±–æ—Ç–∞—Ç—å —Å –∫–∞–¥—Ä–∞–º–∏</NavLink>\r\n                </>;\r\n            break;\r\n        }\r\n        default: {\r\n            content = <NavLink to='/draw' className='top-panel__menu-item'>draw</NavLink>;\r\n        }\r\n    }\r\n    return (\r\n        <div className='top-panel__menu'>\r\n            <div className='top-panel__menu-item'>–§–∞–π–ª</div>\r\n            {content}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport './InputsBlock.scss'\r\n\r\nfunction InputsBlock(props) {\r\n    return (\r\n        <div className=\"brush-panel__block size-block\">\r\n            <div className=\"brush-panel__panel-titile\">{props.title}</div>\r\n            <div className=\"brush-panel__inputs-block\">\r\n                <input min={props.min} max={props.max} step={props.step} onChange={props.onChange} value={props.value} type=\"number\"/>\r\n                <input min={props.min} max={props.max} step={props.step} onChange={props.onChange} value={props.value} type=\"range\"/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default InputsBlock;","import React, {useRef} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport ToolManager from '../../../../../../Managers/ToolManager/ToolManager';\r\n\r\n\r\nfunction SavedColors(props) {\r\n\r\n    let colorIndex = null;\r\n    let brushMenu = useRef();\r\n\r\n    function deleteButtonHandler() {\r\n        props.savedBrushes.splice(colorIndex, 1);\r\n        ToolManager.changeSavedBrushes(props.savedBrushes);\r\n        brushMenu.current.classList.add('fastRemove');\r\n        brushMenu.current.classList.remove('active');\r\n        //–±–µ–∑ —Ç–∞–π–º–∞—É—Ç–∞ –±—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–±–∏—Ä–∞—Ç—å –∫–ª–∞—Å—ã –∑–∞ \"1 –∫—Ä—É–≥\" –∏ –∞–Ω–∏–º–∞—Ü–∏–∏ –Ω–µ –±—É–¥–µ—Ç\r\n        setTimeout(() => {\r\n            brushMenu.current.classList.remove('fastRemove');\r\n        }, 0);\r\n    }\r\n\r\n    function changeButtonHandler() {\r\n        props.savedBrushes[colorIndex].size = props.brushSize;\r\n        props.savedBrushes[colorIndex].color = props.brushColor;\r\n        props.savedBrushes[colorIndex].alpha = props.brushAlpha;\r\n\r\n        ToolManager.changeSavedBrushes(props.savedBrushes);\r\n        //–ü–æ—Å–ª–µ –∫–ª–∏–∫–∞ –Ω—É–∂–Ω–æ —É–±–∏—Ä–∞—Ç—å –º–µ–Ω—é –±—ã—Å—Ç—Ä–æ\r\n        brushMenu.current.classList.add('fastRemove');\r\n        brushMenu.current.classList.remove('active');\r\n        //–±–µ–∑ —Ç–∞–π–º–∞—É—Ç–∞ –±—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–±–∏—Ä–∞—Ç—å –∫–ª–∞—Å—ã –∑–∞ \"1 –∫—Ä—É–≥\"\r\n        setTimeout(() => {\r\n            brushMenu.current.classList.remove('fastRemove');\r\n        }, 0);\r\n    }\r\n\r\n    function colorRightClickHandler(e, index) {\r\n        colorIndex = index;\r\n        brushMenu.current.classList.add('active');\r\n        let domRect = e.target.getBoundingClientRect();\r\n        brushMenu.current.style.top = domRect.top + 'px';\r\n        brushMenu.current.style.left = domRect.left + 'px';\r\n        brushMenu.current.addEventListener('mouseleave', mouseLeave);\r\n        e.preventDefault();\r\n        let timeOutId;\r\n\r\n        //–°—Ç–∞–≤–∏–º —Ç–∞–π–º–∞—É—Ç —á—Ç–æ –±—ã —Å–∞–º–æ –∑–∞–∫—Ä—ã–ª–æ—Å—å\r\n        timeOutId = setTimeout(() => {\r\n            brushMenu.current.classList.remove('active');\r\n        }, 500);\r\n\r\n        //–ï—Å–ª–∏ –∑–∞—à–ª–∏ –º—ã—à–∫–æ–π –≤ –º–µ–Ω—é - –æ—Ç–∫–ª—é—á–∞–µ–º —Ç–∞–π–º–∞—É—Ç\r\n        brushMenu.current.addEventListener('mouseenter', (e) => {\r\n            clearTimeout(timeOutId);\r\n            brushMenu.current.classList.add('active');\r\n        });\r\n\r\n        //–í—ã—à–ª–∏ –∏–∑ –º–µ–Ω—é - –≤–∫–ª—é—á–∞–µ–º —Ç–∞–π–º–∞—É—Ç\r\n        function mouseLeave() {\r\n            brushMenu.current.classList.add('fastRemove');\r\n            brushMenu.current.classList.remove('active');\r\n            //–±–µ–∑ —Ç–∞–π–º–∞—É—Ç–∞ –±—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–±–∏—Ä–∞—Ç—å –∫–ª–∞—Å—ã –∑–∞ \"1 –∫—Ä—É–≥\"\r\n            setTimeout(() => {\r\n                brushMenu.current.classList.remove('fastRemove');\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    function changeBrushHandler(index) {\r\n        let brushSetting = props.savedBrushes[index];\r\n        let tool = ToolManager.getTool();\r\n        tool.setColor(brushSetting.color);\r\n        tool.setSize(brushSetting.size);\r\n        tool.setAlpha(brushSetting.alpha);\r\n    }\r\n\r\n    return (\r\n        <div className=\"brush-panel__block\">\r\n            <div className=\"brush-panel__panel-titile\">–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∫–∏—Å—Ç–∏</div>\r\n            <div className='brush-panel__saved-brush'>\r\n                <div ref={brushMenu} className=\"brush-panel__saved-brush-menu \">\r\n                    <div onClick={changeButtonHandler} className=\"brush-panel__saved-brush-menu-item\">–ò–∑–º–µ–Ω–∏—Ç—å</div>\r\n                    <div onClick={deleteButtonHandler} className=\"brush-panel__saved-brush-menu-item\">–£–¥–∞–ª–∏—Ç—å</div>\r\n                </div>\r\n                {props.savedBrushes.map((value, index) => {\r\n                    return <div\r\n                        onClick={() => {\r\n                            changeBrushHandler(index);\r\n                        }}\r\n                        onContextMenu={(e) => {\r\n                            colorRightClickHandler(e, index);\r\n                        }}\r\n                        key={index}\r\n                        style={{backgroundColor: value.color}}\r\n                        className=\"brush-panel__saved-brush-item\">\r\n                        s:{value.size} o:{value.alpha}\r\n                    </div>;\r\n                })}\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        brushSize: state.brush.size,\r\n        brushColor: state.brush.color,\r\n        brushAlpha: state.brush.alpha,\r\n        savedBrushes: state.brush.savedBrushes\r\n    };\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(SavedColors);","import React from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport './BrushSettingPanel.scss';\r\n\r\nimport ToolManager from '../../../../../Managers/ToolManager/ToolManager';\r\nimport ColorHelper from '../../../../../utils/ColorHelper';\r\nimport InputsBlock from '../../../../Dump/InputsBlock/InputsBlock';\r\nimport SavedBrushes from './SavedBrushes/SavedBrushes';\r\n\r\n\r\n\r\nfunction BrushSettingPanel(props) {\r\n\r\n    function changeSizeInputsHandler(e) {\r\n        let tool = ToolManager.getTool();\r\n        tool.setSize(e.target.value);\r\n    }\r\n\r\n    function changeColorInputsHandler(e) {\r\n        let tool = ToolManager.getTool();\r\n        tool.setColor(e.target.value);\r\n    }\r\n\r\n    function setBrushAlphaHandler(e) {\r\n        let tool = ToolManager.getTool();\r\n        tool.setAlpha(e.target.value);\r\n    }\r\n\r\n    function saveBrushHandler(e) {\r\n        ToolManager.saveBrush({color: props.brushColor, alpha: props.brushAlpha, size: props.brushSize});\r\n    }\r\n\r\n    return (\r\n        <div className=\"brush-panel\">\r\n            <InputsBlock title='–†–∞–∑–º–µ—Ä –∫–∏—Å—Ç–∏'\r\n                         value ={props.brushSize}\r\n                         onChange={changeSizeInputsHandler}\r\n                         max='250' min='0' step={'1'}\r\n            />\r\n            <InputsBlock title='–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å'\r\n                         value={props.brushAlpha}\r\n                         onChange={setBrushAlphaHandler}\r\n                         max='1' min='0' step={'0.01'}\r\n            />\r\n\r\n            <div className=\"brush-panel__block\">\r\n                <div className=\"brush-panel__panel-titile\">–¶–≤–µ—Ç –∫–∏—Å—Ç–∏</div>\r\n                <div className=\"brush-panel__inputs-block\">\r\n                    <input onChange={changeColorInputsHandler} value={ColorHelper.toHex(props.brushColor)}\r\n                           type=\"color\"/>\r\n                    <input value={ColorHelper.toHex(props.brushColor)} type=\"text\"/>\r\n                </div>\r\n                <button onClick={saveBrushHandler} className='panel__block-button'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>\r\n            </div>\r\n            <SavedBrushes></SavedBrushes>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        brushSize: state.brush.size,\r\n        brushColor: state.brush.color,\r\n        brushAlpha: state.brush.alpha,\r\n        savedBrushes: state.brush.savedBrushes\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(BrushSettingPanel);","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport {setCanvasPosition, setCanvasZoom} from '../../../../../redux/actionCreators/canvasActionCreator';\r\nimport InputsBlock from '../../../../Dump/InputsBlock/InputsBlock';\r\nimport './HandToolSettingPanel.scss'\r\n\r\nfunction HandToolSettingPanel(props) {\r\n\r\n    function zoomChangeHandler(e) {\r\n        console.log(e.currentTarget);\r\n        props.setCanvasZoom(e.currentTarget.value);\r\n    }\r\n\r\n    function canvasTopPositionHandler(e) {\r\n        props.setCanvasPosition({\r\n            top: e.currentTarget.value+'px',\r\n            left: props.left\r\n        })\r\n    }\r\n    function canvasLeftPositionHandler(e) {\r\n        props.setCanvasPosition({\r\n            top: props.top,\r\n            left: e.currentTarget.value +'px',\r\n        })\r\n    }\r\n\r\n    function clickBackToCenterBtn() {\r\n        props.setCanvasPosition({\r\n            top: '1px',\r\n            left: '1px',\r\n        })\r\n    }\r\n    return (\r\n        <div className='top-panel__setting-hand-tool'>\r\n            <div>\r\n                <InputsBlock title='–£–≤–µ–ª–∏—á–µ–Ω–∏–µ'\r\n                             onChange={zoomChangeHandler}\r\n                             max='5' min='0.1' step='0.1'\r\n                             value={props.canvasZoom}\r\n                />\r\n            </div>\r\n            <div>\r\n                <InputsBlock title='x –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞'\r\n                             onChange={canvasLeftPositionHandler}\r\n                             max={parseInt(props.canvasSize.width)} min={-parseInt(props.canvasSize.width)} step='1'\r\n                             value={parseInt(props.left)}\r\n                />\r\n            </div>\r\n            <div>\r\n                <InputsBlock title='y –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞'\r\n                             onChange={canvasTopPositionHandler}\r\n                             max={parseInt(props.canvasSize.height)} min={-parseInt(props.canvasSize.height)} step='1'\r\n                             value={parseInt(props.top)}\r\n                />\r\n            </div>\r\n            <div>\r\n                <button onClick={clickBackToCenterBtn}>–í–µ—Ä–Ω—É—Ç—å –ø–æ —Ü–µ–Ω—Ç—Ä—É</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        canvasZoom: state.canvas.zoom,\r\n        top: state.canvas.position.top,\r\n        left: state.canvas.position.left,\r\n        canvasSize: state.canvas.size\r\n\r\n    };\r\n}\r\n\r\nfunction mapDispatchToPorps(dispatch) {\r\n    return {\r\n        setCanvasZoom: bindActionCreators(setCanvasZoom, dispatch),\r\n        setCanvasPosition: bindActionCreators(setCanvasPosition, dispatch)\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToPorps)(HandToolSettingPanel);\r\n\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport BrushPanel from './BrushSettingPanel/BrushSettingPanel';\r\nimport HandToolPanel from './HandToolSettingPanel/HandToolSettingPanel';\r\n\r\nfunction ToolSettingPanel(props) {\r\n    if (props.currentToolName === 'HAND') {\r\n        return <HandToolPanel></HandToolPanel>;\r\n    }\r\n    return <BrushPanel></BrushPanel>;\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        currentToolName: state.canvas.currentToolName\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(ToolSettingPanel);","import React from 'react';\r\nimport './LeftPanel.scss';\r\n\r\n\r\nfunction LeftPanel(props) {\r\n    return (\r\n        <div className='left-panel'>\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LeftPanel;","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport ToolManager from '../../../../Managers/ToolManager/ToolManager';\r\nimport './ToolList.scss';\r\n\r\n\r\nfunction ToolList(props) {\r\n\r\n    function setScetchBrushHandler() {\r\n        ToolManager.setTool('SCETCH_BRUSH');\r\n    }\r\n\r\n    function setEraserHandler() {\r\n        ToolManager.setTool('ERASER');\r\n    }\r\n\r\n    function setHandToolHandler() {\r\n        ToolManager.setTool('HAND');\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div onClick={setScetchBrushHandler}\r\n                 className={props.currentToolName === 'SCETCH_BRUSH' ? 'left-panel__tool-item active' : 'left-panel__tool-item'}>\r\n                <img src=\"./img/brush.svg\" alt=\"\"/>\r\n            </div>\r\n\r\n            <div onClick={setEraserHandler}\r\n                 className={props.currentToolName === 'ERASER' ? 'left-panel__tool-item active' : 'left-panel__tool-item'}>\r\n                <img src=\"./img/eraser.svg\" alt=\"\"/>\r\n            </div>\r\n            <div onClick={setHandToolHandler}\r\n                 className={props.currentToolName === 'HAND' ? 'left-panel__tool-item active' : 'left-panel__tool-item'}>\r\n                <img src=\"./img/hand.svg\" alt=\"\"/>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        currentToolName: state.canvas.currentToolName\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(ToolList);\r\n\r\n","import React from 'react';\r\nimport './RightPanel.scss'\r\n\r\nfunction RightPanel(props) {\r\n    return (\r\n        <div className='right-panel'>\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RightPanel;","import React, {useEffect, useRef} from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport './Layout.scss';\r\nimport LayoutManager from '../../../../../../Managers/LayoutManager/LayoutManager';\r\nimport FrameManager from '../../../../../../Managers/FrameManager/FrameManager';\r\n\r\n\r\nfunction Layout(props) {\r\n\r\n    let layout = props.layout;\r\n    let canvas = layout.getCanvas();\r\n\r\n    let layoutBlock = useRef();\r\n    let index = props.index;\r\n\r\n\r\n    //–∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏–ª—Å—è, –≤—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–Ω–≤–∞—Å –∏–∑ –º–æ–¥–µ–ª–∏\r\n    useEffect(() => {\r\n        console.log('render layout');\r\n        layoutBlock.current.append(canvas);\r\n        canvas.style.backgroundColor = props.defaultBackgorund;\r\n        canvas.style.outline = props.isCurrent ? '10px solid red' : 'none';\r\n        //–∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–µ–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —É–¥–∞–ª—è–µ–º –∫–∞–Ω–≤–∞—Å\r\n        return () => {\r\n            canvas.remove();\r\n        };\r\n    });\r\n\r\n    function hideLayoutHandler(e) {\r\n        LayoutManager.toggleHide(index);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function clickToLayoutHandler(e) {\r\n        if (e.ctrlKey) {\r\n            LayoutManager.select(index);\r\n            return;\r\n        }\r\n        LayoutManager.setCurrentLayout(index);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function upHandler(e) {\r\n        LayoutManager.swap(index, index - 1);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function downHandler(e) {\r\n        LayoutManager.swap(index, index + 1);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function historyBackHandler(e) {\r\n        layout.historyBack();\r\n        //–æ–±–Ω–æ–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–≤–∞—Å, –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞—è –∫–∞–∂–¥—ã–π —Å–ª–æ–π\r\n        LayoutManager.update();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function historyNextHandler(e) {\r\n        layout.historyNext();\r\n        //–æ–±–Ω–æ–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–≤–∞—Å, –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞—è –∫–∞–∂–¥—ã–π —Å–ª–æ–π\r\n        LayoutManager.update();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function deleteLayoutHandler(e) {\r\n        LayoutManager.deleteLayout(index);\r\n        e.stopPropagation();\r\n    }\r\n\r\n\r\n    function contextMenuHandler(e) {\r\n        if (layout.isSelected()) {\r\n            props.setMenuActive(true);\r\n            let x = e.pageY - 10;\r\n            let y = e.pageX - 20;\r\n            //–µ—Å–ª–∏ –º–µ–Ω—é –≤—ã–µ–∑–∂–∞–µ—Ç –∑–∞ –ø—Ä–∞–≤—ã–π –∫—Ä–∞–π\r\n            if (y + 200 >= window.innerWidth) {\r\n                y = window.innerWidth - 200;\r\n            }\r\n            props.setMenuPosition({x, y});\r\n        }\r\n\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n\r\n    function addToMultiplicate() {\r\n        FrameManager.addFrame(layout, 100);\r\n    }\r\n\r\n    return (\r\n        <div onContextMenu={contextMenuHandler}\r\n             ref={layoutBlock}\r\n             onClick={clickToLayoutHandler}\r\n             key={index}\r\n             style={props.isSelected ? {backgroundColor: 'darkred'} : {backgroundColor: 'black'}}\r\n             className='right-panel__layout-block layout-block'>\r\n\r\n            <div className='layout-block__left-menu'>\r\n                <div onClick={upHandler} className=\"layout-block__left-menu-item\">\r\n                    <img src=\"./img/up.svg\" alt=\"\"/>\r\n                </div>\r\n                <div onClick={hideLayoutHandler} className=\"layout-block__left-menu-item\">\r\n                    {!props.isHidden ? <img src=\"./img/show.svg\" alt=\"\"/> : <img src=\"./img/hide.svg\" alt=\"\"/>}\r\n                </div>\r\n                <div onClick={deleteLayoutHandler} className=\"layout-block__left-menu-item\">\r\n                    <img src=\"./img/delete.svg\" alt=\"\"/>\r\n                </div>\r\n                <div onClick={downHandler} className=\"layout-block__left-menu-item\">\r\n                    <img src=\"./img/up.svg\" alt=\"\" style={{transform: 'rotateX(180deg)'}}/>\r\n                </div>\r\n            </div>\r\n            <div className='layout-block__bottom-menu'>\r\n                <div className=\"layout-block__bottom-menu-item history\">History</div>\r\n                <div onClick={historyBackHandler} className=\"layout-block__bottom-menu-item back\">\r\n                    <img src=\"./img/up.svg\" alt=\"\" style={{transform: 'rotateZ(-90deg)'}}/>\r\n                </div>\r\n                <div onClick={addToMultiplicate} className=\"layout-block__bottom-menu-item favorites\">–î–ª—è –º—É–ª—å—Ç–∞</div>\r\n                <div onClick={historyNextHandler} className=\"layout-block__bottom-menu-item next\">\r\n                    <img src=\"./img/up.svg\" alt=\"\" style={{transform: 'rotateZ(90deg)'}}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        defaultBackgorund: state.setting.canvasDefaultBackground\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Layout);","import React from 'react';\r\nimport './ContextMenu.scss';\r\n\r\nfunction ContextMenu(props) {\r\n\r\n    function contextMenuMouseLeaveHandler() {\r\n        props.setMenuActive(false);\r\n    }\r\n\r\n    return (\r\n        <div className={props.active ? 'context-menu active' : 'context-menu'}\r\n              onMouseLeave={contextMenuMouseLeaveHandler}\r\n              style={{top: props.menuPosition.x, left: props.menuPosition.y}}>\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ContextMenu;","import React, {useState} from 'react';\r\n\r\nimport {connect} from 'react-redux';\r\nimport './Layouts.scss';\r\nimport LayoutModel from '../../../../../models/Layout';\r\nimport ReactDOM from 'react-dom';\r\nimport LayoutManager from '../../../../../Managers/LayoutManager/LayoutManager';\r\nimport FrameManager from '../../../../../Managers/FrameManager/FrameManager';\r\nimport Layout from './Layout/Layout';\r\nimport ContextMenu from '../../../../Dump/ContextMenu/ContextMenu';\r\n\r\nfunction Layouts(props) {\r\n\r\n    let menuBlock = React.createRef();\r\n\r\n    let [menuPosition, setMenuPosition] = useState({x: 0, y: 0});\r\n    let [active, setMenuActive] = useState(false);\r\n\r\n\r\n    function addLayoutHandler() {\r\n        //–û–±—ã—á–Ω—ã–π —Å–ª–æ–π –∏–∑ –º–æ–¥–µ–ª–∏\r\n        let layout = new LayoutModel(props.canvas, props.context, true, ++LayoutManager.id);\r\n        LayoutManager.addLayout(layout);\r\n    }\r\n\r\n    function addToMultiplication(e) {\r\n        //–û–±—ã—á–Ω—ã–π —Å–ª–æ–π –∏–∑ –º–æ–¥–µ–ª–∏, –ø—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–æ –±—ã–ª–æ –¥—Ä—É–≥–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ –∏–º–ø–æ—Ä—Ç–µ\r\n        let layout = new LayoutModel(props.canvas, props.context, true, ++LayoutManager.id);\r\n        FrameManager.addFrame(layout, 100);\r\n    }\r\n\r\n    function deleteSelectedHandler(e) {\r\n        setMenuActive(false);\r\n        let indexArray = [];\r\n        console.log(props.layoutList);\r\n        props.layoutList.map((value, index) => {\r\n            if (value.isSelected()) indexArray.push(index);\r\n            return value;\r\n        });\r\n        LayoutManager.deleteLayouts(indexArray);\r\n    }\r\n\r\n    function combineSelectedHandler(e) {\r\n        setMenuActive(false);\r\n        let indexArray = [];\r\n        props.layoutList.map((value, index) => {\r\n            if (value.isSelected()) indexArray.push(index);\r\n            return value;\r\n        });\r\n        LayoutManager.combine(indexArray);\r\n    }\r\n\r\n    function unselectAllHandler() {\r\n        LayoutManager.unSelectAll();\r\n    }\r\n\r\n\r\n    let layoutMenu = <ContextMenu setMenuActive={setMenuActive}\r\n                                  active={active}\r\n                                  menuPosition={menuPosition}\r\n    >\r\n        <div onClick={deleteSelectedHandler} className=\"right-panel__context-menu-item\">–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ</div>\r\n        <div onClick={combineSelectedHandler} className=\"right-panel__context-menu-item\">–û–±—å–µ–¥–µ–Ω–∏—Ç—å</div>\r\n        <div onClick={unselectAllHandler} className=\"right-panel__context-menu-item\">–û—Ç–º–µ–Ω–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ</div>\r\n    </ContextMenu>\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className='right-panel__layout-buttons'>\r\n                <button onClick={addLayoutHandler}>–î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–π</button>\r\n                <button onClick={addToMultiplication}>–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–∞–¥—Ä—ã</button>\r\n            </div>\r\n            {ReactDOM.createPortal(layoutMenu, document.getElementById('root'))}\r\n            <div className='right-panel__layout-list'>\r\n                {\r\n                    props.layoutList.map((layout, index) => {\r\n                        return <Layout key={layout.getId()}\r\n                                       layout={layout}\r\n                                       index={index}\r\n                                       isCurrent={index === props.currentLayoutIndex}\r\n                                       isHidden={layout.isHidden()}\r\n                                       isSelected={layout.isSelected()}\r\n                                       setMenuPosition={setMenuPosition}\r\n                                       setMenuActive={setMenuActive}\r\n                        />;\r\n                    })\r\n                }\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        layoutList: state.layouts.layoutList,\r\n        currentLayoutIndex: state.layouts.currentLayoutIndex,\r\n        canvas: state.canvas.canvas,\r\n        context: state.canvas.context\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Layouts);\r\n\r\n\r\n// let layoutMenu = <LayoutMenu ref={menuBlock}\r\n//                              menuPosition={menuPosition}\r\n//                              active={active}\r\n//                              setMenuActive={setMenuActive}\r\n//                              layoutList={props.layoutList}\r\n// />;","import React, {useEffect} from 'react';\r\nimport './FrameItem.scss';\r\nimport {connect} from 'react-redux';\r\nimport FrameManager from '../../../../../../Managers/FrameManager/FrameManager';\r\nimport LayoutManager from '../../../../../../Managers/LayoutManager/LayoutManager';\r\nimport Layout from '../../../../../../models/Layout';\r\n\r\nfunction FrameItem(props) {\r\n\r\n    const value = props.value;\r\n    const id = value.getId();\r\n\r\n    const index = props.index;\r\n    const refFrameBlock = React.createRef();\r\n\r\n    useEffect(() => {\r\n        if (props.isOpen) {\r\n            refFrameBlock.current.prepend(value.getCanvas());\r\n            value.getCanvas().style.backgroundColor = props.defaultBackgorund;\r\n        }\r\n        return () => {\r\n            value.getCanvas().remove();\r\n        };\r\n    }, [id, props.defaultBackgorund, value, props.isOpen, refFrameBlock.current]);\r\n\r\n\r\n    function deleteFrameHandler(e) {\r\n        FrameManager.deleteFrame(index);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function changeDelayHandler(e) {\r\n        let delay = e.currentTarget.value;\r\n        value.setDelay(delay);\r\n        FrameManager.changeFrame(index, value);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function addToLayoutListHandler(e) {\r\n        let canvas = document.createElement('canvas');\r\n        canvas.width = value.getCanvas().width;\r\n        canvas.height = value.getCanvas().height;\r\n        let ctx = canvas.getContext('2d');\r\n        ctx.drawImage(value.getCanvas(), 0, 0);\r\n\r\n        let layout = new Layout(canvas, ctx, true, ++LayoutManager.id);\r\n        props.layoutList.push(layout);\r\n        LayoutManager.changeLayoutList(props.layoutList);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function upPositionHandler(e) {\r\n        FrameManager.swap(index, index - 1);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function downPositionHandler(e) {\r\n        FrameManager.swap(index, index + 1);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function frameClickHandler(e) {\r\n        if(e.ctrlKey){\r\n            if(props.isSelected)  value.unSelect();\r\n            else value.select();\r\n            FrameManager.changeFrame();\r\n            e.stopPropagation();\r\n            return;\r\n        }\r\n        FrameManager.set–°urrentFrameIndex(index);\r\n    }\r\n\r\n    function clickOpenHandler(e) {\r\n        FrameManager.openCloseFrame(value);\r\n        e.stopPropagation();\r\n    }\r\n    function onContextMenuHandler(e){\r\n        if(props.isSelected){\r\n            let x = e.pageY - 10;\r\n            let y = e.pageX - 20;\r\n            //–µ—Å–ª–∏ –º–µ–Ω—é –≤—ã–µ–∑–∂–∞–µ—Ç –∑–∞ –ø—Ä–∞–≤—ã–π –∫—Ä–∞–π\r\n            if (y + 200 >= window.innerWidth) {\r\n                y = window.innerWidth - 200;\r\n            }\r\n            props.setMenuPosition({x, y});\r\n            props.setMenuActive(true);\r\n        }\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    let className = props.isOpen ? 'frame-block opened' : 'frame-block';\r\n    className = props.isSelected ? className + ' selected' : className;\r\n    return (\r\n        <div ref={refFrameBlock}\r\n             className={className}\r\n             style={props.currentFrameIndex === index ? {background: 'darkred'} : {}}\r\n             onClick={frameClickHandler}\r\n            onContextMenu={onContextMenuHandler}>\r\n            <span className='frame-block__index'>{props.index + 1}</span>\r\n\r\n            <div className='frame-block__open-close-btn'\r\n                 onClick={clickOpenHandler}></div>\r\n\r\n            <div className='frame-block__menu frame-menu'>\r\n                <div onClickCapture={upPositionHandler} className=\"frame-menu__item\">\r\n                    <img src=\"./img/up.svg\" alt=\"\"/>\r\n                </div>\r\n                <div className=\"frame-menu__item\">\r\n                    <button onClickCapture={addToLayoutListHandler}>–í —Å–ª–æ–∏</button>\r\n                </div>\r\n                <div onClickCapture={downPositionHandler} className=\"frame-menu__item down-arrow\">\r\n                    <img src=\"./img/up.svg\" alt=\"\"/>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"frame-block__input-block\">\r\n                <h2>–ó–∞–¥–µ—Ä–∂–∫–∞</h2>\r\n                <input onClickCapture={e => e.stopPropagation()}\r\n                       value={value.getDelay()}\r\n                       onChange={changeDelayHandler}\r\n                       min='0' type=\"number\"/>\r\n            </div>\r\n            <div className='frame-block__delete-btn'>\r\n                <img onClickCapture={deleteFrameHandler} src=\"./img/delete.svg\" alt=\"\"/>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nfunction mapStateToPorps(state) {\r\n    return {\r\n        currentFrameIndex: state.frames.currentFrameIndex,\r\n        defaultBackgorund: state.setting.canvasDefaultBackground,\r\n        layoutList: state.layouts.layoutList\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToPorps)(FrameItem);","import React, {useState} from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport {connect} from 'react-redux';\r\nimport FrameBlock from './FrameBlock/FrameItem';\r\nimport './Frames.scss';\r\nimport ContextMenu from '../../../../Dump/ContextMenu/ContextMenu';\r\nimport FrameManager from '../../../../../Managers/FrameManager/FrameManager';\r\n\r\nfunction Frames(props) {\r\n\r\n    let [menuActive, setMenuActive] = useState(false);\r\n    let [menuPosition, setMenuPosition] = useState({x:'0px',y:'0px'});\r\n    let [contextMenuDelay, setContextMenuDelay] = useState(100);\r\n\r\n\r\n    //–£—Å—Ç–∞–Ω–≤–ª–∏–≤–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–ª–æ–µ–≤\r\n    function clickContextBtnDelayHandler(e){\r\n        setMenuActive(false);\r\n        FrameManager.setDelaySelectedFrames(contextMenuDelay);\r\n    }\r\n\r\n    function unSelectAllFrame(){\r\n        setMenuActive(false);\r\n        FrameManager.unSelectAllFrame();\r\n    }\r\n\r\n    function deleteSelectedFrame(){\r\n        setMenuActive(false);\r\n        if(window.confirm('–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞–¥—Ä—ã ?')) FrameManager.deleteSelectedFrame();\r\n    }\r\n    let FrameMenu = <ContextMenu active={menuActive}\r\n                                 setMenuActive={setMenuActive}\r\n                                 menuPosition={menuPosition}>\r\n                        <div className='context-menu-item'>\r\n                            <div>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É</div>\r\n                            <div>\r\n                                <input className='context-menu-item__input'\r\n                                       value={contextMenuDelay}\r\n                                       onChange={(e)=>{setContextMenuDelay(e.currentTarget.value)}}\r\n                                       type='number'/>\r\n                                       <button onClick={clickContextBtnDelayHandler}>OK</button>\r\n                            </div>\r\n                        </div>\r\n                        <div className='context-menu-item'\r\n                            onClick={deleteSelectedFrame}>–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ</div>\r\n                        <div className='context-menu-item'\r\n                            onClick={unSelectAllFrame}>–û—Ç–º–µ–Ω–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ</div>\r\n                    </ContextMenu>;\r\n\r\n    return (\r\n        <div className='right-panel__frames'>\r\n            {ReactDOM.createPortal(<>{FrameMenu}</>, document.getElementById('root'))}\r\n            {\r\n                props.frameList.map((value, index) => {\r\n                        return <FrameBlock key={value.getId()}\r\n                                           value={value}\r\n                                           index={index}\r\n                                           delay={value.getDelay()}\r\n                                           isOpen={value.isOpen()}\r\n                                           isSelected={value.isSelected()}\r\n                                           setMenuActive={setMenuActive}\r\n                                           setMenuPosition={setMenuPosition}\r\n                        />\r\n                        })}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        frameList: state.frames.frameList\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Frames);","import React, {useEffect, useState} from 'react';\r\n\r\nimport './Tabs.scss';\r\n\r\nimport Layouts from '../Layouts/Layouts';\r\nimport Frames from '../Frames/Frames';\r\n\r\n\r\nexport default function Tabs(props) {\r\n    let [tabsNumber, setTabsActive] = useState(0);\r\n    const setContent = props.setContent;\r\n\r\n    useEffect(() => {\r\n        switch (tabsNumber) {\r\n            case 0: {\r\n                setContent(<Layouts></Layouts>);\r\n                break;\r\n            }\r\n            case 1: {\r\n                setContent('history');\r\n                break;\r\n            }\r\n            case 2: {\r\n                setContent(<Frames></Frames>);\r\n                break;\r\n            }\r\n            default: {\r\n            }\r\n        }\r\n    }, [tabsNumber, setContent]);\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className='right-panel__tabs'>\r\n                <button onClick={() => {\r\n                    setTabsActive(0);\r\n                }}\r\n                        className={tabsNumber === 0 ? 'right-panel__tabs-button active' : 'right-panel__tabs-button'}>\r\n                    –°–ª–æ–∏\r\n                </button>\r\n                {/* <button onClick={()=>{setTabsActive(1)}} \r\n                        className={tabsNumber===1 ? 'right-panel__tabs-button active' : 'right-panel__tabs-button'}>\r\n                        –ò—Å—Ç–æ—Ä–∏—è\r\n                </button> */}\r\n                <button onClick={() => {\r\n                    setTabsActive(2);\r\n                }}\r\n                        className={tabsNumber === 2 ? 'right-panel__tabs-button active' : 'right-panel__tabs-button'}>\r\n                    –ö–∞–¥—Ä—ã\r\n                </button>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import React, {useState} from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport Layouts from './Layouts/Layouts';\r\nimport Tabs from './Tabs/Tabs';\r\n\r\n\r\nfunction RightPanelContent() {\r\n\r\n    const [content, setContent] = useState(<Layouts></Layouts>);\r\n\r\n    return (<>\r\n                <Tabs setContent={setContent}></Tabs>\r\n                {content}\r\n            </>\r\n    );\r\n}\r\n\r\nexport default connect()(RightPanelContent);","import React from 'react';\r\nimport './CenterSpace.scss';\r\n\r\n\r\nfunction CenterSpace(props) {\r\n    return (\r\n        <div className='center-space'>\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CenterSpace;","import React from 'react';\r\nimport WorkSpace from './WorkSpace/WorkSpace';\r\nimport TopPanel from '../../Dump/TopPanel/TopPanel';\r\nimport TopPanelMenu from '../TopPanelMenu/TopPanelMenu';\r\nimport ToolPanel from './ToolSettingPanel/ToolSettingPanel';\r\nimport LeftPanel from '../../Dump/LeftPanel/LeftPanel';\r\nimport ToolList from './ToolList/ToolList';\r\nimport RightPanel from '../../Dump/RightPanel/RightPanel';\r\nimport RightPanelContent from './RightPanelContent/RightPanelContent';\r\nimport CenterSpace from '../../Dump/CenterSpace/CenterSpace';\r\n\r\nexport default function DrawWindow() {\r\n    return (\r\n        <>\r\n            <TopPanel>\r\n                <TopPanelMenu></TopPanelMenu>\r\n                <ToolPanel></ToolPanel>\r\n            </TopPanel>\r\n            <LeftPanel>\r\n                <ToolList></ToolList>\r\n            </LeftPanel>\r\n            <RightPanel>\r\n                <RightPanelContent></RightPanelContent>\r\n            </RightPanel>\r\n            <CenterSpace>\r\n                <WorkSpace></WorkSpace>\r\n            </CenterSpace>\r\n        </>\r\n    );\r\n}\r\n","import React, {useEffect, useRef} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport FrameManager from '../../../../Managers/FrameManager/FrameManager';\r\n\r\nfunction FrameCanvasPanel(props) {\r\n    let canvasRef = useRef();\r\n\r\n    useEffect(() => {\r\n        FrameManager.setMultiplicateCanvas(canvasRef.current);\r\n        return ()=>{\r\n            FrameManager.pause();\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (props.frameList.length === 0) return;\r\n        let context = canvasRef.current.getContext('2d');\r\n        renderCanvas();\r\n        function renderCanvas() {\r\n            //–Ω—É–∂–Ω–æ –¥–ª—è requestAnimationFrame. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –æ–Ω –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –Ω—É–∂–Ω—ã–π —Ñ—Ä–µ–π–º –≤ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –æ–Ω –º–µ–Ω—è–µ—Ç—Å—è\r\n            if (!props.frameList[props.currentFrameIndex]) return;\r\n\r\n            context.clearRect(0, 0, props.drawCanvas.width, props.drawCanvas.height);\r\n\r\n            context.drawImage(props.frameList[props.currentFrameIndex].getCanvas(), 0, 0);\r\n            requestAnimationFrame(renderCanvas);\r\n\r\n        }\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <canvas ref={canvasRef} width={props.drawCanvas.width} height={props.drawCanvas.height}></canvas>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        drawCanvas: state.canvas.canvas,\r\n        frameList: state.frames.frameList,\r\n        currentFrameIndex: state.frames.currentFrameIndex\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(FrameCanvasPanel);","import React, {useState} from 'react';\r\nimport Frames from '../../DrawWindow/RightPanelContent/Frames/Frames';\r\nimport FrameManager from '../../../../Managers/FrameManager/FrameManager';\r\n\r\nexport default function FrameRightPanel() {\r\n\r\n    let [delay, setDelay] = useState(100);\r\n\r\n    function setDelayToAllHandler() {\r\n        FrameManager.setDelayToAll(delay);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                <h3>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è –≤—Å–µ—Ö —Å–ª–æ–µ–≤</h3>\r\n                <input type='number'\r\n                       value={delay}\r\n                       onChange={(e) => {\r\n                           setDelay(e.currentTarget.value);\r\n                       }}></input>\r\n                <button onClick={setDelayToAllHandler}>\r\n                    OK\r\n                </button>\r\n\r\n            </div>\r\n            <Frames></Frames>\r\n        </>\r\n    );\r\n}","import React from 'react';\r\nimport './FrameButtons.scss';\r\nimport FrameManager from '../../../../../Managers/FrameManager/FrameManager';\r\nimport {connect} from 'react-redux';\r\nimport {canPlay} from '../../../../../redux/actionCreators/multiplicateActionCreators';\r\n\r\nfunction FrameButtons(props) {\r\n\r\n    function play() {\r\n        props.canPlay();\r\n        FrameManager.playFilm();\r\n    }\r\n\r\n    function pause() {\r\n        FrameManager.pause();\r\n    }\r\n\r\n    return (\r\n        <div className=\"top-panel-buttons\">\r\n            <button className='pause-button' onClick={pause}></button>\r\n            <button className='play-button' onClick={play}></button>\r\n        </div>\r\n    );\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        stopedPlaying: state.frames.stopPlay\r\n    }\r\n}\r\nexport default connect(null, {canPlay: canPlay})(FrameButtons);","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './FramesInputs.scss';\r\nimport FrameManager from '../../../../../Managers/FrameManager/FrameManager';\r\nimport InputsBlock from '../../../../Dump/InputsBlock/InputsBlock';\r\n\r\nfunction FramesInputs(props) {\r\n    function changecurrentFrameIndex(e) {\r\n        FrameManager.set–°urrentFrameIndex(+e.target.value);\r\n    }\r\n    return (\r\n        <div className='top-panel-inputs-block'>\r\n            <InputsBlock title={'–§—Ä—ç–π–º—ã'}\r\n                         onChange={changecurrentFrameIndex}\r\n                         value={props.currentFrameIndex}\r\n                         min='0'  max={props.frameList.length - 1}\r\n                         step='1'\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        currentFrameIndex: state.frames.currentFrameIndex,\r\n        frameList: state.frames.frameList\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(FramesInputs);","import React from 'react';\r\nimport MultiplicateFrameButtons from './FrameButtons/FrameButtons';\r\nimport MultiplicateFramesInputs from './FramesInputs/FramesInputs';\r\nimport './FrameTopPanelContent.scss';\r\n\r\nexport default function FrameTopPanelContent() {\r\n\r\n    return (\r\n        <>\r\n            <div className=\"top-panel-content\">\r\n                <MultiplicateFrameButtons></MultiplicateFrameButtons>\r\n                <MultiplicateFramesInputs></MultiplicateFramesInputs>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport FrameCanvasPanel from './FrameCanvasPanel/FrameCanvasPanel';\r\nimport FrameRightPanel from './FrameRightPanel/FrameRightPanel';\r\nimport FrameTopPanelContent from './FrameTopPanelContent/FrameTopPanelContent';\r\nimport TopPanel from '../../Dump/TopPanel/TopPanel';\r\nimport TopPanelMenu from '../TopPanelMenu/TopPanelMenu';\r\nimport RightPanel from '../../Dump/RightPanel/RightPanel';\r\nimport CenterSpace from '../../Dump/CenterSpace/CenterSpace';\r\nimport LeftPanel from '../../Dump/LeftPanel/LeftPanel';\r\n\r\nexport default function FrameWindow() {\r\n    return (\r\n        <div>\r\n            <TopPanel>\r\n                <TopPanelMenu></TopPanelMenu>\r\n                <FrameTopPanelContent></FrameTopPanelContent>\r\n            </TopPanel>\r\n\r\n            <RightPanel>\r\n                <FrameRightPanel></FrameRightPanel>\r\n            </RightPanel>\r\n\r\n            <CenterSpace>\r\n                <FrameCanvasPanel></FrameCanvasPanel>\r\n            </CenterSpace>\r\n\r\n            <LeftPanel></LeftPanel>\r\n        </div>\r\n    );\r\n}\r\n\r\n","import store from '../../../redux/store';\r\nimport FrameWindow from './FrameWindow';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\n\r\nexport default function RedirectSec(params) {\r\n\r\n    let state = store.getState();\r\n    return <div>\r\n        {state.canvas.canvas === null ? <Redirect to='/draw'></Redirect> : <FrameWindow></FrameWindow>}\r\n    </div>;\r\n\r\n};\r\n\r\n","import React from 'react';\r\nimport './SaveFormatTabs.scss';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nfunction SaveFormatTabs(props) {\r\n\r\n    return (\r\n        <div className='top-panel__save-tabs save-tabs'>\r\n            <NavLink to='/save/gif' className = 'save-tabs__item'>Gif</NavLink>\r\n            <NavLink to='/save/jpg' className = 'save-tabs__item'>Jpg</NavLink>\r\n            <NavLink to='/save/png' className = 'save-tabs__item'>Png</NavLink>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SaveFormatTabs;","export default __webpack_public_path__ + \"static/media/preloader.279ed7ee.gif\";","import React from 'react';\r\nimport './Preloader.scss'\r\nimport preloader from'./img/preloader.gif';\r\n\r\nfunction Preloader(props) {\r\n    return (\r\n        <div className='preloader'>\r\n            <h2>–ò–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞...</h2>\r\n            <img className='preloader__img' src={preloader} alt=\"\"/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Preloader;","import React, {useState} from 'react';\r\nimport InputsBlock from '../../../Dump/InputsBlock/InputsBlock';\r\nimport './SaveGifPanel.scss';\r\nimport GIF from 'gif.js';\r\nimport {connect} from 'react-redux';\r\nimport Preloader from '../../../Dump/Preloader/Preloader';\r\n\r\nfunction SaveGifPanel(props) {\r\n\r\n    const [repeat, setRepeat] = useState(0);\r\n    const [quality, setQuality] = useState(10);\r\n\r\n\r\n    const [width, setWidth] = useState(props.width);\r\n    const [height, setHeight] = useState(props.height);\r\n\r\n\r\n    const [background, setBackground] = useState('#ffffff');\r\n    const [loading, setLoading] = useState(false);\r\n    const [saveProportion, setSaveProportion] = useState(true);\r\n\r\n\r\n    function saveGifHandler() {\r\n        let frameList = props.frameList;\r\n        if(frameList.length===0) {\r\n            alert('–°–ø–∏—Å–æ–∫ —Ñ—Ä–µ–π–º–æ–≤ –ø—É—Å—Ç !');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        let gif = new GIF({\r\n            workers: 2,\r\n            quality,\r\n            repeat,\r\n            // background: background,\r\n            // transparent: background,\r\n        });\r\n\r\n        frameList.forEach((frame, index)=>{\r\n            let canvas = document.createElement('canvas');\r\n            canvas.width=width;\r\n            canvas.height=height;\r\n            let ctx = canvas.getContext('2d');\r\n            ctx.fillStyle = background;\r\n            ctx.fillRect(0,0, width, height);\r\n            ctx.drawImage(frame.getCanvas(), 0, 0, width, height);\r\n\r\n            gif.addFrame(canvas, {delay: frame.getDelay(), copy: true})\r\n        });\r\n        gif.on('finished', function(blob) {\r\n            setLoading(false);\r\n            window.open(URL.createObjectURL(blob));\r\n        });\r\n        gif.render();\r\n    }\r\n\r\n\r\n    function heightChangeHandler(e){\r\n        setHeight(e.currentTarget.value);\r\n        saveProportion && setWidth(e.currentTarget.value * props.width / props.height);\r\n    }\r\n    function widthChangeHandler(e){\r\n        setWidth(e.currentTarget.value);\r\n        saveProportion && setHeight(e.currentTarget.value * props.height / props.width);\r\n    }\r\n\r\n    return (\r\n        <div className='save-gif-panel'>\r\n            <div className='save-gif-panel__row'>\r\n                <div className='save-gif-panel__item'>\r\n                    <h4>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –¥–ª—è gif. –ï—Å–ª–∏ -1, —Ç–æ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π. –ï—Å–ª–∏ 0 - –ø–æ–≤—Ç–æ—Ä—è—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ </h4>\r\n                    <InputsBlock\r\n                        title='–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏—è'\r\n                        max='1000'\r\n                        min = '-1'\r\n                        step='1'\r\n                        value = {repeat}\r\n                        onChange={(e)=> setRepeat(e.currentTarget.value)}\r\n                    />\r\n                </div>\r\n                <div className='save-gif-panel__item'>\r\n                    <h4>–ò–Ω—Ç–µ—Ä–≤–∞–ª –≤—ã–±–æ—Ä–∫–∏ –ø–∏–∫—Å–µ–ª–µ–π. –ß–µ–º –º–µ–Ω—å—à–µ, —Ç–µ–º –ª—É—á—à–µ</h4>\r\n                    <InputsBlock\r\n                        title='–ö–∞—á–µ—Å—Ç–≤–æ'\r\n                        max='100'\r\n                        min = '1'\r\n                        step='1'\r\n                        value = {quality}\r\n                        onChange={(e)=> setQuality(e.currentTarget.value)}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className='save-gif-panel__row'>\r\n                <div className='save-gif-panel__size'>\r\n                    <div className='save-gif-panel__item'>\r\n                    <span>–°–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏</span>\r\n                    <input type='checkbox'\r\n                           checked={saveProportion}\r\n                            onChange={(e)=>{\r\n                                console.log(e.currentTarget.checked);\r\n                                setSaveProportion(e.currentTarget.checked)\r\n                            }}/>\r\n                    </div>\r\n                    <div className='save-gif-panel__item'>\r\n                        <InputsBlock\r\n                            title='–®–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏'\r\n                            max='2000'\r\n                            min = '0'\r\n                            step='1'\r\n                            value = {width}\r\n                            onChange={widthChangeHandler}\r\n                        />\r\n                    </div>\r\n                    <div className='save-gif-panel__item'>\r\n                        <InputsBlock\r\n                            title='–í—ã—Å–æ—Ç–∞'\r\n                            max='2000'\r\n                            min = '0'\r\n                            step='1'\r\n                            value = {height}\r\n                            onChange={heightChangeHandler}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className='save-gif-panel__color'>\r\n                    <h4>–¶–≤–µ—Ç —Ñ–æ–Ω–∞</h4>\r\n                    <input className='save-gif-panel__color-input'\r\n                            type='color'\r\n                           value={background}\r\n                           onChange={(e)=>{setBackground(e.currentTarget.value)}}/>\r\n                </div>\r\n            </div>\r\n            <div className='save-gif-panel__row'>\r\n                <div className='save-gif-panel__save-btn-wrapper'>\r\n                {loading ? <Preloader/> : <button className='save-gif-panel__save-btn' onClick={saveGifHandler}>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å !</button>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n    return {\r\n        frameList: state.frames.frameList,\r\n        width: parseInt(state.canvas.size.width),\r\n        height: parseInt(state.canvas.size.height),\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(SaveGifPanel);","import React from 'react';\r\nimport './SaveWindow.scss';\r\nimport TopPanel from '../../Dump/TopPanel/TopPanel';\r\nimport TopPanelMenu from '../TopPanelMenu/TopPanelMenu';\r\nimport SaveFormatTabs from './SaveFormatTabs/SaveFormatTabs';\r\nimport {Route} from 'react-router';\r\nimport LeftPanel from '../../Dump/LeftPanel/LeftPanel';\r\nimport RightPanel from '../../Dump/RightPanel/RightPanel';\r\nimport SaveGifPanel from './SaveGifPanel/SaveGifPanel';\r\nimport CenterSpace from '../../Dump/CenterSpace/CenterSpace';\r\n\r\nfunction SaveWindow(props) {\r\n    return (\r\n        <div className='save-window'>\r\n            <TopPanel>\r\n                <TopPanelMenu></TopPanelMenu>\r\n                <SaveFormatTabs></SaveFormatTabs>\r\n            </TopPanel>\r\n            <LeftPanel></LeftPanel>\r\n            <RightPanel></RightPanel>\r\n            <CenterSpace>\r\n                <Route path='/save/gif'>\r\n                    <SaveGifPanel></SaveGifPanel>\r\n                </Route>\r\n                <Route path='/save/jpg'>\r\n                    <div>JPG</div>\r\n                </Route>\r\n                <Route path='/save/png'>\r\n                    <div>PNG</div>\r\n                </Route>\r\n                <Route exact path='/save'>\r\n                    <div className='save-window__file-type-title'><h1>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ñ–∞–π–ª–∞</h1></div>\r\n                </Route>\r\n            </CenterSpace>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SaveWindow;","import React from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport './Main.scss';\r\n\r\nimport DrawWindow from './Smart/DrawWindow/DrawWindow';\r\nimport {BrowserRouter, Redirect, Route, Switch} from 'react-router-dom';\r\nimport RedirectSec from './Smart/MultiplicateWindow/RedirectSec';\r\nimport SaveWindow from './Smart/SaveWindow/SaveWindow';\r\n\r\n\r\nfunction Main() {\r\n\r\n    console.log('public_url');\r\n    console.log(`${process.env.PUBLIC_URL}`);\r\n    return (\r\n        <BrowserRouter basemname={`${process.env.PUBLIC_URL}`}>\r\n            <div className='main'>\r\n                <Switch>\r\n                    <Route exact path={`${process.env.PUBLIC_URL}/draw`} render={() => <DrawWindow></DrawWindow>}></Route>\r\n                    <Route path='/frames' render={() => <RedirectSec></RedirectSec>}></Route>\r\n                    <Route path='/save' render={() => <SaveWindow></SaveWindow>}></Route>\r\n                    <Redirect from='/' to={'/draw'}/>\r\n                </Switch>\r\n            </div>\r\n        </BrowserRouter>\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\nexport default connect()(Main);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\nimport Main from './components/Main';\nimport {Provider} from 'react-redux';\nimport store from './redux/store';\n\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <Main></Main>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n\nreportWebVitals();"],"sourceRoot":""}
{"version":3,"sources":["reportWebVitals.js","redux/actionTypes.js","redux/actionCreators/canvasActionCreator.js","components/Smart/DrawWindow/WorkSpace/Canvas/Canvas.jsx","redux/reducers/canvasReducer/canvasReducer.js","redux/reducers/settingReducer/settingReducer.js","redux/reducers/layoutReducer/layoutReducer.js","redux/reducers/frameReducer/frameReducer.js","redux/reducers/toolReducer/brush/brushReducer.js","redux/reducers/toolReducer/image/ImageToolReducer.js","redux/reducers/toolReducer/eraser/eraserReducer.js","redux/reducers/toolReducer/toolReducer.js","redux/reducers/rootReducer.js","redux/store.js","utils/ListenerManager.js","utils/ColorHelper.js","models/Tool/Tool.js","redux/actionCreators/brushActionCreators.js","models/Tool/Brush/Brush.js","redux/actionCreators/layoutActionCreator.js","models/Layout.js","Managers/LayoutManager/LayoutManager.js","models/Tool/Brush/SketchBrush.js","models/Tool/Eraser/Eraser.js","models/Tool/Hand/Hand.js","models/Tool/Drag/Drag.js","redux/actionCreators/imageToolActionCreator.js","models/Tool/ImageTool/ImageTool.js","Managers/ToolManager/ToolManager.js","redux/actionCreators/multiplicateActionCreators.js","models/Frame.js","Managers/FrameManager/FrameManager.js","components/Smart/DrawWindow/WorkSpace/WorkSpace.jsx","components/Dump/TopPanel/TopPanel.jsx","components/Smart/TopPanelMenu/TopPanelMenu.jsx","components/Dump/InputsBlock/InputsBlock.jsx","components/Smart/DrawWindow/ToolSettingPanel/BrushSettingPanel/SavedBrushes/SavedBrushes.jsx","components/Smart/DrawWindow/ToolSettingPanel/BrushSettingPanel/BrushSettingPanel.jsx","components/Smart/DrawWindow/ToolSettingPanel/HandToolSettingPanel/HandToolSettingPanel.jsx","components/Smart/DrawWindow/ToolSettingPanel/ImageSettingPanel/ImageSettingPanel.jsx","components/Smart/DrawWindow/ToolSettingPanel/EraserSettingPanel/EraserSettingPanel.jsx","redux/actionCreators/eraserActionCreator.js","components/Smart/DrawWindow/ToolSettingPanel/ToolSettingPanel.jsx","components/Dump/LeftPanel/LeftPanel.jsx","components/Smart/DrawWindow/ToolList/ToolList.jsx","components/Dump/RightPanel/RightPanel.jsx","components/Smart/DrawWindow/RightPanelContent/Layouts/Layout/Layout.jsx","components/Dump/ContextMenu/ContextMenu.jsx","components/Smart/DrawWindow/RightPanelContent/Layouts/Layouts.jsx","components/Smart/DrawWindow/RightPanelContent/Frames/FrameBlock/FrameItem.jsx","components/Smart/DrawWindow/RightPanelContent/Frames/Frames.jsx","components/Smart/DrawWindow/RightPanelContent/Tabs/Tabs.jsx","components/Smart/DrawWindow/RightPanelContent/RightPanelContent.jsx","components/Dump/CenterSpace/CenterSpace.jsx","components/Smart/DrawWindow/DrawWindow.jsx","components/Smart/SaveWindow/SaveFormatTabs/SaveFormatTabs.jsx","components/Dump/Preloader/img/preloader.gif","components/Dump/Preloader/Preloader.jsx","components/Smart/SaveWindow/SaveGifPanel/SaveGifPanel.jsx","components/Smart/SaveWindow/SaveWindow.jsx","components/Smart/MultiplicateWindow/FrameCanvasPanel/FrameCanvasPanel.jsx","components/Smart/MultiplicateWindow/FrameRightPanel/FrameRightPanel.js","components/Smart/MultiplicateWindow/FrameTopPanelContent/FrameButtons/FrameButtons.jsx","components/Smart/MultiplicateWindow/FrameTopPanelContent/FramesInputs/FramesInputs.jsx","components/Smart/MultiplicateWindow/FrameTopPanelContent/FrameTopPanelContent.js","components/Smart/MultiplicateWindow/FrameWindow.jsx","components/App.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","CHANGE_CANVAS_SIZE","SET_CANVAS","SET_CURRENT_TOOL","SET_CANVAS_BLOCK","SET_CANVAS_POSITION","SET_CANVAS_ZOOM","CHANGE_BRUSH_SETTING","SAVE_BRUSH","CHANGE_CANVAS_DEFAULT_BACKGROUND","CHANGE_SAVED_BRUSHES","CHANGE_ERASER_SETTING","CHANGE_LAYOUT_LIST","CHANGE_CURRENT_LAYOUT","CHANGE_FRAME_LIST","SET_MULTIPLICATE_CANVAS","STOP_PLAY","CAN_PLAY","SET_CURRENT_FRAME","IMAGE_TOOL_SET_FILE","IMAGE_TOOL_DRAG_BLOCK_ENABLE","IMAGE_TOOL_DRAG_BLOCK_DISABLE","IMAGE_TOOL_SET_POSITION","IMAGE_TOOL_ACCEPT_CHANGES","IMAGE_TOOL_FINISH","IMAGE_TOOL_CAN_START","changeCanvasSize","width","height","type","payload","setCanvas","canvas","context","setCurrentTool","currentTool","currentToolName","setCanvasBlock","canvasBlock","setCanvasPosition","position","setCanvasZoom","zoom","connect","state","size","top","left","tmpCanvas","canvasZoom","dispatch","bindActionCreators","props","React","createRef","useEffect","current","getContext","Fragment","ref","className","style","transform","initState","canvasDefaultBackground","layoutList","currentLayout","currentLayoutIndex","changeCurrentCanvas","frameList","frameCanvas","stopPlay","currentFrameIndex","color","alpha","savedBrushes","file","dragBlockEnabled","x","y","changed","finish","eraserReducer","action","toolReducer","combineReducers","brush","concat","Array","from","image","eraser","rootReducer","tool","setting","layouts","frames","store","createStore","ListenerManager","listenersArr","this","_listeners","element","event","func","obj","push","addEventListener","pop","removeEventListener","i","length","splice","JSON","stringify","ColorHelper","hex","slice","parseInt","rgb","replace","split","map","value","index","array","toString","join","str","startsWith","rgbaToHex","hexToRgba","rgbToHex","rgba","filter","Tool","ctx","_canvas","_ctx","getState","zIndex","classList","add","_currentLayout","getCanvas","workSpace","_workspace","document","createElement","_tmpCanvas","_setCanvasStyle","append","_tmpCtx","changeBrushSetting","Brush","_listenerManager","isFinite","toRgba","toHex","Math","floor","setColor","changeLayoutList","changeCurrentLayout","Layout","show","id","_show","_name","_historyArr","_positionInHistory","saveInHistory","selected","clearRect","shift","getImageData","putImageData","LayoutManager","update","mainCanvas","mainCanvasCtx","defLayoutCanvas","defLayoutCtx","createImageData","layout","isHidden","drawImage","newLayoutList","addedCount","forEach","isSelected","toggleHide","clear","setCurrentLayout","indexOf","index1","index2","help","selectedLayouts","indexArray","minIndex","min","minIndexLayout","includes","select","SketchBrush","started","_canvasBlock","ppts","_fakeCanvas","cursor","tmp_ctx","endPaint","removeListener","onPaint","prepend","addListener","e","alert","strokeStyle","lineWidth","lineCap","call","offsetX","offsetY","beginPath","arc","PI","c","d","quadraticCurveTo","stroke","removeAllListener","remove","Eraser","tmpCtx","imageData","tmpID","trueID","data","testFunc","Hand","startYCoord","startXCoord","mouseMove","clientY","clientX","Drag","_rect","_painted","_selectedAreaImageData","_canvasWithoutSelectedArea","_init","startX","startY","_unsubscribe","subscribe","console","log","_moveRectFunction","_selectArea","resized","strokeRect","notNullSize","removeListenersByEvent","selectedAreaID","disableDragBlock","setFile","setPosition","canStart","ImageTool","_tmpCanvasListenerManager","_dragBlock","_initTmpCanvas","_removeTmpCanvasLogic","img","_getDragBlockStyle","_initDragBlock","dragBlock","preventDefault","files","dataTransfer","reader","FileReader","readAsDataURL","onload","Image","src","result","innerHTML","SKETCH_BRUSH","ERASER","HAND","DRAG","IMAGE","ToolManager","toolName","destroy","create","changeFrameList","set–°urrentFrameIndex","Frame","delay","_delay","_id","_type","_open","_isSelect","FrameManager","frame","setDelay","newFrameList","unSelect","isOpen","close","open","currentFrame","getDelay","setTimeout","playFilm","pause","setMultiplicateCanvas","defaultBackgorund","useRef","getComputedStyle","setTool","init","hotKeyListenerManager","listenerManager","keyDown","code","ctrlKey","getCurrentLayout","shiftKey","historyNext","historyBack","getCurrentLayoutIndex","addFrame","mouseWheel","deltaY","toFixed","window","addHotKeys","backgroundColor","TopPanel","children","TopPanelMenu","content","useLocation","pathname","match","to","InputsBlock","title","max","step","onChange","brushSize","brushColor","brushAlpha","colorIndex","brushMenu","onClick","changeSavedBrushes","brushSetting","getTool","setSize","setAlpha","changeBrushHandler","onContextMenu","timeOutId","domRect","target","getBoundingClientRect","clearTimeout","colorRightClickHandler","saveBrush","process","alt","canvasSize","currentTarget","canvasHeigth","canvasWidth","inputXCoordChange","inputYCoordChange","inputWidthChange","inputHeightChange","changeEraserSetting","LeftPanel","RightPanel","timeoutId","layoutBlock","outline","isCurrent","setMenuActive","pageY","pageX","innerWidth","innerHeight","setMenuPosition","stopPropagation","swap","deleteLayout","ContextMenu","useState","menuClass","setMenuClass","active","onMouseLeave","onMouseEnter","menuPosition","layoutMenu","copyLayouts","deleteSelectedLayouts","combineSelected","unSelectAll","LayoutModel","addLayout","ReactDOM","createPortal","getElementById","getId","refFrameBlock","background","changeFrame","openCloseFrame","onClickCapture","deleteFrame","menuActive","contextMenuDelay","setContextMenuDelay","FrameMenu","setDelaySelectedFrames","confirm","deleteSelectedFrame","unSelectAllFrame","Tabs","tabsNumber","setTabsActive","setContent","CenterSpace","DrawWindow","SaveFormatTabs","Preloader","preloader","repeat","setRepeat","quality","setQuality","setWidth","setHeight","setBackground","loading","setLoading","saveProportion","setSaveProportion","checked","gif","GIF","workers","fillStyle","fillRect","copy","on","blob","URL","createObjectURL","render","SaveWindow","path","exact","drawCanvas","canvasRef","renderCanvas","requestAnimationFrame","FrameRightPanel","setDelayToAll","canPlay","FrameTopPanelContent","StrictMode"],"mappings":"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","file":"static/js/main.a52c718f.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import('web-vitals').then(({getCLS, getFID, getFCP, getLCP, getTTFB}) => {\n            getCLS(onPerfEntry);\n            getFID(onPerfEntry);\n            getFCP(onPerfEntry);\n            getLCP(onPerfEntry);\n            getTTFB(onPerfEntry);\n        });\n    }\n};\n\nexport default reportWebVitals;\n","export const CHANGE_CANVAS_SIZE = 'CHANGE_CANVAS_SIZE';\r\nexport const SET_CANVAS = 'SET_CANVAS';\r\nexport const SET_CURRENT_TOOL = 'CHANGE_CURRENT_TOOL';\r\nexport const SET_CANVAS_BLOCK = 'SET_CANVAS_BLOCK';\r\nexport const SET_CANVAS_POSITION = 'SET_CANVAS_POSITION';\r\nexport const SET_CANVAS_ZOOM = 'SET_CANVAS_ZOOM';\r\n//\r\nexport const CHANGE_BRUSH_SETTING = 'CHANGE_BRUSH_SETTING';\r\nexport const SAVE_BRUSH = 'SAVE_BRUSH';\r\nexport const CHANGE_CANVAS_DEFAULT_BACKGROUND = 'CHANGE_CANVAS_DEFAULT_BACKGROUND';\r\nexport const CHANGE_SAVED_BRUSHES = 'CHANGE_SAVED_BRUSHES';\r\n\r\n//\r\n\r\nexport const CHANGE_ERASER_SETTING = 'CHANGE_ERASER_SETTING';\r\n//\r\nexport const CHANGE_LAYOUT_LIST = 'CHANGE_LAYOUT_LIST';\r\nexport const CHANGE_CURRENT_LAYOUT = 'CHANGE_CURRENT_LAYOUT';\r\n\r\n//\r\nexport const CHANGE_FRAME_LIST = 'CHANGE_FRAME_LIST';\r\nexport const SET_MULTIPLICATE_CANVAS = 'SET_MULTIPLICATE_CANVAS';\r\nexport const STOP_PLAY = 'STOP_PLAY';\r\nexport const CAN_PLAY = 'CAN_PLAY';\r\nexport const SET_CURRENT_FRAME = 'SET_CURRENT_FRAME';\r\n\r\n//\r\nexport const IMAGE_TOOL_SET_FILE = 'IMAGE_TOOL_SET_FILE';\r\nexport const IMAGE_TOOL_DRAG_BLOCK_ENABLE = 'IMAGE_TOOL_DRAG_BLOCK_ENABLE';\r\nexport const IMAGE_TOOL_DRAG_BLOCK_DISABLE = 'IMAGE_TOOL_DRAG_BLOCK_DISABLE';\r\nexport const IMAGE_TOOL_SET_POSITION = 'IMAGE_TOOL_SET_POSITION';\r\nexport const IMAGE_TOOL_ACCEPT_CHANGES = 'IMAGE_TOOL_ACCEPT_CHANGES'\r\nexport const IMAGE_TOOL_FINISH = 'IMAGE_TOOL_FINISH';\r\nexport const IMAGE_TOOL_CAN_START = 'IMAGE_TOOL_CAN_START';\r\n\r\n//\r\n","import {\r\n    CHANGE_CANVAS_SIZE,\r\n    SET_CANVAS,\r\n    SET_CANVAS_BLOCK,\r\n    SET_CANVAS_POSITION,\r\n    SET_CANVAS_ZOOM,\r\n    SET_CURRENT_TOOL\r\n} from '../actionTypes';\r\n\r\nexport function changeCanvasSize(width, height) {\r\n    return {\r\n        type: CHANGE_CANVAS_SIZE,\r\n        payload: {\r\n            width: width,\r\n            height: height\r\n        }\r\n    };\r\n};\r\n\r\nexport function setCanvas(canvas, context) {\r\n    return {\r\n        type: SET_CANVAS,\r\n        payload: {canvas, context}\r\n    };\r\n};\r\n\r\nexport function setCurrentTool(currentTool, currentToolName) {\r\n    return {\r\n        type: SET_CURRENT_TOOL,\r\n        payload: {currentTool, currentToolName}\r\n    };\r\n};\r\n\r\nexport function setCanvasBlock(canvasBlock) {\r\n    return {\r\n        type: SET_CANVAS_BLOCK,\r\n        payload: canvasBlock\r\n    };\r\n};\r\n\r\nexport function setCanvasPosition(position) {\r\n    return {\r\n        type: SET_CANVAS_POSITION,\r\n        payload: position\r\n    };\r\n}\r\n\r\nexport function setCanvasZoom(zoom) {\r\n    return {\r\n        type: SET_CANVAS_ZOOM,\r\n        payload: zoom\r\n    };\r\n}","import React, {useEffect} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport {setCanvas} from '../../../../../redux/actionCreators/canvasActionCreator';\r\nimport './Canvas.scss';\r\n\r\n\r\nfunction Canvas(props) {\r\n\r\n    let canvas = React.createRef();\r\n    const setCanvas = props.setCanvas;\r\n    //–ö–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏–ª—Å—è, –¥–æ–±–∞–≤–ª—è–µ–º —Ö–æ–ª—Å—Ç –≤ state\r\n    //–±–∏–Ω–¥–∏–º –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏\r\n    useEffect(() => {\r\n        let context = canvas.current.getContext('2d');\r\n        setCanvas(canvas.current, context);\r\n        return () => {\r\n        };\r\n    }, [canvas, setCanvas]);\r\n\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <canvas ref={canvas}\r\n                    height={props.height} width={props.width}\r\n                    className='canvas'\r\n                    style={{\r\n                        top: props.top,\r\n                        left: props.left,\r\n                        transform: `scale(${props.canvasZoom})`\r\n                    }}\r\n            >\r\n            </canvas>\r\n        </React.Fragment>\r\n    );\r\n\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        width: state.canvas.size.width,\r\n        height: state.canvas.size.height,\r\n        top: state.canvas.position.top,\r\n        left: state.canvas.position.left,\r\n        tmpCanvas: state.canvas.tmpCanvas,\r\n        canvasZoom: state.canvas.zoom\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        setCanvas: bindActionCreators(setCanvas, dispatch)\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);\r\n\r\n\r\n","import {\r\n    CHANGE_CANVAS_SIZE,\r\n    SET_CANVAS,\r\n    SET_CANVAS_BLOCK,\r\n    SET_CANVAS_POSITION,\r\n    SET_CANVAS_ZOOM,\r\n    SET_CURRENT_TOOL\r\n} from '../../actionTypes';\r\n\r\nlet initState = {\r\n    canvas: null,\r\n    canvasBlock: null,\r\n    context: null,\r\n    size: {\r\n        width: '100px',\r\n        height: '100px'\r\n    },\r\n    position: {\r\n        top: '1px',\r\n        left: '1px'\r\n    },\r\n    currentTool: null,\r\n    currentToolName: '',\r\n    zoom: 1\r\n\r\n};\r\n\r\nexport default function canvasReducer(state = initState, action) {\r\n    switch (action.type) {\r\n        case CHANGE_CANVAS_SIZE: {\r\n            return {\r\n                ...state,\r\n                size: {\r\n                    width: action.payload.width,\r\n                    height: action.payload.height\r\n                }\r\n            };\r\n        }\r\n\r\n        case SET_CANVAS: {\r\n            return {\r\n                ...state,\r\n                canvas: action.payload.canvas,\r\n                context: action.payload.context\r\n            };\r\n        }\r\n\r\n        case SET_CURRENT_TOOL: {\r\n            return {\r\n                ...state,\r\n                currentTool: action.payload.currentTool,\r\n                currentToolName: action.payload.currentToolName\r\n\r\n            };\r\n        }\r\n\r\n        case SET_CANVAS_BLOCK: {\r\n            return {\r\n                ...state,\r\n                canvasBlock: action.payload\r\n            };\r\n        }\r\n\r\n        case SET_CANVAS_POSITION: {\r\n            return {\r\n                ...state,\r\n                position: action.payload\r\n            };\r\n        }\r\n\r\n        case SET_CANVAS_ZOOM: {\r\n            return {\r\n                ...state,\r\n                zoom: action.payload\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n","import {CHANGE_CANVAS_DEFAULT_BACKGROUND} from '../../actionTypes';\r\n\r\n\r\nlet initState = {\r\n    canvasDefaultBackground: '#ececec'\r\n};\r\n\r\nexport default function settingReducer(state = initState, action) {\r\n    switch (action.type) {\r\n        case CHANGE_CANVAS_DEFAULT_BACKGROUND: {\r\n            return {\r\n                ...state\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n","import {CHANGE_LAYOUT_LIST} from '../../actionTypes';\r\nimport {CHANGE_CURRENT_LAYOUT} from '../../actionTypes';\r\n\r\n\r\n\r\nlet initState =   {\r\n    layoutList: [],\r\n    currentLayout: null,\r\n    currentLayoutIndex: 0,\r\n    changeCurrentCanvas: true\r\n};\r\n\r\nexport default function layoutReducer(state = initState, action) {\r\n    switch (action.type) {\r\n        case CHANGE_LAYOUT_LIST: {\r\n            return {\r\n                ...state,\r\n                layoutList: Array.from(action.payload)\r\n            };\r\n        }\r\n        case CHANGE_CURRENT_LAYOUT: {\r\n            return {\r\n                ...state,\r\n                currentLayout: action.payload.currentLayout,\r\n                currentLayoutIndex: action.payload.currentLayoutIndex,\r\n                changeCurrentCanvas: !state.changeCurrentCanvas\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n","import {CAN_PLAY, CHANGE_FRAME_LIST, SET_CURRENT_FRAME, SET_MULTIPLICATE_CANVAS, STOP_PLAY} from '../../actionTypes';\r\n\r\n\r\nlet initState = {\r\n    frameList: [],\r\n    frameCanvas: null,\r\n    stopPlay: true,\r\n    currentFrameIndex: 0\r\n};\r\n\r\n\r\nexport default function frameReducer(state = initState, action) {\r\n    switch (action.type) {\r\n        case CHANGE_FRAME_LIST: {\r\n            return {\r\n                ...state,\r\n                frameList: action.payload.frameList.concat()\r\n            };\r\n        }\r\n        case SET_MULTIPLICATE_CANVAS: {\r\n            return {\r\n                ...state,\r\n                frameCanvas: action.payload\r\n            };\r\n        }\r\n        case STOP_PLAY: {\r\n            return {\r\n                ...state,\r\n                stopPlay: true,\r\n            };\r\n        }\r\n        case CAN_PLAY: {\r\n            return {\r\n                ...state,\r\n                stopPlay: false,\r\n            };\r\n        }\r\n        case SET_CURRENT_FRAME: {\r\n            return {\r\n                ...state,\r\n                currentFrameIndex: action.payload\r\n            };\r\n        }\r\n        default : {\r\n            return state;\r\n        }\r\n    }\r\n};","import {CHANGE_BRUSH_SETTING, SAVE_BRUSH} from '../../../actionTypes';\r\nimport {CHANGE_SAVED_BRUSHES} from '../../../actionTypes';\r\n\r\n\r\nlet initState = {\r\n    color: '#ff0f00',\r\n    size: '20',\r\n    alpha: 1,\r\n    savedBrushes: []\r\n};\r\n\r\nexport default function brushReducer(state = initState, action) {\r\n    switch (action.type) {\r\n        case CHANGE_BRUSH_SETTING: {\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n        }\r\n        case SAVE_BRUSH: {\r\n            return {\r\n                ...state,\r\n                savedBrushes: state.savedBrushes.concat(action.payload)\r\n            };\r\n        }\r\n        case CHANGE_SAVED_BRUSHES: {\r\n            return {\r\n                ...state,\r\n                savedBrushes: Array.from(action.payload)\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n","import {\r\n    IMAGE_TOOL_ACCEPT_CHANGES, IMAGE_TOOL_CAN_START,\r\n    IMAGE_TOOL_DRAG_BLOCK_DISABLE,\r\n    IMAGE_TOOL_DRAG_BLOCK_ENABLE, IMAGE_TOOL_FINISH,\r\n    IMAGE_TOOL_SET_FILE,\r\n    IMAGE_TOOL_SET_POSITION\r\n} from '../../../actionTypes';\r\n\r\n\r\nlet initState = {\r\n    file: null,\r\n    dragBlockEnabled: true,\r\n    position: {\r\n        x: 0,\r\n        y:0,\r\n        width: 100,\r\n        height: 100,\r\n        changed: false\r\n    },\r\n    finish: false,\r\n};\r\n\r\nexport default function imageToolReducer(state = initState, action) {\r\n    switch (action.type) {\r\n        case IMAGE_TOOL_SET_FILE: {\r\n            return {\r\n                ...state,\r\n                file: action.payload\r\n            }\r\n        }\r\n        case IMAGE_TOOL_DRAG_BLOCK_DISABLE: {\r\n            return {\r\n                ...state,\r\n                dragBlockEnabled: false\r\n            }\r\n        }\r\n        case IMAGE_TOOL_DRAG_BLOCK_ENABLE: {\r\n            return {\r\n                ...state,\r\n                dragBlockEnabled: true\r\n            }\r\n        }\r\n        case IMAGE_TOOL_SET_POSITION: {\r\n            return  {\r\n                ...state,\r\n                position: {\r\n                    ...action.payload,\r\n                    changed: true,\r\n                }\r\n            }\r\n        }\r\n        case IMAGE_TOOL_ACCEPT_CHANGES: {\r\n            return {\r\n                ...state,\r\n                position: {\r\n                    ...state.position,\r\n                    changed: false\r\n                }\r\n            }\r\n        }\r\n        case IMAGE_TOOL_FINISH: {\r\n            return {\r\n                ...state,\r\n                finish: !state.finish\r\n            }\r\n        }\r\n        case IMAGE_TOOL_CAN_START: {\r\n            return {\r\n                ...state,\r\n                finish: false\r\n            }\r\n        }\r\n        default : {\r\n            return {...state};\r\n        }\r\n    }\r\n}","import {CHANGE_ERASER_SETTING} from '../../../actionTypes';\r\n\r\n\r\nlet initState = {\r\n    size: '20',\r\n    alpha: 1\r\n};\r\n\r\n function eraserReducer(state = initState, action){\r\n    switch (action.type) {\r\n        case CHANGE_ERASER_SETTING: {\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n        }\r\n        default: {\r\n            return {...state}\r\n        }\r\n    }\r\n}\r\nexport default eraserReducer;","import {combineReducers} from 'redux';\r\nimport brushReducer from './brush/brushReducer';\r\nimport imageToolReducer from './image/ImageToolReducer';\r\nimport eraserReducer from './eraser/eraserReducer';\r\n\r\n\r\nconst toolReducer = combineReducers({\r\n        brush: brushReducer,\r\n        image: imageToolReducer,\r\n        eraser: eraserReducer\r\n});\r\n\r\nexport default toolReducer;","import {combineReducers} from 'redux';\r\nimport canvasReducer from './canvasReducer/canvasReducer';\r\nimport settingReducer from './settingReducer/settingReducer';\r\nimport layoutReducer from './layoutReducer/layoutReducer';\r\nimport frameReducer from './frameReducer/frameReducer';\r\nimport toolReducer from './toolReducer/toolReducer';\r\n\r\n\r\n\r\nlet rootReducer = combineReducers({\r\n    canvas: canvasReducer,\r\n    tool: toolReducer,\r\n    setting: settingReducer,\r\n    layouts: layoutReducer,\r\n    frames: frameReducer,\r\n\r\n});\r\nexport default rootReducer;","import {createStore} from 'redux';\r\nimport rootReducer from './reducers/rootReducer';\r\n\r\nlet store = createStore(rootReducer);\r\nexport default store;","//–∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª—É—à–∞—Ç–µ–ª—è–º–∏ —Å–æ–±—ã—Ç–∏–π\r\n// –Ω—É–∂–µ–Ω –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ –±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–ª—É—à–∞—Ç–µ–ª–∏\r\nexport default class ListenerManager {\r\n\r\n    constructor(listenersArr) {\r\n        this._listeners = listenersArr;\r\n    }\r\n\r\n    addListener(element, event, func) {\r\n        let obj = {\r\n            element,\r\n            event,\r\n            func\r\n        };\r\n        this._listeners.push(obj);\r\n        element.addEventListener(event, func);\r\n    }\r\n\r\n    removeLastListener() {\r\n        let obj = this._listeners.pop();\r\n        obj.element.removeEventListener(obj.event, obj.func);\r\n    }\r\n\r\n    removeListenersByEvent(element, event) {\r\n        for (let i = 0; i < this._listeners.length; i++) {\r\n            if (this._listeners[i].event === event && this._listeners[i].element === element) {\r\n                let obj = this._listeners[i];\r\n                obj.element.removeEventListener(obj.event, obj.func);\r\n                this._listeners.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    removeListener(element, event, func) {\r\n        for (let i = 0; i < this._listeners.length; i++) {\r\n            if (this._listeners[i].event === event\r\n                && this._listeners[i].element === element\r\n                && JSON.stringify(this._listeners[i].func) === JSON.stringify(func)) {\r\n                let obj = this._listeners[i];\r\n                obj.element.removeEventListener(obj.event, obj.func);\r\n                this._listeners.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    removeAllListener() {\r\n        while (this._listeners.length !== 0) {\r\n            let obj = this._listeners.pop();\r\n            obj.element.removeEventListener(obj.event, obj.func);\r\n        }\r\n    }\r\n}","export default class ColorHelper {\r\n\r\n    static hexToRgb(hex) {\r\n        if (hex[0] === '#') hex = hex.slice(1);\r\n        let r = parseInt(hex.slice(0, 2), 16);\r\n        let g = parseInt(hex.slice(2, 4), 16);\r\n        let b = parseInt(hex.slice(4), 16);\r\n        return 'rgba(' + r + ',' + g + ',' + b + ')';\r\n    }\r\n\r\n    static hexToRgba(hex, alpha) {\r\n        if (hex[0] === '#') hex = hex.slice(1);\r\n        let r = parseInt(hex.slice(0, 2), 16);\r\n        let g = parseInt(hex.slice(2, 4), 16);\r\n        let b = parseInt(hex.slice(4), 16);\r\n        return 'rgba(' + r + ',' + g + ',' + b + ',' + alpha + ')';\r\n    }\r\n\r\n    static rgbToHex(rgb) {\r\n        rgb = rgb.replace(/[\\s()rgba;]/gi, '').split(',').map((value, index, array) => {\r\n            value = parseInt(value, 10).toString(16);\r\n            if (value.length === 1) value = '0' + value;\r\n            return value;\r\n        }).join('');\r\n        return '#' + rgb;\r\n    }\r\n\r\n    static toRgba(str, alpha) {\r\n        if (str.startsWith('rgba')) {\r\n            let hex = ColorHelper.rgbaToHex(str);\r\n            return ColorHelper.hexToRgba(hex, alpha);\r\n\r\n        }\r\n        if (str.startsWith('rgb')) {\r\n            let hex = ColorHelper.rgbToHex(str);\r\n            return this.hexToRgba(hex, alpha);\r\n        }\r\n        return this.hexToRgba(str, alpha);\r\n    }\r\n\r\n    static rgbaToHex(rgba) {\r\n        rgba = rgba.replace(/[\\s()rgba;]/gi, '');\r\n        let result = rgba.split(',').map((value, index, array) => {\r\n            if (index === array.length - 1) return 'del';\r\n            value = parseInt(value, 10).toString(16);\r\n            if (value.length === 1) value = '0' + value;\r\n            return value;\r\n        }).filter((value) => {\r\n            return value !== 'del';\r\n        }).join('');\r\n        return '#' + result;\r\n    }\r\n\r\n    static toHex(str) {\r\n        if (str.startsWith('#')) return str;\r\n        if (str.startsWith('rgba')) return ColorHelper.rgbaToHex(str);\r\n        return ColorHelper.rgbToHex(str);\r\n    }\r\n}","import store from '../../redux/store';\r\n\r\nexport default class Tool {\r\n\r\n    create() {\r\n    }\r\n\r\n    destroy() {\r\n    }\r\n\r\n    setLayout(canvas, ctx) {\r\n        this._canvas = canvas;\r\n        this._ctx = ctx;\r\n    }\r\n    _setCanvasStyle(tmpCanvas){\r\n        let state = store.getState();\r\n        tmpCanvas.style.zIndex = 75;\r\n        tmpCanvas.height = state.canvas.size.height;\r\n        tmpCanvas.width = state.canvas.size.width;\r\n        tmpCanvas.style.top = state.canvas.position.top;\r\n        tmpCanvas.style.left = state.canvas.position.left;\r\n        tmpCanvas.style.position = 'absolute';\r\n        tmpCanvas.style.transform = `scale(${state.canvas.zoom})`;\r\n        //–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞\r\n        tmpCanvas.classList.add('tmpCanvas');\r\n    }\r\n    _init (){\r\n        let state = store.getState();\r\n        this._currentLayout = state.layouts.currentLayout;\r\n        let canvas = this._currentLayout.getCanvas();\r\n        this._canvas = canvas;\r\n        let ctx = canvas.getContext('2d');\r\n        this._ctx =ctx;\r\n\r\n        let workSpace = state.canvas.canvasBlock;\r\n        this._workspace = workSpace;\r\n\r\n        let tmpCanvas = document.createElement('canvas');\r\n        this._tmpCanvas = tmpCanvas;\r\n        this._setCanvasStyle(tmpCanvas);\r\n        this._workspace.append(tmpCanvas);\r\n        this._tmpCtx = tmpCanvas.getContext('2d');\r\n    }\r\n}","import {CHANGE_BRUSH_SETTING, SAVE_BRUSH} from '../actionTypes';\r\nimport {CHANGE_SAVED_BRUSHES} from './../actionTypes';\r\n\r\nexport function changeBrushSetting(setting) {\r\n    return {\r\n        type: CHANGE_BRUSH_SETTING,\r\n        payload: setting\r\n    };\r\n};\r\n\r\nexport function saveBrush(setting) {\r\n    return {\r\n        type: SAVE_BRUSH,\r\n        payload: setting\r\n    };\r\n}\r\n\r\nexport function changeSavedBrushes(savedBrushList) {\r\n    return {\r\n        type: CHANGE_SAVED_BRUSHES,\r\n        payload: savedBrushList\r\n    };\r\n}\r\n","import ListenerManager from '../../../utils/ListenerManager';\r\nimport ColorHelper from '../../../utils/ColorHelper';\r\nimport Tool from '../Tool';\r\nimport store from '../../../redux/store';\r\nimport {changeBrushSetting} from '../../../redux/actionCreators/brushActionCreators';\r\n\r\n//–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –∫–∏—Å—Ç–∏\r\nexport default class Brush extends Tool {\r\n\r\n    constructor() {\r\n        super();\r\n        this._listenerManager = new ListenerManager([]);\r\n    }\r\n\r\n    setColor(color) {\r\n        let state = store.getState();\r\n        if (isFinite(state.tool.brush.alpha)) color = ColorHelper.toRgba(color, state.tool.brush.alpha);\r\n        store.dispatch(changeBrushSetting({color}));\r\n    }\r\n\r\n    getColor() {\r\n        let state = store.getState();\r\n        return ColorHelper.toHex(state.tool.brush.color);\r\n    }\r\n\r\n    //–ó–∞–¥–∞–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∫–∏—Å—Ç–∏\r\n    setAlpha(alpha) {\r\n        alpha = Math.floor(alpha * 100) / 100;\r\n\r\n        store.dispatch(changeBrushSetting({alpha}));\r\n\r\n        let state = store.getState();\r\n        this.setColor(state.tool.brush.color);\r\n        // store.dispatch(changeBrushOpacity(alpha));\r\n    }\r\n\r\n    getAlpha() {\r\n        let state = store.getState();\r\n        return state.tool.brush.alpha;\r\n    }\r\n\r\n    //—à–∏—Ä–∏–Ω–∞ –ª–∏–Ω–∏–∏\r\n    setSize(width) {\r\n        store.dispatch(changeBrushSetting({size: width}));\r\n    }\r\n\r\n    getSize() {\r\n        return store.getState().brush.size;\r\n    }\r\n}\r\n","import {CHANGE_LAYOUT_LIST} from '../actionTypes';\r\nimport {CHANGE_CURRENT_LAYOUT} from './../actionTypes';\r\n\r\nexport function changeLayoutList(layoutList) {\r\n    return {\r\n        type: CHANGE_LAYOUT_LIST,\r\n        payload: layoutList\r\n    };\r\n}\r\n\r\nexport function changeCurrentLayout(currentLayout, index) {\r\n    return {\r\n        type: CHANGE_CURRENT_LAYOUT,\r\n        payload: {\r\n            currentLayout: currentLayout,\r\n            currentLayoutIndex: index\r\n        }\r\n    };\r\n}\r\n\r\n","import LayoutManager from './../Managers/LayoutManager/LayoutManager';\r\n\r\nexport default class Layout {\r\n    constructor(canvas, ctx, show, id) {\r\n        this._canvas = canvas;\r\n        this._ctx = ctx;\r\n        this._show = show;\r\n        this._name = null;\r\n        this._historyArr = [];\r\n        this._positionInHistory = -1;\r\n        this.saveInHistory();\r\n        this.selected = false;\r\n        this.id = id;\r\n    }\r\n\r\n    getId() {\r\n        return this.id;\r\n    }\r\n\r\n    toggleHide() {\r\n        if (this._show) {\r\n            this._show = false;\r\n        } else {\r\n            this._show = true;\r\n        }\r\n    }\r\n\r\n    isHidden() {\r\n        return !this._show;\r\n    }\r\n\r\n    getCanvas() {\r\n        return this._canvas;\r\n    }\r\n\r\n    getContext() {\r\n        return this._ctx;\r\n    }\r\n\r\n    clear() {\r\n        this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n        this._historyArr = [];\r\n    }\r\n\r\n    saveInHistory() {\r\n        if (this._positionInHistory !== this._historyArr.length - 1) {\r\n            this._historyArr = this._historyArr.slice(0, this._positionInHistory + 1);\r\n        }\r\n        if (this._historyArr.length > 40) {\r\n            this._historyArr.shift();\r\n        }\r\n        this._historyArr.push(this._ctx.getImageData(0, 0, this._canvas.width, this._canvas.height));\r\n        this._positionInHistory = this._historyArr.length - 1;\r\n    }\r\n\r\n    historyBack() {\r\n        if (this._positionInHistory !== 0) {\r\n            this._positionInHistory -= 1;\r\n            this._ctx.putImageData(this._historyArr[this._positionInHistory], 0, 0);\r\n            LayoutManager.update();\r\n        }\r\n    }\r\n\r\n    historyNext() {\r\n        if (this._positionInHistory !== this._historyArr.length - 1) {\r\n            this._positionInHistory += 1;\r\n            this._ctx.putImageData(this._historyArr[this._positionInHistory], 0, 0);\r\n            LayoutManager.update();\r\n        }\r\n    }\r\n\r\n    select() {\r\n        this.selected = !this.selected;\r\n    }\r\n\r\n    isSelected() {\r\n        return this.selected;\r\n    }\r\n}","import {changeCurrentLayout, changeLayoutList} from '../../redux/actionCreators/layoutActionCreator';\r\nimport store from '../../redux/store';\r\nimport Layout from './../../models/Layout';\r\n\r\n//–ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ—è–º–∏\r\nexport default class LayoutManager {\r\n\r\n    static id = 0;\r\n\r\n    static init() {\r\n        let state = store.getState();\r\n\r\n        let mainCanvas = state.canvas.canvas;\r\n        let mainCanvasCtx = state.canvas.context;\r\n\r\n        let layoutList = state.layouts.layoutList;\r\n        let currentLayoutIndex = state.layouts.currentLayoutIndex;\r\n        //–µ—Å–ª–∏ —Å–ø–∏—Å–æ–∫ —Å–ª–æ–µ–≤ –ø—É—Å—Ç, —Å–æ–∑–¥–∞–µ–º –æ–¥–∏–Ω —Å–ª–æ–π\r\n        if (layoutList.length === 0) {\r\n            let defLayoutCanvas = document.createElement('canvas');\r\n            defLayoutCanvas.width = state.canvas.size.width;\r\n            defLayoutCanvas.height = state.canvas.size.height;\r\n\r\n            let defLayoutCtx = defLayoutCanvas.getContext('2d');\r\n\r\n            defLayoutCtx.putImageData(mainCanvasCtx.createImageData(mainCanvas.width, mainCanvas.height), 0, 0);\r\n            let layout = new Layout(defLayoutCanvas, defLayoutCtx, true, ++LayoutManager.id);\r\n\r\n            layoutList.push(layout);\r\n            store.dispatch(changeLayoutList(layoutList));\r\n            store.dispatch(changeCurrentLayout(layout, currentLayoutIndex));\r\n        }\r\n\r\n        this.update();\r\n        store.dispatch(changeLayoutList(state.layouts.layoutList));\r\n    }\r\n    //—Ä–∏—Å—É–µ–º –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Ö–æ–ª—Å—Ç–µ –≤—Å–µ —Å–ª–æ–∏\r\n    static update() {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n        let mainCanvasCtx = state.canvas.context;\r\n\r\n        mainCanvasCtx.clearRect(0, 0, state.canvas.size.width, state.canvas.size.height);\r\n        for (let i = 0; i < layoutList.length; i++) {\r\n            if (!layoutList[i].isHidden()) mainCanvasCtx.drawImage(layoutList[i].getCanvas(), 0, 0);\r\n        }\r\n    }\r\n\r\n\r\n    static changeLayoutList(layoutList) {\r\n        store.dispatch(changeLayoutList(layoutList));\r\n        this.update();\r\n    }\r\n\r\n    //–î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –ø—É—Å—Ç–æ–π —Å–ª–æ–π\r\n    static addLayout() {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n\r\n        let canvas = document.createElement('canvas');\r\n\r\n        canvas.width = state.canvas.size.width;\r\n        canvas.height = state.canvas.size.height;\r\n\r\n        let context = canvas.getContext('2d');\r\n        let layout = new Layout(canvas, context, true, ++LayoutManager.id);\r\n\r\n        layoutList.splice(state.layouts.currentLayoutIndex + 1, 0, layout);\r\n        store.dispatch(changeCurrentLayout(layout, state.layouts.currentLayoutIndex + 1));\r\n        store.dispatch(changeLayoutList(layoutList));\r\n    }\r\n\r\n    static copyLayouts(){\r\n        let state = store.getState();\r\n\r\n        const layoutList = state.layouts.layoutList;\r\n\r\n        let newLayoutList = Array.from(layoutList);\r\n\r\n        let addedCount=0;\r\n         layoutList.forEach((layout, index)=>{\r\n            if(layout.isSelected()){\r\n                let canvas = document.createElement('canvas');\r\n                canvas.width = state.canvas.size.width;\r\n                canvas.height = state.canvas.size.height;\r\n                let context = canvas.getContext('2d');\r\n                context.drawImage(state.layouts.layoutList[index].getCanvas(), 0, 0);\r\n                let layout = new Layout(canvas, context, true, ++LayoutManager.id);\r\n                newLayoutList.splice(index+addedCount, 0, layout);\r\n                addedCount++;\r\n            }\r\n        });\r\n        store.dispatch(changeLayoutList(newLayoutList));\r\n    }\r\n\r\n    //–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∞—Å—Å —Å –≤—ã–±—Ä–∞–Ω—ã–º —Å–ª–æ–µ–º \r\n    static getCurrentLayout() {\r\n        return store.getState().layouts.currentLayout;\r\n    }\r\n\r\n    static setCurrentLayout(index) {\r\n        let state = store.getState();\r\n\r\n        if(state.layouts.layoutList[index]){\r\n            let currentLayout = store.getState().layouts.layoutList[index];\r\n            store.dispatch(changeCurrentLayout(currentLayout, index));\r\n        }\r\n\r\n    }\r\n\r\n    static getCurrentLayoutIndex() {\r\n        let state = store.getState();\r\n        return +state.layouts.currentLayoutIndex;\r\n    }\r\n\r\n\r\n    static toggleHide(index) {\r\n        let state = store.getState();\r\n        index = +index;\r\n        state.layouts.layoutList[index].toggleHide();\r\n        store.dispatch(changeLayoutList(state.layouts.layoutList));\r\n        this.update();\r\n    }\r\n\r\n\r\n    static deleteLayout(index) {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n        let currentLayout = state.layouts.currentLayout;\r\n        let currentLayoutIndex = state.layouts.currentLayoutIndex;\r\n        //–µ—Å–ª–∏ –æ—Å—Ç–∞–ª—Å—è 1 —Å–ª–æ–π, —Ç–æ –ø—Ä–æ—Å—Ç–æ –æ—á–∏—â–∞–µ–º –µ–≥–æ\r\n        if (layoutList.length <= 1) {\r\n            currentLayout.clear();\r\n            this.update();\r\n            return;\r\n        }\r\n\r\n        layoutList.splice(index, 1);\r\n        //–ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–¥–æ —É–¥–∞–ª–∏—Ç—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤—ã—à–µ –Ω—É–∂–Ω–æ–≥–æ\r\n        if (currentLayoutIndex >= index) this.setCurrentLayout(currentLayoutIndex - 1);\r\n         else this.setCurrentLayout(currentLayoutIndex);\r\n\r\n        store.dispatch(changeLayoutList(state.layouts.layoutList));\r\n        this.update();\r\n    }\r\n\r\n\r\n    static deleteSelectedLayouts(){\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n        let currentLayout = state.layouts.currentLayout;\r\n        let currentLayoutIndex = state.layouts.currentLayoutIndex;\r\n\r\n        let newLayoutList = layoutList.filter((layout)=>!layout.isSelected());\r\n\r\n        //–µ—Å–ª–∏ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –Ω–∏ 1 —Å–ª–æ—è\r\n        if (newLayoutList.length === 0) {\r\n            let canvas = document.createElement('canvas');\r\n            canvas.width = state.canvas.size.width;\r\n            canvas.height = state.canvas.size.height;\r\n            let context = canvas.getContext('2d');\r\n            let layout = new Layout(canvas, context, true, ++LayoutManager.id);\r\n            newLayoutList.push(layout);\r\n        }\r\n        store.dispatch(changeLayoutList(newLayoutList));\r\n\r\n        //–µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–∏–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–π —Å–ª–æ–π\r\n        currentLayoutIndex = newLayoutList.indexOf(currentLayout);\r\n        if(currentLayoutIndex===-1) this.setCurrentLayout(0);\r\n        else this.setCurrentLayout(currentLayoutIndex);\r\n\r\n        this.update();\r\n    }\r\n\r\n\r\n    static swap(index1, index2) {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n        let currentLayout= state.layouts.currentLayout;\r\n\r\n        //–µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã\r\n        if (!layoutList[index1] || !layoutList[index2]) return;\r\n\r\n        let help = layoutList[index1];\r\n        layoutList[index1] = layoutList[index2];\r\n        layoutList[index2] = help;\r\n\r\n        let currentLayoutIndex = layoutList.indexOf(currentLayout);\r\n        this.setCurrentLayout(currentLayoutIndex);\r\n\r\n        this.update();\r\n        store.dispatch(changeLayoutList(state.layouts.layoutList));\r\n    }\r\n\r\n\r\n    static combineSelected(){\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n\r\n        let selectedLayouts = layoutList.filter(layout=>layout.isSelected());\r\n        let indexArray =[];\r\n        selectedLayouts.forEach(layout=>{\r\n            indexArray.push(layoutList.indexOf(layout));\r\n        })\r\n\r\n        let minIndex = Math.min(...indexArray);\r\n        let minIndexLayout = layoutList[minIndex];\r\n\r\n\r\n        selectedLayouts.forEach((layout, index)=>{\r\n           index!==0 && minIndexLayout.getContext().drawImage(layout.getCanvas(), 0, 0);\r\n        })\r\n\r\n        indexArray=indexArray.slice(1);\r\n        minIndexLayout.saveInHistory();\r\n\r\n        layoutList = layoutList.filter((layout, index)=>!indexArray.includes(index));\r\n        store.dispatch(changeLayoutList(layoutList));\r\n\r\n        this.setCurrentLayout(minIndex);\r\n\r\n    }\r\n\r\n    static getLayoutList() {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n        return layoutList;\r\n    }\r\n\r\n    static setLayout(layout, index) {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n        layoutList[index] = layout;\r\n        this.update();\r\n    }\r\n\r\n    //–í—ã–¥–µ–ª–∏—Ç—å —Å–ª–æ–π ( ctrl + mouse1)\r\n    static select(index) {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n\r\n        layoutList[index].select();\r\n        store.dispatch(changeLayoutList(layoutList));\r\n        this.update();\r\n    }\r\n\r\n    //—Å–¥–µ–ª–∞—Ç—å –≤—Å–µ –Ω–µ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–º–∏\r\n    static unSelectAll() {\r\n        let state = store.getState();\r\n        let layoutList = state.layouts.layoutList;\r\n        layoutList.forEach((layout) => {\r\n            if (layout.isSelected()) layout.select();\r\n        });\r\n        store.dispatch(changeLayoutList(layoutList));\r\n        this.update();\r\n    }\r\n}\r\n\r\n","import store from '../../../redux/store';\r\nimport Brush from './Brush';\r\nimport LayoutManager from './../../../Managers/LayoutManager/LayoutManager';\r\n\r\n\r\nexport default class SketchBrush extends Brush {\r\n    constructor() {\r\n        super();\r\n        this.started = false;\r\n        let state = store.getState();\r\n        this._canvasBlock = state.canvas.canvasBlock;\r\n    }\r\n\r\n    create() {\r\n        var ppts = [];\r\n\r\n        const tmpCanvas = document.createElement('canvas');\r\n        this._fakeCanvas = tmpCanvas;\r\n\r\n        let state = store.getState();\r\n\r\n        tmpCanvas.style.zIndex = 100;\r\n        tmpCanvas.height = state.canvas.size.height;\r\n        tmpCanvas.width = state.canvas.size.width;\r\n        tmpCanvas.style.top = state.canvas.position.top;\r\n        tmpCanvas.style.left = state.canvas.position.left;\r\n        tmpCanvas.style.position = 'absolute';\r\n        //–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞\r\n        tmpCanvas.classList.add('tmpCanvas');\r\n\r\n        tmpCanvas.style.cursor = 'crosshair';\r\n        const tmp_ctx = tmpCanvas.getContext('2d');\r\n        this._canvasBlock.prepend(tmpCanvas);\r\n        //–ù–∞–∂–∏–º–∞–µ–º –Ω–∞ –∫–ª–∞–≤–∏—à—É –º—ã—à–∏\r\n        this._listenerManager.addListener(this._canvasBlock, 'mousedown', (e) => {\r\n\r\n            let state = store.getState();\r\n            if (state.layouts.currentLayout.isHidden()) {\r\n                alert('–í—ã–±—Ä–∞–Ω–Ω—ã–π –≤–∞–º–∏ —Å–ª–æ–π —Å–∫—Ä—ã—Ç !');\r\n                return;\r\n            }\r\n            this.started = true;\r\n\r\n            this._ctx = state.layouts.currentLayout.getContext();\r\n            this._canvas = state.layouts.currentLayout.getCanvas();\r\n\r\n            this._ctx.strokeStyle = state.tool.brush.color;\r\n            this._ctx.lineWidth = state.tool.brush.size;\r\n            this._ctx.lineCap = 'round';\r\n\r\n            tmp_ctx.strokeStyle = this._ctx.strokeStyle;\r\n            tmp_ctx.lineWidth = this._ctx.lineWidth;\r\n            tmp_ctx.lineCap = this._ctx.lineCap;\r\n\r\n            tmpCanvas.style.transform = `scale(${state.canvas.zoom})`;\r\n            tmpCanvas.style.top = state.canvas.position.top + 'px';\r\n            tmpCanvas.style.left = state.canvas.position.left + 'px';\r\n\r\n            onPaint(e);\r\n            this._listenerManager.addListener(tmpCanvas, 'mousemove', onPaint);\r\n        });\r\n\r\n        //–∫–æ–≥–¥–∞ –æ—Ç–∂–∏–º–∞–µ–º –∫–ª–∞–≤–∏—à—É –º—ã—à–∏\r\n        this._listenerManager.addListener(this._canvasBlock, 'mouseup', () => {\r\n            endPaint.call(this);\r\n        });\r\n\r\n        //–∫–æ–≥–¥–∞ –º—ã—à–∫–∞ —É—Ö–æ–¥–∏—Ç —Å —Ö–æ–ª—Å—Ç–∞\r\n        this._listenerManager.addListener(this._canvasBlock, 'mouseleave', () => {\r\n            endPaint.call(this);\r\n        });\r\n\r\n        function endPaint() {\r\n            if (this.started) {\r\n                this.started = false;\r\n\r\n                this._listenerManager.removeListener(tmpCanvas, 'mousemove', onPaint);\r\n                this._ctx.drawImage(tmpCanvas, 0, 0);\r\n\r\n                let state = store.getState();\r\n                LayoutManager.update();\r\n                state.layouts.currentLayout.saveInHistory();\r\n\r\n                tmp_ctx.clearRect(0, 0, tmpCanvas.width, tmpCanvas.height);\r\n\r\n                ppts = [];\r\n            }\r\n        }\r\n\r\n        var onPaint = (e) => {\r\n            let x = e.offsetX;\r\n            let y = e.offsetY;\r\n            ppts.push({x, y});\r\n\r\n            tmp_ctx.beginPath();\r\n            // tmp_ctx.moveTo(ppts[0].x, ppts[0].y);\r\n            tmp_ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n\r\n            if (ppts.length <= 3) {\r\n                tmp_ctx.arc(ppts[0].x, ppts[0].y, 0, 0, 2 * Math.PI);\r\n            }\r\n            for (var i = 1; i < ppts.length - 2; i++) {\r\n                var c = (ppts[i].x + ppts[i + 1].x) / 2;\r\n                var d = (ppts[i].y + ppts[i + 1].y) / 2;\r\n                tmp_ctx.quadraticCurveTo(ppts[i].x, ppts[i].y, c, d);\r\n            }\r\n            tmp_ctx.stroke();\r\n        };\r\n\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this._listenerManager.removeAllListener();\r\n        this._fakeCanvas.remove();\r\n    }\r\n}","import store from '../../../redux/store';\r\nimport LayoutManager from '../../../Managers/LayoutManager/LayoutManager';\r\nimport Brush from '../Brush/Brush';\r\n\r\nexport default class Eraser extends Brush {\r\n\r\n    create() {\r\n        var ppts = [];\r\n\r\n        const tmpCanvas = document.createElement('canvas');\r\n        this._fakeCanvas = tmpCanvas;\r\n\r\n        let state = store.getState();\r\n\r\n        super._setCanvasStyle(tmpCanvas);\r\n\r\n        tmpCanvas.style.cursor = 'crosshair';\r\n\r\n        const tmpCtx = tmpCanvas.getContext('2d');\r\n        state.canvas.canvasBlock.prepend(tmpCanvas);\r\n\r\n        this._listenerManager.addListener(tmpCanvas, 'mousedown', (e) => {\r\n\r\n            let state = store.getState();\r\n\r\n            this._ctx = state.layouts.currentLayout.getContext();\r\n            this._canvas = state.layouts.currentLayout.getCanvas();\r\n\r\n            this._ctx.lineWidth = state.tool.eraser.size;\r\n            this._ctx.lineCap = 'round';\r\n\r\n            tmpCtx.lineWidth = this._ctx.lineWidth;\r\n            tmpCtx.lineCap = this._ctx.lineCap;\r\n\r\n            this._ctx.strokeStyle = state.setting.canvasDefaultBackground;\r\n            tmpCtx.strokeStyle = state.setting.canvasDefaultBackground;\r\n\r\n            onPaint(e);\r\n\r\n            this._listenerManager.addListener(tmpCanvas, 'mousemove', onPaint);\r\n        });\r\n\r\n        this._listenerManager.addListener(tmpCanvas, 'mouseup', () => {\r\n            this._listenerManager.removeListener(tmpCanvas, 'mousemove', onPaint);\r\n\r\n            let imageData = testFunc(tmpCtx.getImageData(0, 0, tmpCanvas.width, tmpCanvas.height), this._ctx.getImageData(0, 0, tmpCanvas.width, tmpCanvas.height));\r\n\r\n            this._ctx.putImageData(imageData, 0, 0);\r\n\r\n            LayoutManager.update();\r\n            state.layouts.currentLayout.saveInHistory();\r\n\r\n            tmpCtx.clearRect(0, 0, tmpCanvas.width, tmpCanvas.height);\r\n            ppts = [];\r\n        });\r\n\r\n        var onPaint = (e) => {\r\n            let x = e.offsetX;\r\n            let y = e.offsetY;\r\n            ppts.push({x, y});\r\n\r\n            tmpCtx.beginPath();\r\n            tmpCtx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n\r\n            if (ppts.length <= 3) {\r\n                tmpCtx.arc(ppts[0].x, ppts[0].y, 0, 0, 2 * Math.PI);\r\n            }\r\n            for (var i = 1; i < ppts.length - 2; i++) {\r\n                var c = (ppts[i].x + ppts[i + 1].x) / 2;\r\n                var d = (ppts[i].y + ppts[i + 1].y) / 2;\r\n                tmpCtx.quadraticCurveTo(ppts[i].x, ppts[i].y, c, d);\r\n            }\r\n\r\n            tmpCtx.stroke();\r\n        };\r\n    }\r\n\r\n    destroy() {\r\n        this._listenerManager.removeAllListener();\r\n        this._fakeCanvas.remove();\r\n    }\r\n}\r\n\r\n//–ø—Ä–∏–Ω–∏–º–∞–µ—Ç 2 imageData \r\nfunction testFunc(tmpID, trueID) {\r\n    // 4 —Å–∏–º–≤–æ–ª–∞ red green blue opacity\r\n    for (let i = 0; i < tmpID.data.length; i = i + 4) {\r\n        if (tmpID.data[i + 3] === 255) {\r\n            trueID.data[i + 3] = 0;\r\n        }\r\n    }\r\n    return trueID;\r\n}\r\n","import store from '../../../redux/store';\r\nimport Tool from '../Tool';\r\nimport ListenerManager from '../../../utils/ListenerManager';\r\nimport {setCanvasPosition, setCanvasZoom} from '../../../redux/actionCreators/canvasActionCreator';\r\n\r\nexport default class Hand extends Tool {\r\n    constructor() {\r\n        super();\r\n        this._listenerManager = new ListenerManager([]);\r\n    }\r\n\r\n    create() {\r\n        let state = store.getState();\r\n        let canvas = state.canvas.canvas;\r\n        let canvasBlock = state.canvas.canvasBlock;\r\n\r\n        let startYCoord = 0;\r\n        let startXCoord = 0;\r\n\r\n        canvas.style.cursor = 'move';\r\n\r\n        this._listenerManager.addListener(canvas, 'mousedown', (e) => {\r\n\r\n            startYCoord = e.clientY;\r\n            startXCoord = e.clientX;\r\n\r\n            this._listenerManager.addListener(canvasBlock, 'mousemove', mouseMove);\r\n        });\r\n\r\n        this._listenerManager.addListener(canvas, 'mouseup', (e) => {\r\n            this._listenerManager.removeListener(canvasBlock, 'mousemove', mouseMove);\r\n            this._listenerManager.removeListener(canvasBlock, 'mouseleave', mouseMove);\r\n\r\n        });\r\n\r\n        this._listenerManager.addListener(canvas, 'mouseleave', (e) => {\r\n            this._listenerManager.removeListener(canvasBlock, 'mousemove', mouseMove);\r\n            this._listenerManager.removeListener(canvasBlock, 'mouseleave', mouseMove);\r\n        });\r\n\r\n\r\n        this._listenerManager.addListener(canvas, 'contextmenu', () => {\r\n            store.dispatch(setCanvasZoom(1.5));\r\n        });\r\n\r\n        function mouseMove(e) {\r\n            //–Ω–µ–ø–æ–Ω—è—Ç–Ω–æ –ø–æ—á–µ–º—É, –Ω–æ —Ä–µ–∞–∫—Ç –Ω–µ –¥–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å offsetX\r\n\r\n\r\n            let state = store.getState();\r\n\r\n            let offsetY = -(startYCoord - e.clientY);\r\n            let offsetX = -(startXCoord - e.clientX);\r\n\r\n            store.dispatch(setCanvasPosition({\r\n                top: parseInt(state.canvas.position.top) + offsetY + 'px',\r\n                left: parseInt(state.canvas.position.left) + offsetX + 'px'\r\n            }));\r\n            startYCoord = startYCoord + offsetY;\r\n            startXCoord = startXCoord + offsetX;\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        let state = store.getState();\r\n        let canvas = state.canvas.canvas;\r\n        this._listenerManager.removeAllListener();\r\n        canvas.style.cursor = 'default';\r\n\r\n    }\r\n\r\n}","import Tool from '../Tool';\r\nimport ListenerManager from '../../../utils/ListenerManager';\r\nimport store from '../../../redux/store';\r\nimport LayoutManager from '../../../Managers/LayoutManager/LayoutManager';\r\n\r\nexport default class Drag extends Tool{\r\n    constructor() {\r\n        super();\r\n        this._listenerManager = new ListenerManager([]);\r\n        //–≤—ã–¥–µ–ª–µ–Ω–Ω–∞—è –æ–±–ª–∞—Å—Ç—å\r\n        this._rect = [];\r\n        //–∑–∞–∫–æ–Ω—á–∏–ª–∏ –ª–∏ –º—ã –∑–∞–¥–∞–≤–∞—Ç—å –≤—ã–¥–µ–ª–µ–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å\r\n        this._painted = false;\r\n        //–≤—ã–±—Ä–∞–Ω—ã–π —Å–ª–æ–π\r\n        this._currentLayout=null;\r\n        //—Ö–æ–ª—Å—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–ª–æ—è\r\n        this._canvas=null;\r\n        this._ctx=null;\r\n        //–≤—ã—Ä–µ–∑–∞–Ω–Ω—ã–π –∏–∑ —Ö–æ–ª—Å—Ç–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫\r\n        this._selectedAreaImageData = null;\r\n        //—Ö–æ–ª—Å—Ç –±–µ–∑ –≤—ã—Ä–µ–∑–∞–Ω–Ω–æ–≥–æ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞\r\n        this._canvasWithoutSelectedArea= null;\r\n    }\r\n\r\n    create() {\r\n        this._init();\r\n\r\n        let tmpCanvas=this._tmpCanvas;\r\n        let tmpCtx=this._tmpCtx;\r\n\r\n        let startX=0;\r\n        let startY=0;\r\n        //—Å–ª–µ–¥–∏–º –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ª–æ—è\r\n        this._unsubscribe = store.subscribe(()=>{\r\n            let state = store.getState();\r\n            //–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è –∞–∫—Ç–∏–≤–Ω—ã–π —Å–ª–æ–π -  –≤—Å–µ –æ–±–Ω—É–ª—è–µ–º\r\n            console.log('change layout');\r\n            if(this._currentLayout!==state.layouts.currentLayout){\r\n                this._rect = [];\r\n                this._currentLayout=state.layouts.currentLayout;\r\n                this._canvas = this._currentLayout.getCanvas();\r\n                this._ctx = this._currentLayout.getContext();\r\n                this._selectedAreaImageData = null;\r\n                this._canvasWithoutSelectedArea= null;\r\n                this._painted=false;\r\n                tmpCtx.clearRect(0, 0, tmpCanvas.width, tmpCanvas.height);\r\n            }\r\n        });\r\n\r\n\r\n        this._listenerManager.addListener(tmpCanvas, 'mousedown', (e)=> {\r\n            startX = e.offsetX;\r\n            startY= e.offsetY;\r\n            if(!this._painted) this._selectArea(tmpCanvas, tmpCtx, startX, startY);\r\n            else this._moveRectFunction(tmpCanvas, tmpCtx, startX, startY);\r\n        });\r\n    }\r\n    //–≤—ã–±–∏—Ä–∞–µ–º –æ–±–ª–∞—Å—Ç—å –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è\r\n    _selectArea(tmpCanvas, tmpCtx, startX, startY){\r\n        //–ø—Ä–æ—Å—Ç–æ –∫–ª–∏–∫ ?\r\n        //–±—ã–ª–æ –ª–∏ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–∏\r\n        let resized = false;\r\n\r\n        this._listenerManager.addListener(tmpCanvas, 'mousemove', (e)=>{\r\n            tmpCtx.clearRect(0, 0, tmpCanvas.width, tmpCanvas.height);\r\n            tmpCtx.strokeRect(startX, startY, e.offsetX-startX, e.offsetY-startY);\r\n            resized = true;\r\n        });\r\n\r\n        this._listenerManager.addListener(tmpCanvas, 'mouseup', (e)=>{\r\n            this._rect=[startX, startY, e.offsetX, e.offsetY];\r\n            //–≤—ã—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é\r\n            if(startX > e.offsetX) {\r\n                this._rect[0] = e.offsetX;\r\n                this._rect[2] = startX;\r\n            }\r\n            if(startY>e.offsetY) {\r\n                this._rect[1]=e.offsetY;\r\n                this._rect[3] = startY;\r\n            }\r\n\r\n            //–Ω–µ —Ä–∞–≤–Ω–∞ –ª–∏ –¥–ª–∏–Ω–Ω–∞/—à–∏—Ä–∏–Ω–∞ 0\r\n            let notNullSize = (this._rect[2]-this._rect[0]!==0)&&(this._rect[3]-this._rect[1]!==0);\r\n\r\n            //–µ—Å–ª–∏ –º–µ–Ω—è–ª–∏ —Ä–∞–∑–º–µ—Ä –∏ –ø–ª–æ—â–∞–¥—å –Ω–µ —Ä–∞–≤–Ω–∞ 0, —Ç–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ\r\n            this._painted= resized && notNullSize ? true : false;\r\n\r\n            //–∫–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∏ —Ä–∏—Å–æ–≤–∞—Ç—å –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫\r\n            if(this._painted) {\r\n                //—Å–æ–∑–¥–∞–µ–º canvas, —Å –≤—ã—Ä–µ–∑–∞–Ω–Ω–æ–π –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç—å—é\r\n                let canvas = document.createElement('canvas');\r\n                canvas.width = this._canvas.width;\r\n                canvas.height = this._canvas.height;\r\n                let ctx = canvas.getContext('2d');\r\n                ctx.drawImage(this._canvas, 0, 0);\r\n                ctx.clearRect(this._rect[0], this._rect[1], this._rect[2] - this._rect[0], this._rect[3] - this._rect[1]);\r\n\r\n                this._canvasWithoutSelectedArea = canvas;\r\n                //—Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—ã–π –∫—É—Å–æ–∫\r\n                this._selectedAreaImageData = this._ctx.getImageData(this._rect[0], this._rect[1], this._rect[2] - this._rect[0], this._rect[3] - this._rect[1]);\r\n\r\n            }\r\n            this._listenerManager.removeListenersByEvent(tmpCanvas, 'mousemove');\r\n            this._listenerManager.removeListenersByEvent(tmpCanvas, 'mouseup');\r\n\r\n        })\r\n    }\r\n\r\n    _moveRectFunction(tmpCanvas, tmpCtx, x, y){\r\n        //–µ—Å–ª–∏ –º—ã –∫–ª–∏–∫–Ω—É–ª–∏ –≤–Ω—É—Ç—Ä—å –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫–≤–∞–¥—Ä–∞—Ç–∞\r\n        if(this._rect.length!==0 &&\r\n            (x>this._rect[0] && x<this._rect[2])\r\n            && (y>this._rect[1] && y<this._rect[3])){\r\n            //–ø–æ–ª—É—á–∞–µ–º imageData –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–≥–æ –∫—É—Å–∫–∞\r\n            let selectedAreaID=this._selectedAreaImageData;\r\n                // this._ctx.getImageData(this._rect[0], this._rect[1], this._rect[2]-this._rect[0], this._rect[3]-this._rect[1]);\r\n\r\n            //–≤—ã—á–∏—Å–ª—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–æ–≥–æ –º–µ—Å—Ç–∞ –∫—É–¥–∞ –∫–ª–∏–∫–Ω—É–ª–∏\r\n            let offsetX = x-this._rect[0];\r\n            let offsetY = y-this._rect[1];\r\n\r\n\r\n            //–ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –º—ã—à–∏ –¥–≤–∏–≥–∞–µ–º –Ω–∞ –ª–æ–∂–Ω–æ–º —Ö–æ–ª—Å—Ç–µ –≤—ã—Ä–µ–∑–∞–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å\r\n            this._listenerManager.addListener(tmpCanvas, 'mousemove', (e)=>{\r\n                tmpCtx.clearRect(0,0, tmpCanvas.width, tmpCanvas.height);\r\n                tmpCtx.strokeRect(e.offsetX-offsetX, e.offsetY-offsetY, selectedAreaID.width, selectedAreaID.height);\r\n                tmpCtx.putImageData(selectedAreaID, e.offsetX -offsetX, e.offsetY-offsetY);\r\n            });\r\n            //–∫–æ–≥–¥–∞ –æ—Ç–ø—É—Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–∫—É –º—ã—à–∏ - –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–π —Ö–æ–ª—Å—Ç\r\n            this._listenerManager.addListener(tmpCanvas, 'mouseup', (e)=>{\r\n                //—É–±–∏—Ä–∞–µ–º —Ä–∞–º–∫—É\r\n                tmpCtx.clearRect(0,0, tmpCanvas.width, tmpCanvas.height);\r\n                tmpCtx.putImageData(selectedAreaID, e.offsetX -offsetX, e.offsetY-offsetY);\r\n\r\n                //—Ä–∏—Å—É–µ–º —Ö–æ–ª—Å—Ç –±–µ–∑ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏\r\n                this._ctx.clearRect( 0, 0, this._canvas.width, this._canvas.height);\r\n                this._ctx.drawImage(this._canvasWithoutSelectedArea, 0, 0);\r\n\r\n                //–ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Å –ª–æ–∂–Ω–æ–≥–æ —Ö–æ–ª—Å—Ç–∞ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–π\r\n                this._ctx.drawImage(this._tmpCanvas,0,0);\r\n\r\n                //–¥–æ–±–∞–≤–ª—è–µ–º —Ä–∞–º–∫—É\r\n                tmpCtx.strokeRect(e.offsetX-offsetX, e.offsetY-offsetY, selectedAreaID.width, selectedAreaID.height);\r\n\r\n                //–æ–±–Ω–æ–≤–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –æ—Ç–ª–æ–≤–∞ –∫–ª–∏–∫–∞\r\n                this._rect=[e.offsetX -offsetX, e.offsetY-offsetY, e.offsetX -offsetX+selectedAreaID.width,  e.offsetY-offsetY + selectedAreaID.height];\r\n\r\n                this._listenerManager.removeListenersByEvent(tmpCanvas,'mousemove');\r\n                this._listenerManager.removeListenersByEvent(tmpCanvas,'mouseup');\r\n\r\n                //—Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é\r\n                this._currentLayout.saveInHistory();\r\n                LayoutManager.update();\r\n            });\r\n        }\r\n        //–æ—Ç–ø—É—Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–∫—É –º—ã—à–∏ –Ω–µ –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π —á–∞—Å—Ç–∏\r\n        else {\r\n            //–æ—á–∏—â–∞–µ–º –ª–æ–∂–Ω—ã–π —Ö–æ–ª—Å—Ç –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Ä–µ–∂–∏–º –≤—ã–¥–µ–ª–µ–Ω–∏—è –æ–±–ª–∞—Å—Ç–∏\r\n            this._painted=false;\r\n            tmpCtx.clearRect(0, 0, tmpCanvas.width, tmpCanvas.height);\r\n        }\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this._listenerManager.removeAllListener();\r\n        this._tmpCanvas.remove();\r\n        this._unsubscribe();\r\n    }\r\n\r\n}","import {\r\n    IMAGE_TOOL_ACCEPT_CHANGES, IMAGE_TOOL_CAN_START,\r\n    IMAGE_TOOL_DRAG_BLOCK_DISABLE,\r\n    IMAGE_TOOL_DRAG_BLOCK_ENABLE, IMAGE_TOOL_FINISH,\r\n    IMAGE_TOOL_SET_FILE,\r\n    IMAGE_TOOL_SET_POSITION\r\n} from '../actionTypes';\r\n\r\n\r\nexport function enableDragBlock() {\r\n    return {\r\n        type: IMAGE_TOOL_DRAG_BLOCK_ENABLE\r\n    }\r\n}\r\nexport function disableDragBlock() {\r\n    return {\r\n        type: IMAGE_TOOL_DRAG_BLOCK_DISABLE\r\n    }\r\n}\r\n\r\nexport function setFile(file) {\r\n    return {\r\n        type: IMAGE_TOOL_SET_FILE,\r\n        payload: file\r\n    }\r\n}\r\nexport function setPosition(position) {\r\n    return {\r\n        type: IMAGE_TOOL_SET_POSITION,\r\n        payload: position\r\n    }\r\n}\r\n\r\nexport  function acceptChanges() {\r\n    return {\r\n        type: IMAGE_TOOL_ACCEPT_CHANGES\r\n    }\r\n}\r\nexport function finish() {\r\n    return {\r\n        type: IMAGE_TOOL_FINISH,\r\n    }\r\n}\r\n\r\nexport function canStart() {\r\n    return {\r\n        type: IMAGE_TOOL_CAN_START\r\n    }\r\n}","import Tool from '../Tool';\r\nimport ListenerManager from '../../../utils/ListenerManager';\r\nimport store from '../../../redux/store';\r\nimport LayoutManager from '../../../Managers/LayoutManager/LayoutManager';\r\nimport {\r\n    acceptChanges, canStart,\r\n    disableDragBlock,\r\n    enableDragBlock, finish,\r\n    setFile, setPosition\r\n} from '../../../redux/actionCreators/imageToolActionCreator';\r\n\r\n\r\nexport default class ImageTool extends Tool{\r\n    constructor() {\r\n        super();\r\n        this._listenerManager = new ListenerManager([]);\r\n        this._tmpCanvasListenerManager = new ListenerManager([]);\r\n\r\n        this._rect = [];\r\n        this._painted = false;\r\n        this._dragBlock = null;\r\n        this._unsubscribe = null;\r\n        this._workspace = null;\r\n        this._tmpCanvas = null;\r\n        this._tmpCtx = null;\r\n    }\r\n    create() {\r\n        super._init();\r\n        //–ø–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è state\r\n\r\n        let canvasZoom = store.getState().canvas.zoom;\r\n        this._unsubscribe =store.subscribe(()=>{\r\n            let state = store.getState();\r\n            //–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª, –∏ –±–ª–æ–∫ –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–µ–Ω\r\n            if(!!state.tool.image.file && state.tool.image.dragBlockEnabled) {\r\n                this._dragBlock.remove();\r\n                store.dispatch(disableDragBlock());\r\n                this._initTmpCanvas();\r\n            }\r\n            //–µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –±–ª–æ–∫ –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω\r\n            if(!state.tool.image.file && !state.tool.image.dragBlockEnabled) {\r\n                this._workspace.append(this._dragBlock);\r\n                this._tmpCanvasListenerManager.removeAllListener();\r\n                this._removeTmpCanvasLogic();\r\n                store.dispatch(enableDragBlock());\r\n            }\r\n\r\n            //–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏ –ø–æ–∑–∏—Ü–∏—é –∫–∞—Ä—Ç–∏–Ω–∫–∏\r\n            if(state.tool.image.position.changed) {\r\n                let img = state.tool.image.file;\r\n                let position = state.tool.image.position;\r\n                //–ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º\r\n                this._tmpCtx.clearRect(0,0, this._tmpCanvas.width, this._tmpCanvas.height);\r\n                this._tmpCtx.drawImage(img, position.x, position.y, position.width, position.height);\r\n\r\n                //–∑–∞–¥–∞–µ–º –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –∫–∞—Ä—Ç–∏–Ω–∫–µ\r\n                this._rect= [position.x, position.y,position.x+ +position.width, position.y + +position.height];\r\n                store.dispatch(acceptChanges());\r\n            }\r\n            // –µ—Å–ª–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º\r\n            if(state.tool.image.finish){\r\n                let ctx = state.layouts.currentLayout.getContext();\r\n                //–ø–µ—Ä–µ–Ω–æ—Å–∏–º —Å –ª–æ–∂–Ω–æ–≥–æ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–π —Ö–æ–ª—Å—Ç\r\n                ctx.drawImage(this._tmpCanvas,0,0);\r\n\r\n                this._tmpCtx.clearRect(0,0, this._tmpCanvas.width, this._tmpCanvas.height);\r\n\r\n                this._currentLayout.saveInHistory();\r\n\r\n                //finish === false\r\n                store.dispatch(canStart());\r\n                store.dispatch(setFile(null));\r\n                LayoutManager.update();\r\n            }\r\n\r\n            if(state.canvas.zoom!==canvasZoom) {\r\n                canvasZoom=state.canvas.zoom;\r\n                this._removeTmpCanvasLogic('wtf');\r\n                this._getDragBlockStyle(this._dragBlock);\r\n                super._setCanvasStyle(this._tmpCanvas);\r\n\r\n                let img = state.tool.image.file;\r\n                if(!!img) {\r\n                    let position = state.tool.image.position;\r\n                    //–ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º\r\n                    this._tmpCtx.clearRect(0,0, this._tmpCanvas.width, this._tmpCanvas.height);\r\n                    this._tmpCtx.drawImage(img, position.x, position.y, position.width, position.height);\r\n                    this._initTmpCanvas();\r\n                }\r\n\r\n            }\r\n        })\r\n        //–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –≤—Å—Ç–∞–≤–ª—è–µ–º –±–ª–æ–∫ –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –∫–∞—Ä—Ç–∏–Ω–∫–∏\r\n        this._initDragBlock();\r\n    }\r\n\r\n    //–¥–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–∫ –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –∫–∞—Ä—Ç–∏–Ω–∫–∏\r\n    _initDragBlock(){\r\n        let dragBlock = document.createElement('div');\r\n        this._dragBlock=dragBlock;\r\n        this._getDragBlockStyle(dragBlock);\r\n        this._workspace.append(dragBlock);\r\n\r\n        dragBlock.addEventListener('drop', (e)=>{\r\n            e.preventDefault();\r\n            let files = e.dataTransfer.files;\r\n\r\n            //–µ—Å–ª–∏ –∑–∞–≥—Ä–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª - –∫–∞—Ä—Ç–∏–Ω–∫–∞\r\n            if(!files[0].type.startsWith('image')){\r\n                alert('FAIL!');\r\n                return;\r\n            }\r\n\r\n            let reader = new FileReader();\r\n            reader.readAsDataURL(files[0]);\r\n            reader.onload = ()=> {\r\n\r\n                let offsetX =  e.offsetX;\r\n                let offsetY =  e.offsetY;\r\n\r\n                let img = new Image();\r\n                img.src = reader.result;\r\n                img.onload = ()=>{\r\n\r\n                    store.dispatch(setFile(img));\r\n                    store.dispatch(setPosition({x: offsetX, y: offsetY,\r\n                        width: img.width,\r\n                        height: img.height\r\n                    }));\r\n                    this._rect= [e.offsetX, e.offsetY, e.offsetX+img.width, e.offsetX + img.height];\r\n\r\n                    LayoutManager.update();\r\n                }\r\n            };\r\n\r\n        })\r\n        dragBlock.addEventListener('dragover', (e)=>{\r\n            e.preventDefault();\r\n        })\r\n    }\r\n\r\n    //—Å—Ç–∏–ª–∏ –¥–ª—è –±–ª–æ–∫–∞ —Å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º\r\n    _getDragBlockStyle(dragBlock){\r\n        let state = store.getState();\r\n        dragBlock.style.zIndex = 100;\r\n        dragBlock.style.height = state.canvas.size.height+'px';\r\n        dragBlock.style.width = state.canvas.size.width+'px';\r\n\r\n        dragBlock.style.top = state.canvas.position.top;\r\n        dragBlock.style.left = state.canvas.position.left;\r\n        dragBlock.style.position = 'absolute';\r\n        dragBlock.style.transform = `scale(${state.canvas.zoom})`;\r\n        dragBlock.classList.add('drag-block');\r\n\r\n        dragBlock.innerHTML = '–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—é–¥–∞';\r\n    }\r\n\r\n    _initTmpCanvas(){\r\n\r\n        this._tmpCanvasListenerManager.addListener(this._tmpCanvas, 'mousedown', (e)=>{\r\n            let x = e.offsetX;\r\n            let y = e.offsetY;\r\n            let tmpCanvas = this._tmpCanvas;\r\n            let tmpCtx = this._tmpCtx;\r\n            let position = store.getState().tool.image.position;\r\n            console.log(x);\r\n            console.log(y);\r\n            console.log('LOL MOUSE DOWN !');\r\n            if(this._rect.length!==null &&\r\n                (x>this._rect[0] && x<this._rect[2])\r\n                && (y>this._rect[1] && y<this._rect[3])){\r\n\r\n                //–ø–æ–ª—É—á–∞–µ–º imageData –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–≥–æ –∫—É—Å–∫–∞\r\n                //–≤—ã—á–∏—Å–ª—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–æ–≥–æ –º–µ—Å—Ç–∞ –∫—É–¥–∞ –∫–ª–∏–∫–Ω—É–ª–∏\r\n                let offsetX = x-this._rect[0];\r\n                let offsetY = y-this._rect[1];\r\n\r\n                //–ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –¥–≤–∏–≥–∞–µ–º –Ω–∞ –ª–æ–∂–Ω–æ–º —Ö–æ–ª—Å—Ç–µ –≤—ã—Ä–µ–∑–∞–Ω–Ω—ã–π –∫—É—Å–æ–∫\r\n\r\n                this._tmpCanvasListenerManager.addListener(tmpCanvas, 'mousemove', (e)=>{\r\n                    store.dispatch(setPosition({x: e.offsetX-offsetX, y:e.offsetY-offsetY,\r\n                        width: position.width,\r\n                        height: position.height\r\n                    }));\r\n                });\r\n\r\n                this._tmpCanvasListenerManager.addListener(tmpCanvas, 'mouseup', (e)=>{\r\n                    this._tmpCanvasListenerManager.removeListenersByEvent(tmpCanvas, 'mousemove');\r\n                    this._tmpCanvasListenerManager.removeListenersByEvent(tmpCanvas, 'mouseup')\r\n                    LayoutManager.update();\r\n                });\r\n            }\r\n            //–æ—Ç–ø—É—Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–∫—É –º—ã—à–∏ –Ω–µ –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π —á–∞—Å—Ç–∏\r\n            else {\r\n                //–æ—á–∏—â–∞–µ–º –ª–æ–∂–Ω—ã–π —Ö–æ–ª—Å—Ç –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Ä–µ–∂–∏–º –≤—ã–¥–µ–ª–µ–Ω–∏—è –æ–±–ª–∞—Å—Ç–∏\r\n                store.dispatch(finish());\r\n                tmpCtx.clearRect(0, 0, tmpCanvas.width, tmpCanvas.height);\r\n            }\r\n        })\r\n    }\r\n    _removeTmpCanvasLogic(){\r\n        this._tmpCanvasListenerManager.removeAllListener();\r\n    }\r\n\r\n    destroy() {\r\n        this._dragBlock.remove();\r\n        this._unsubscribe();\r\n        this._tmpCanvas.remove();\r\n        this._tmpCanvasListenerManager.removeAllListener();\r\n        store.dispatch(disableDragBlock());\r\n        store.dispatch(canStart());\r\n        store.dispatch(setFile(null));\r\n    }\r\n\r\n}","import SketchBrush from '../../models/Tool/Brush/SketchBrush';\r\nimport Eraser from '../../models/Tool/Eraser/Eraser';\r\nimport Hand from '../../models/Tool/Hand/Hand';\r\nimport {changeSavedBrushes, saveBrush} from '../../redux/actionCreators/brushActionCreators';\r\nimport {setCurrentTool} from '../../redux/actionCreators/canvasActionCreator';\r\nimport store from '../../redux/store';\r\nimport Drag from '../../models/Tool/Drag/Drag';\r\nimport ImageTool from '../../models/Tool/ImageTool/ImageTool';\r\n\r\n\r\nconst SKETCH_BRUSH = 'SKETCH_BRUSH';\r\nconst ERASER = 'ERASER';\r\nconst HAND = 'HAND';\r\nconst DRAG='DRAG';\r\nconst IMAGE = 'IMAGE';\r\n\r\n//–∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏\r\nexport default class ToolManager {\r\n\r\n    static get SKETCH_BRUSH(){\r\n        return SKETCH_BRUSH;\r\n    }\r\n    static get ERASER(){\r\n        return ERASER;\r\n    }\r\n    static get HAND(){\r\n        return HAND;\r\n    }\r\n    static get DRAG(){\r\n        return DRAG;\r\n    }\r\n    static get IMAGE(){\r\n        return IMAGE;\r\n    }\r\n\r\n    static setTool(toolName) {\r\n        let state = store.getState();\r\n        let currentTool = state.canvas.currentTool;\r\n        if (currentTool) currentTool.destroy();\r\n\r\n        switch (toolName) {\r\n            case SKETCH_BRUSH: {\r\n                let brush = new SketchBrush();\r\n                brush.create();\r\n                store.dispatch(setCurrentTool(brush, SKETCH_BRUSH));\r\n                break;\r\n            }\r\n            case ERASER: {\r\n                let brush = new Eraser();\r\n                brush.create();\r\n                store.dispatch(setCurrentTool(brush, ERASER));\r\n                break;\r\n            }\r\n            case HAND: {\r\n                let brush = new Hand();\r\n                brush.create();\r\n                store.dispatch(setCurrentTool(brush, HAND));\r\n                break;\r\n            }\r\n            case DRAG: {\r\n                let brush = new Drag();\r\n                brush.create();\r\n                store.dispatch(setCurrentTool(brush, DRAG));\r\n                break;\r\n            }\r\n            case IMAGE: {\r\n                let brush = new ImageTool();\r\n                brush.create();\r\n                store.dispatch(setCurrentTool(brush, IMAGE));\r\n                break;\r\n            }\r\n            default: {\r\n                let brush = new SketchBrush();\r\n                brush.create();\r\n                store.dispatch(setCurrentTool(brush, SKETCH_BRUSH));\r\n                break;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    static saveBrush(brush) {\r\n        store.dispatch(saveBrush(brush));\r\n    }\r\n\r\n    static changeSavedBrushes(savedBrushes) {\r\n        store.dispatch(changeSavedBrushes(savedBrushes));\r\n    }\r\n\r\n    static getTool() {\r\n        return store.getState().canvas.currentTool;\r\n    }\r\n}\r\n\r\n","import {CAN_PLAY, CHANGE_FRAME_LIST, SET_MULTIPLICATE_CANVAS, STOP_PLAY} from '../actionTypes';\r\nimport {SET_CURRENT_FRAME} from './../actionTypes';\r\n\r\n\r\nexport function changeFrameList(frameList) {\r\n    return {\r\n        type: CHANGE_FRAME_LIST,\r\n        payload: {\r\n            frameList: frameList\r\n        }\r\n    };\r\n}\r\n\r\nexport function setMultiplicateCanvas(canvas) {\r\n    return {\r\n        type: SET_MULTIPLICATE_CANVAS,\r\n        payload: {\r\n            canvas: canvas,\r\n            context: canvas.getContext('2d')\r\n        }\r\n    };\r\n}\r\n\r\nexport function stopPlay() {\r\n    return {\r\n        type: STOP_PLAY\r\n    };\r\n}\r\n\r\nexport function canPlay() {\r\n    return {\r\n        type: CAN_PLAY\r\n    };\r\n}\r\n\r\nexport function set–°urrentFrameIndex(index) {\r\n    return {\r\n        type: SET_CURRENT_FRAME,\r\n        payload: index\r\n    };\r\n}","export default class Frame {\r\n    constructor(canvas, delay, id) {\r\n        this._canvas = canvas;\r\n        this._delay = delay;\r\n        this._id = id;\r\n        this._type = 'Frame';\r\n        this._open = false;\r\n        this._isSelect = false;\r\n    }\r\n\r\n    getCanvas() {\r\n        return this._canvas;\r\n    }\r\n\r\n    setDelay(delay) {\r\n        this._delay = delay;\r\n    }\r\n\r\n    getDelay() {\r\n        return this._delay;\r\n    }\r\n\r\n    setId(id) {\r\n        this._id = id;\r\n    }\r\n\r\n    getId() {\r\n        return this._id;\r\n    }\r\n\r\n    isOpen() {\r\n        return this._open;\r\n    }\r\n\r\n    open() {\r\n        this._open = true;\r\n    }\r\n\r\n    close() {\r\n        this._open = false;\r\n    }\r\n\r\n    select(){\r\n        this._isSelect = true;\r\n    }\r\n\r\n    unSelect(){\r\n        this._isSelect = false;\r\n    }\r\n    isSelected(){\r\n        return this._isSelect;\r\n    }\r\n}","import {\r\n    changeFrameList,\r\n    set–°urrentFrameIndex,\r\n    setMultiplicateCanvas,\r\n    stopPlay\r\n} from '../../redux/actionCreators/multiplicateActionCreators';\r\n\r\nimport store from '../../redux/store';\r\nimport Frame from '../../models/Frame';\r\n//–ü—Ä–æ—Å–ª–æ–π–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ—Ä–µ–π–º–∞–º–∏\r\n\r\nexport default class FrameManager {\r\n    static id = 0;\r\n\r\n\r\n    static addFrame(layout, delay) {\r\n        let state = store.getState();\r\n        let stopPlay = state.frames.stopPlay;\r\n        //–µ—Å–ª–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ\r\n        if(!stopPlay) return;\r\n\r\n        let canvas = document.createElement('canvas');\r\n        let currentFrameIndex =state.frames.currentFrameIndex;\r\n\r\n        let frameList = state.frames.frameList;\r\n\r\n        canvas.width = layout.getCanvas().width;\r\n        canvas.height = layout.getCanvas().height;\r\n        canvas.getContext('2d').drawImage(layout.getCanvas(), 0, 0);\r\n\r\n        let frame = new Frame(canvas, delay, this.id++);\r\n\r\n        frameList.push(frame);\r\n        store.dispatch(changeFrameList(frameList));\r\n\r\n        if (currentFrameIndex === -1) store.dispatch(set–°urrentFrameIndex(0));\r\n    }\r\n\r\n    static setDelaySelectedFrames(delay){\r\n\r\n        let state = store.getState();\r\n        let frameList = state.frames.frameList;\r\n\r\n        frameList.forEach((frame, index)=>{\r\n            if(frame.isSelected()){\r\n                frame.setDelay(delay);\r\n            }\r\n        });\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n    static deleteSelectedFrame(){\r\n        let state = store.getState();\r\n        let frameList = state.frames.frameList;\r\n        let newFrameList = frameList.filter((frame, index)=>!frame.isSelected());\r\n        store.dispatch(changeFrameList(newFrameList));\r\n        store.dispatch(set–°urrentFrameIndex(newFrameList.length-1));\r\n    }\r\n\r\n    static unSelectAllFrame(){\r\n        let state = store.getState();\r\n        let frameList = state.frames.frameList;\r\n        frameList.forEach((frame, index)=>{\r\n            if(frame.isSelected()){\r\n                frame.unSelect();\r\n            }\r\n        });\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n    static changeFrame() {\r\n        let state = store.getState();\r\n        let frameList = state.frames.frameList;\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n\r\n    static deleteFrame(index) {\r\n        let state = store.getState();\r\n        let stopPlay = state.frames.stopPlay;\r\n        if(!stopPlay) return;\r\n        let frameList = state.frames.frameList;\r\n        let currentFrameIndex = state.frames.currentFrameIndex;\r\n\r\n        frameList.splice(index, 1);\r\n\r\n        if (frameList.length - 1 < currentFrameIndex) store.dispatch(set–°urrentFrameIndex(frameList.length - 1));\r\n\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n\r\n    static openCloseFrame(frame){\r\n        if (frame.isOpen()) frame.close();\r\n        else frame.open();\r\n        let frameList = store.getState().frames.frameList;\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n\r\n    static swap(index1, index2) {\r\n        let state = store.getState();\r\n        let stopPlay = state.frames.stopPlay;\r\n        if(!stopPlay) return;\r\n        let frameList = state.frames.frameList;\r\n\r\n        if (index1 < 0 || index1 > frameList.length - 1 || index2 < 0 || index2 > frameList.length - 1) {\r\n            return;\r\n        }\r\n        let help = frameList[index1];\r\n\r\n        frameList[index1] = frameList[index2];\r\n        frameList[index2] = help;\r\n\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n\r\n    static playFilm() {\r\n        let state = store.getState();\r\n        let frameList = state.frames.frameList;\r\n        if(frameList.length===0) {\r\n            if(frameList.length ===0) {\r\n                alert('–°–ø–∏—Å–æ–∫ —Ñ—Ä–µ–π–º–æ–≤ –ø—É—Å—Ç !');\r\n                return;\r\n            }\r\n        }\r\n\r\n        //–ï—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ –Ω–∞ –ø–∞—É–∑—É - –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏\r\n        let currentFrameIndex = state.frames.currentFrameIndex;\r\n\r\n        let currentFrame = frameList[currentFrameIndex];\r\n\r\n        currentFrame.getDelay();\r\n\r\n        setTimeout(() => {\r\n            let state = store.getState();\r\n            let stopPlay = state.frames.stopPlay;\r\n            currentFrameIndex = state.frames.currentFrameIndex;\r\n            if (stopPlay) {\r\n                return;\r\n            }\r\n\r\n            if (frameList.length - 1 !== currentFrameIndex) {\r\n                store.dispatch(set–°urrentFrameIndex(++currentFrameIndex));\r\n                this.playFilm();\r\n            } else {\r\n                this.pause();\r\n                return;\r\n            }\r\n        }, currentFrame.getDelay());\r\n    }\r\n\r\n    static pause() {\r\n        store.dispatch(stopPlay());\r\n    }\r\n\r\n    static stop() {\r\n        store.dispatch(stopPlay());\r\n        set–°urrentFrameIndex(0);\r\n    }\r\n\r\n    static set–°urrentFrameIndex(index) {\r\n        store.dispatch(set–°urrentFrameIndex(index));\r\n    }\r\n\r\n    static setMultiplicateCanvas(canvas) {\r\n        store.dispatch(setMultiplicateCanvas(canvas));\r\n    }\r\n\r\n    static setDelayToAll(delay) {\r\n        let state = store.getState();\r\n        let frameList = state.frames.frameList;\r\n        frameList.forEach((frame, index) => {\r\n            frame.setDelay(delay);\r\n        });\r\n        store.dispatch(changeFrameList(frameList));\r\n    }\r\n}","import React, {useEffect, useRef} from 'react';\r\nimport {bindActionCreators} from 'redux';\r\n\r\nimport './WorkSpace.scss';\r\nimport Canvas from './Canvas/Canvas';\r\nimport {connect} from 'react-redux';\r\nimport ToolManager from '../../../../Managers/ToolManager/ToolManager';\r\nimport LayoutManager from '../../../../Managers/LayoutManager/LayoutManager';\r\nimport {changeCanvasSize, setCanvasBlock, setCanvasZoom} from '../../../../redux/actionCreators/canvasActionCreator';\r\nimport store from '../../../../redux/store';\r\nimport Layout from '../../../../models/Layout';\r\nimport FrameManager from '../../../../Managers/FrameManager/FrameManager';\r\nimport ListenerManager from '../../../../utils/ListenerManager';\r\n\r\n\r\nfunction WorkSpace(props) {\r\n\r\n    const canvas = props.canvas;\r\n    const workSpace = useRef();\r\n\r\n    const changeCanvasSize =  props.changeCanvasSize;\r\n    const currentToolName = props.currentToolName;\r\n    const setCanvasBlock = props.setCanvasBlock;\r\n\r\n    //–∫–æ–≥–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è —Ö–æ–ª—Å—Ç, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –Ω–∏–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Å–ª–æ–∏\r\n    useEffect(() => {\r\n        let style = getComputedStyle(workSpace.current);\r\n        changeCanvasSize(parseInt(style.width) - 2, parseInt(style.height) - 2);\r\n\r\n        if (canvas !== null) {\r\n            //canvasBlock –ù—É–∂–µ–Ω –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∫–∏—Å—Ç–∏. –≠—Ç–æ –±–ª–æ–∫ –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è canvas\r\n            setCanvasBlock(workSpace.current);\r\n            //—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–∏—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\r\n            ToolManager.setTool(currentToolName);\r\n            LayoutManager.init();\r\n        }\r\n    }, [canvas, changeCanvasSize, currentToolName, setCanvasBlock]);\r\n\r\n    //—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏1\r\n    useEffect(()=>{\r\n        let hotKeyListenerManager = new ListenerManager([]);\r\n        addHotKeys(hotKeyListenerManager, workSpace.current);\r\n        return ()=>{\r\n            hotKeyListenerManager.removeAllListener();\r\n        }\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <div ref={workSpace} className='work-space' style={{backgroundColor: props.defaultBackgorund}}>\r\n            <Canvas></Canvas>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction addHotKeys(listenerManager, workSpace) {\r\n\r\n    listenerManager.addListener(window ,'keydown', keyDown);\r\n    function keyDown(e) {\r\n        if (e.code === 'KeyS' && e.ctrlKey) {\r\n            let canvas = store.getState().canvas.canvas;\r\n            let context = store.getState().canvas.context;\r\n            if (canvas != null) {\r\n                let layout = new Layout(canvas, context, true, ++LayoutManager.id);\r\n                FrameManager.addFrame(layout, 100);\r\n            }\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        let layout = LayoutManager.getCurrentLayout();\r\n        if (e.ctrlKey && e.code === 'KeyZ' && e.shiftKey) {\r\n            layout.historyNext();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        else if (e.ctrlKey && e.code === 'KeyZ') {\r\n            layout.historyBack();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if(e.code === 'Digit1') {\r\n            ToolManager.setTool(ToolManager.SKETCH_BRUSH);\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if(e.code === 'Digit2') {\r\n            ToolManager.setTool(ToolManager.ERASER);\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if(e.code === 'Digit3') {\r\n            ToolManager.setTool(ToolManager.HAND);\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if(e.code === 'Digit4') {\r\n            ToolManager.setTool(ToolManager.DRAG);\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if(e.code === 'Digit5') {\r\n            ToolManager.setTool(ToolManager.IMAGE);\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if(e.code === 'ArrowDown') {\r\n            LayoutManager.setCurrentLayout(LayoutManager.getCurrentLayoutIndex()+1);\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if(e.code === 'ArrowUp') {\r\n            LayoutManager.setCurrentLayout(LayoutManager.getCurrentLayoutIndex()-1);\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if(e.code === 'ArrowLeft') {\r\n            let currentLayout = LayoutManager.getCurrentLayout();\r\n            currentLayout.historyBack();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if(e.code === 'ArrowRight') {\r\n            let currentLayout = LayoutManager.getCurrentLayout();\r\n            currentLayout.historyNext();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if(e.code === 'KeyH') {\r\n            LayoutManager.toggleHide(LayoutManager.getCurrentLayoutIndex());\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n    }\r\n\r\n    listenerManager.addListener(workSpace ,'mousewheel', mouseWheel);\r\n    function mouseWheel(e) {\r\n        let canvasZoom = store.getState().canvas.zoom;\r\n        if(e.deltaY>0) {\r\n            if(+canvasZoom+0.1>5) return;\r\n            store.dispatch(setCanvasZoom((+canvasZoom+0.1).toFixed(2)));\r\n        }\r\n        else if(e.deltaY<0) {\r\n            if(+canvasZoom-0.1<=0) return;\r\n            store.dispatch(setCanvasZoom((+canvasZoom-0.1).toFixed(2)));\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        changeCanvasSize: bindActionCreators(changeCanvasSize, dispatch),\r\n        setCanvasBlock: bindActionCreators(setCanvasBlock, dispatch)\r\n    };\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        canvas: state.canvas.canvas,\r\n        context: state.canvas.context,\r\n        defaultBackgorund: state.setting.canvasDefaultBackground,\r\n        currentLayout: state.layouts.currentLayout,\r\n        currentToolName: state.canvas.currentToolName\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(WorkSpace);","import React from 'react';\r\nimport './TopPanel.scss';\r\n\r\nexport default function TopPanel(props) {\r\n    return (\r\n        <div className='top-panel'>\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport {useLocation} from 'react-router';\r\nimport {NavLink} from 'react-router-dom';\r\nimport './TopPanelMenu.scss';\r\n\r\nexport default function TopPanelMenu(props) {\r\n\r\n    let location = useLocation();\r\n    let content;\r\n\r\n\r\n    let forSwitch = location.pathname.match(/\\/\\w+/)[0];\r\n    switch (forSwitch) {\r\n        case '/draw':  {\r\n            content =\r\n                <>\r\n                    <NavLink to='/save' className='top-panel__menu-item'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</NavLink>\r\n                    <NavLink to='/frames' className='top-panel__menu-item'>–†–∞–±–æ—Ç–∞—Ç—å —Å –∫–∞–¥—Ä–∞–º–∏</NavLink>\r\n                </>\r\n            break;\r\n        }\r\n        case '/frames': {\r\n            content =\r\n                <>\r\n                    <NavLink to='/save' className='top-panel__menu-item'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</NavLink>\r\n                    <NavLink to='/draw' className='top-panel__menu-item'>–†–∏—Å–æ–≤–∞—Ç—å</NavLink>\r\n                </>;\r\n            break;\r\n        }\r\n        case '/save': {\r\n            content =\r\n                <>\r\n                    <NavLink to='/draw' className='top-panel__menu-item'>–†–∏—Å–æ–≤–∞—Ç—å</NavLink>\r\n                    <NavLink to='/frames' className='top-panel__menu-item'>–†–∞–±–æ—Ç–∞—Ç—å —Å –∫–∞–¥—Ä–∞–º–∏</NavLink>\r\n                </>;\r\n            break;\r\n        }\r\n        default: {\r\n            content = <NavLink to='/draw' className='top-panel__menu-item'>draw</NavLink>;\r\n        }\r\n    }\r\n    return (\r\n        <div className='top-panel__menu'>\r\n            <div className='top-panel__menu-item'>–§–∞–π–ª</div>\r\n            {content}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport './InputsBlock.scss'\r\n\r\nfunction InputsBlock(props) {\r\n    return (\r\n        <div className=\"brush-panel__block size-block\">\r\n            <div className=\"brush-panel__panel-titile\">{props.title}</div>\r\n            <div className=\"brush-panel__inputs-block\">\r\n                <input min={props.min} max={props.max} step={props.step} onChange={props.onChange} value={props.value} type=\"number\"/>\r\n                <input min={props.min} max={props.max} step={props.step} onChange={props.onChange} value={props.value} type=\"range\"/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default InputsBlock;","import React, {useRef} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport ToolManager from '../../../../../../Managers/ToolManager/ToolManager';\r\nimport './SavedBrushes.scss';\r\n\r\nfunction SavedColors(props) {\r\n\r\n    let colorIndex = null;\r\n    let brushMenu = useRef();\r\n\r\n    function deleteButtonHandler() {\r\n        props.savedBrushes.splice(colorIndex, 1);\r\n        ToolManager.changeSavedBrushes(props.savedBrushes);\r\n        brushMenu.current.classList.add('fastRemove');\r\n        brushMenu.current.classList.remove('active');\r\n    }\r\n\r\n    function changeButtonHandler() {\r\n        props.savedBrushes[colorIndex].size = props.brushSize;\r\n        props.savedBrushes[colorIndex].color = props.brushColor;\r\n        props.savedBrushes[colorIndex].alpha = props.brushAlpha;\r\n\r\n        ToolManager.changeSavedBrushes(props.savedBrushes);\r\n        //–ü–æ—Å–ª–µ –∫–ª–∏–∫–∞ –Ω—É–∂–Ω–æ —É–±–∏—Ä–∞—Ç—å –º–µ–Ω—é –±—ã—Å—Ç—Ä–æ\r\n        brushMenu.current.classList.add('fastRemove');\r\n        brushMenu.current.classList.remove('active');\r\n        //–±–µ–∑ —Ç–∞–π–º–∞—É—Ç–∞ –±—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–±–∏—Ä–∞—Ç—å –∫–ª–∞—Å—ã –∑–∞ \"1 –∫—Ä—É–≥\"\r\n        setTimeout(() => {\r\n            brushMenu.current.classList.remove('fastRemove');\r\n        }, 0);\r\n    }\r\n\r\n    function colorRightClickHandler(e, index) {\r\n        colorIndex = index;\r\n        brushMenu.current.classList.add('active');\r\n        let domRect = e.target.getBoundingClientRect();\r\n        brushMenu.current.style.top = domRect.top + 'px';\r\n        brushMenu.current.style.left = domRect.left + 'px';\r\n        brushMenu.current.addEventListener('mouseleave', mouseLeave);\r\n        e.preventDefault();\r\n        let timeOutId;\r\n\r\n        //–°—Ç–∞–≤–∏–º —Ç–∞–π–º–∞—É—Ç —á—Ç–æ –±—ã —Å–∞–º–æ –∑–∞–∫—Ä—ã–ª–æ—Å—å\r\n        timeOutId = setTimeout(() => {\r\n            brushMenu.current.classList.remove('active');\r\n        }, 500);\r\n\r\n        //–ï—Å–ª–∏ –∑–∞—à–ª–∏ –º—ã—à–∫–æ–π –≤ –º–µ–Ω—é - –æ—Ç–∫–ª—é—á–∞–µ–º —Ç–∞–π–º–∞—É—Ç\r\n        brushMenu.current.addEventListener('mouseenter', (e) => {\r\n            clearTimeout(timeOutId);\r\n            brushMenu.current.classList.add('active');\r\n        });\r\n\r\n        //–í—ã—à–ª–∏ –∏–∑ –º–µ–Ω—é - –≤–∫–ª—é—á–∞–µ–º —Ç–∞–π–º–∞—É—Ç\r\n        function mouseLeave() {\r\n            brushMenu.current.classList.add('fastRemove');\r\n            brushMenu.current.classList.remove('active');\r\n            //–±–µ–∑ —Ç–∞–π–º–∞—É—Ç–∞ –±—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–±–∏—Ä–∞—Ç—å –∫–ª–∞—Å—ã –∑–∞ \"1 –∫—Ä—É–≥\"\r\n            setTimeout(() => {\r\n                brushMenu.current.classList.remove('fastRemove');\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    function changeBrushHandler(index) {\r\n        let brushSetting = props.savedBrushes[index];\r\n        let tool = ToolManager.getTool();\r\n        tool.setColor(brushSetting.color);\r\n        tool.setSize(brushSetting.size);\r\n        tool.setAlpha(brushSetting.alpha);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {props.savedBrushes.length!==0 &&\r\n            <div className=\"brush-panel__block saved-brush\">\r\n                <div className=\"brush-panel__panel-title\">–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∫–∏—Å—Ç–∏</div>\r\n                <div className='brush-panel__saved-brush'>\r\n                    <div ref={brushMenu} className=\"brush-panel__saved-brush-menu \">\r\n                        <div onClick={changeButtonHandler} className=\"brush-panel__saved-brush-menu-item\">–ò–∑–º–µ–Ω–∏—Ç—å</div>\r\n                        <div onClick={deleteButtonHandler} className=\"brush-panel__saved-brush-menu-item\">–£–¥–∞–ª–∏—Ç—å</div>\r\n                    </div>\r\n                    {props.savedBrushes.map((value, index) => {\r\n                        return <div\r\n                            onClick={() => {\r\n                                changeBrushHandler(index);\r\n                            }}\r\n                            onContextMenu={(e) => {\r\n                                colorRightClickHandler(e, index);\r\n                            }}\r\n                            key={index}\r\n                            style={{backgroundColor: value.color}}\r\n                            className=\"brush-panel__saved-brush-item\">\r\n                            s:{value.size} o:{value.alpha}\r\n                        </div>;\r\n                    })}\r\n                </div>\r\n            </div>}\r\n        </>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        brushSize: state.tool.brush.size,\r\n        brushColor: state.tool.brush.color,\r\n        brushAlpha: state.tool.brush.alpha,\r\n        savedBrushes: state.tool.brush.savedBrushes\r\n    };\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(SavedColors);","import React from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport './BrushSettingPanel.scss';\r\n\r\nimport ToolManager from '../../../../../Managers/ToolManager/ToolManager';\r\nimport ColorHelper from '../../../../../utils/ColorHelper';\r\nimport InputsBlock from '../../../../Dump/InputsBlock/InputsBlock';\r\nimport SavedBrushes from './SavedBrushes/SavedBrushes';\r\n\r\nfunction BrushSettingPanel(props) {\r\n\r\n    function changeSizeInputsHandler(e) {\r\n        let tool = ToolManager.getTool();\r\n        tool.setSize(e.target.value);\r\n    }\r\n\r\n    function changeColorInputsHandler(e) {\r\n        let tool = ToolManager.getTool();\r\n        tool.setColor(e.target.value);\r\n    }\r\n\r\n    function setBrushAlphaHandler(e) {\r\n        let tool = ToolManager.getTool();\r\n        tool.setAlpha(e.target.value);\r\n    }\r\n\r\n    function saveBrushHandler(e) {\r\n        ToolManager.saveBrush({color: props.brushColor, alpha: props.brushAlpha, size: props.brushSize});\r\n    }\r\n\r\n    return (\r\n        <div className=\"brush-panel\">\r\n            <InputsBlock title='–†–∞–∑–º–µ—Ä –∫–∏—Å—Ç–∏'\r\n                         value ={props.brushSize}\r\n                         onChange={changeSizeInputsHandler}\r\n                         max='250' min='0' step={'1'}\r\n            />\r\n            <InputsBlock title='–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å'\r\n                         value={props.brushAlpha}\r\n                         onChange={setBrushAlphaHandler}\r\n                         max='1' min='0' step={'0.01'}\r\n            />\r\n            <div className=\"brush-panel__block brush-color\">\r\n                <div className=\"brush-panel__panel-title\">–¶–≤–µ—Ç –∫–∏—Å—Ç–∏</div>\r\n                <div className=\"brush-panel__inputs-block\">\r\n                    <input onChange={changeColorInputsHandler} value={ColorHelper.toHex(props.brushColor)}\r\n                           type=\"color\"/>\r\n                    <input value={ColorHelper.toHex(props.brushColor)} type=\"text\"/>\r\n                </div>\r\n            </div>\r\n            <div className=\"brush-panel__block\">\r\n                <button onClick={saveBrushHandler} className='panel__block-button add-brush-btn'>\r\n                    <img src={process.env.PUBLIC_URL + \"/img/plus-icon.svg\"} alt=''/>\r\n                </button>\r\n            </div>\r\n            <SavedBrushes></SavedBrushes>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        brushSize: state.tool.brush.size,\r\n        brushColor: state.tool.brush.color,\r\n        brushAlpha: state.tool.brush.alpha,\r\n        savedBrushes: state.tool.brush.savedBrushes\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(BrushSettingPanel);","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport {setCanvasPosition, setCanvasZoom} from '../../../../../redux/actionCreators/canvasActionCreator';\r\nimport InputsBlock from '../../../../Dump/InputsBlock/InputsBlock';\r\nimport './HandToolSettingPanel.scss'\r\n\r\nfunction HandToolSettingPanel(props) {\r\n\r\n    function zoomChangeHandler(e) {\r\n        props.setCanvasZoom(e.currentTarget.value);\r\n    }\r\n\r\n    function canvasTopPositionHandler(e) {\r\n        props.setCanvasPosition({\r\n            top: e.currentTarget.value+'px',\r\n            left: props.left\r\n        })\r\n    }\r\n    function canvasLeftPositionHandler(e) {\r\n        props.setCanvasPosition({\r\n            top: props.top,\r\n            left: e.currentTarget.value +'px',\r\n        })\r\n    }\r\n\r\n    function clickBackToCenterBtn() {\r\n        props.setCanvasPosition({\r\n            top: '1px',\r\n            left: '1px',\r\n        })\r\n    }\r\n    return (\r\n        <div className='top-panel__setting-hand-tool'>\r\n            <div>\r\n                <InputsBlock title='–£–≤–µ–ª–∏—á–µ–Ω–∏–µ'\r\n                             onChange={zoomChangeHandler}\r\n                             max='5' min='0.1' step='0.1'\r\n                             value={props.canvasZoom}\r\n                />\r\n            </div>\r\n            <div>\r\n                <InputsBlock title='x –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞'\r\n                             onChange={canvasLeftPositionHandler}\r\n                             max={parseInt(props.canvasSize.width)} min={-parseInt(props.canvasSize.width)} step='1'\r\n                             value={parseInt(props.left)}\r\n                />\r\n            </div>\r\n            <div>\r\n                <InputsBlock title='y –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞'\r\n                             onChange={canvasTopPositionHandler}\r\n                             max={parseInt(props.canvasSize.height)} min={-parseInt(props.canvasSize.height)} step='1'\r\n                             value={parseInt(props.top)}\r\n                />\r\n            </div>\r\n            <div className='top-panel__center-btn'>\r\n                <button onClick={clickBackToCenterBtn}>–í–µ—Ä–Ω—É—Ç—å –ø–æ —Ü–µ–Ω—Ç—Ä—É</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        canvasZoom: state.canvas.zoom,\r\n        top: state.canvas.position.top,\r\n        left: state.canvas.position.left,\r\n        canvasSize: state.canvas.size\r\n\r\n    };\r\n}\r\n\r\nfunction mapDispatchToPorps(dispatch) {\r\n    return {\r\n        setCanvasZoom: bindActionCreators(setCanvasZoom, dispatch),\r\n        setCanvasPosition: bindActionCreators(setCanvasPosition, dispatch)\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToPorps)(HandToolSettingPanel);\r\n\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {\r\n    disableDragBlock, finish,\r\n    setFile,\r\n    setPosition\r\n} from '../../../../../redux/actionCreators/imageToolActionCreator';\r\nimport './ImageSettingPanel.scss';\r\n\r\nfunction ImageSettingPanel(props) {\r\n\r\n    function onEnabledButtonClick(){\r\n        props.finish();\r\n    }\r\n\r\n    function inputXCoordChange(e) {\r\n        props.setPosition({\r\n            x: e.currentTarget.value,\r\n            y: props.y,\r\n            width: props.width,\r\n            height: props.height\r\n        })\r\n    }\r\n    function inputYCoordChange(e) {\r\n        props.setPosition({\r\n            x: props.x,\r\n            y: e.currentTarget.value,\r\n            width: props.width,\r\n            height: props.height\r\n        })\r\n    }\r\n    function inputWidthChange(e) {\r\n        props.setPosition({\r\n            x: props.x,\r\n            y: props.y,\r\n            width: e.currentTarget.value,\r\n            height: props.height\r\n        })\r\n    }\r\n    function inputHeightChange(e) {\r\n        props.setPosition({\r\n            x: props.x,\r\n            y: props.y,\r\n            width: props.width,\r\n            height: e.currentTarget.value\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {props.dragBlockEnabled && <div></div>}\r\n            {!props.dragBlockEnabled &&\r\n            <div className='top-panel__image-tool image-tool'>\r\n                <div className='image-tool__ block coords'>\r\n                    <div className='image-tool__block-row'>\r\n                        <h3>X</h3>\r\n                        <div className='image-tool__inputs'>\r\n                            <input type='number' value={props.x} onChange={inputXCoordChange} min={0} max={props.canvasWidth}/>\r\n                            <input type='range' value={props.x} onChange={inputXCoordChange} min={0} max={props.canvasWidth} />\r\n                        </div>\r\n                    </div>\r\n                    <div className='image-tool__block-row'>\r\n                        <h3>Y</h3>\r\n                        <div className='image-tool__inputs'>\r\n                            <input type='number' value={props.y} onChange={inputYCoordChange}  min={0} max={props.canvasHeigth} />\r\n                            <input type='range' value={props.y} onChange={inputYCoordChange} min={0} max={props.canvasHeigth}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className='image-tool__ block sizes'>\r\n                    <div className='image-tool__block-row'>\r\n                        <h3>—à–∏—Ä–∏–Ω–∞</h3>\r\n                        <div className='image-tool__inputs'>\r\n                            <input type='number' value={props.width} onChange={inputWidthChange} min={0} max={props.canvasWidth}/>\r\n                            <input type='range' value={props.width} onChange={inputWidthChange} min={0} max={props.canvasWidth}/>\r\n                        </div>\r\n                    </div>\r\n                    <div className='image-tool__block-row'>\r\n                        <h3>–≤—ã—Å–æ—Ç–∞</h3>\r\n                        <div className='image-tool__inputs'>\r\n                            <input type='number' value={props.height} onChange={inputHeightChange} min={0} max={props.canvasHeigth}/>\r\n                            <input type='range' value={props.height} onChange={inputHeightChange} min={0} max={props.canvasHeigth} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <button onClick={onEnabledButtonClick}>–í—Å—Ç–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</button>\r\n            </div>}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        currentLayout: state.layouts.currentLayout,\r\n        dragBlockEnabled: state.tool.image.dragBlockEnabled,\r\n        x: state.tool.image.position.x,\r\n        y: state.tool.image.position.y,\r\n        width: state.tool.image.position.width,\r\n        height: state.tool.image.position.height,\r\n        canvasHeigth: state.canvas.size.height,\r\n        canvasWidth: state.canvas.size.width,\r\n    }\r\n}\r\nexport default connect(mapStateToProps,\r\n    {disableDragBlock, setFile, setPosition, finish})\r\n(ImageSettingPanel);","import React from 'react';\r\nimport InputsBlock from '../../../../Dump/InputsBlock/InputsBlock';\r\nimport {connect} from 'react-redux';\r\nimport {changeEraserSetting} from '../../../../../redux/actionCreators/eraserActionCreator';\r\n\r\n\r\n\r\nfunction EraserSettingPanel(props) {\r\n\r\n    function changeSizeInputsHandler(e) {\r\n        props.changeEraserSetting(e.target.value);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <InputsBlock title='–†–∞–∑–º–µ—Ä –ª–∞—Å—Ç–∏–∫–∞'\r\n                         value ={props.brushSize}\r\n                         onChange={changeSizeInputsHandler}\r\n                         max='250' min='0' step={'1'}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        brushSize: state.tool.eraser.size,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {changeEraserSetting})(EraserSettingPanel);","import {CHANGE_ERASER_SETTING} from '../actionTypes';\r\n\r\n\r\nexport function changeEraserSetting(size){\r\n    return {\r\n        type: CHANGE_ERASER_SETTING,\r\n        payload: {\r\n            size\r\n        }\r\n    }\r\n}","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport BrushPanel from './BrushSettingPanel/BrushSettingPanel';\r\nimport HandToolPanel from './HandToolSettingPanel/HandToolSettingPanel';\r\nimport ImageSettingPanel from './ImageSettingPanel/ImageSettingPanel';\r\nimport EraserSettingPanel from './EraserSettingPanel/EraserSettingPanel';\r\n\r\nfunction ToolSettingPanel(props) {\r\n    switch (props.currentToolName) {\r\n        case 'HAND': {\r\n            return <HandToolPanel></HandToolPanel>;\r\n        }\r\n        case 'ERASER': {\r\n            return <EraserSettingPanel></EraserSettingPanel>;\r\n        }\r\n        case 'IMAGE': {\r\n            return <ImageSettingPanel></ImageSettingPanel>;\r\n        }\r\n        case 'DRAG': {\r\n            return <div></div>\r\n        }\r\n        default : {\r\n            return <BrushPanel></BrushPanel>;\r\n        }\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        currentToolName: state.canvas.currentToolName\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(ToolSettingPanel);","import React from 'react';\r\nimport './LeftPanel.scss';\r\n\r\n\r\nfunction LeftPanel(props) {\r\n    return (\r\n        <div className='left-panel'>\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LeftPanel;","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport ToolManager from '../../../../Managers/ToolManager/ToolManager';\r\nimport './ToolList.scss';\r\n\r\n\r\nfunction ToolList(props) {\r\n\r\n    function setSketchBrushHandler() {\r\n        ToolManager.setTool(ToolManager.SKETCH_BRUSH);\r\n    }\r\n    function setEraserHandler() {\r\n        ToolManager.setTool(ToolManager.ERASER);\r\n    }\r\n\r\n    function setHandToolHandler() {\r\n        ToolManager.setTool(ToolManager.HAND);\r\n    }\r\n    function setDragToolHandler() {\r\n        ToolManager.setTool(ToolManager.DRAG);\r\n    }\r\n    function setImageToolHandler() {\r\n        ToolManager.setTool(ToolManager.IMAGE);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div onClick={setSketchBrushHandler}\r\n                 className={props.currentToolName === ToolManager.SKETCH_BRUSH ? 'left-panel__tool-item active' : 'left-panel__tool-item'}>\r\n                <img src={process.env.PUBLIC_URL + \"/img/brush.svg\" } alt=\"\"/>\r\n            </div>\r\n            <div onClick={setEraserHandler}\r\n                 className={props.currentToolName === ToolManager.ERASER ? 'left-panel__tool-item active' : 'left-panel__tool-item'}>\r\n                <img src={process.env.PUBLIC_URL + \"/img/eraser.svg\"} alt=\"\"/>\r\n            </div>\r\n            <div onClick={setHandToolHandler}\r\n                 className={props.currentToolName === ToolManager.HAND ? 'left-panel__tool-item active' : 'left-panel__tool-item'}>\r\n                <img src={process.env.PUBLIC_URL + \"/img/hand.svg\"} alt=\"\"/>\r\n            </div>\r\n            <div onClick={setDragToolHandler}\r\n                 className={props.currentToolName === ToolManager.DRAG ? 'left-panel__tool-item active' : 'left-panel__tool-item'}>\r\n                <img src={process.env.PUBLIC_URL + \"/img/selection.svg\"} alt=\"\"/>\r\n            </div>\r\n            <div onClick={setImageToolHandler}\r\n                 className={props.currentToolName === ToolManager.IMAGE ? 'left-panel__tool-item active' : 'left-panel__tool-item'}>\r\n                <img src={process.env.PUBLIC_URL + \"/img/picture.svg\"} alt=\"\"/>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        currentToolName: state.canvas.currentToolName\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(ToolList);\r\n\r\n","import React from 'react';\r\nimport './RightPanel.scss'\r\n\r\nfunction RightPanel(props) {\r\n    return (\r\n        <div className='right-panel'>\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RightPanel;","import React, {useEffect, useRef} from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport './Layout.scss';\r\nimport LayoutManager from '../../../../../../Managers/LayoutManager/LayoutManager';\r\nimport FrameManager from '../../../../../../Managers/FrameManager/FrameManager';\r\n\r\n\r\nfunction Layout(props) {\r\n\r\n    let layout = props.layout;\r\n    let canvas = layout.getCanvas();\r\n\r\n    let layoutBlock = useRef();\r\n    let index = props.index;\r\n\r\n\r\n    //–∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏–ª—Å—è, –≤—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–Ω–≤–∞—Å –∏–∑ –º–æ–¥–µ–ª–∏\r\n    useEffect(() => {\r\n        layoutBlock.current.append(canvas);\r\n        canvas.style.backgroundColor = props.defaultBackgorund;\r\n        canvas.style.outline = props.isCurrent ? '10px solid red' : 'none';\r\n        //–∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–µ–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —É–¥–∞–ª—è–µ–º –∫–∞–Ω–≤–∞—Å\r\n        return () => canvas.remove();\r\n    });\r\n\r\n    function hideLayoutHandler(e) {\r\n        LayoutManager.toggleHide(index);\r\n        e.stopPropagation();\r\n    }\r\n\r\n\r\n    function clickToLayoutHandler(e) {\r\n        if (e.ctrlKey) {\r\n            LayoutManager.select(index);\r\n            return;\r\n        }\r\n        LayoutManager.setCurrentLayout(index);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function upHandler(e) {\r\n        LayoutManager.swap(index, index - 1);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function downHandler(e) {\r\n        LayoutManager.swap(index, index + 1);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function historyBackHandler(e) {\r\n        layout.historyBack();\r\n        //–æ–±–Ω–æ–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–≤–∞—Å, –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞—è –∫–∞–∂–¥—ã–π —Å–ª–æ–π\r\n        LayoutManager.update();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function historyNextHandler(e) {\r\n        layout.historyNext();\r\n        //–æ–±–Ω–æ–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–≤–∞—Å, –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞—è –∫–∞–∂–¥—ã–π —Å–ª–æ–π\r\n        LayoutManager.update();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function deleteLayoutHandler(e) {\r\n        LayoutManager.deleteLayout(index);\r\n        e.stopPropagation();\r\n    }\r\n\r\n\r\n    function contextMenuHandler(e) {\r\n        if (layout.isSelected()) {\r\n            props.setMenuActive(true);\r\n            let x = e.pageY - 10;\r\n            let y = e.pageX - 20;\r\n            //–µ—Å–ª–∏ –º–µ–Ω—é –≤—ã–µ–∑–∂–∞–µ—Ç –∑–∞ –ø—Ä–∞–≤—ã–π –∫—Ä–∞–π\r\n            if (y + 200 >= window.innerWidth) {\r\n                y = window.innerWidth - 200;\r\n            }\r\n            if (x + 200 >= window.innerHeight) {\r\n                x = window.innerHeight - 200;\r\n            }\r\n            props.setMenuPosition({x, y});\r\n        }\r\n\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n\r\n    function addToMultiplicate() {\r\n        FrameManager.addFrame(layout, 100);\r\n    }\r\n\r\n    return (\r\n        <div onContextMenu={contextMenuHandler}\r\n             ref={layoutBlock}\r\n             onClick={clickToLayoutHandler}\r\n             key={index}\r\n             style={props.isSelected ? {backgroundColor: 'darkred'} : {backgroundColor: 'black'}}\r\n             className='right-panel__layout-block layout-block'>\r\n\r\n            <div className='layout-block__left-menu'>\r\n                <div onClick={upHandler} className=\"layout-block__left-menu-item\">\r\n                    <img src={process.env.PUBLIC_URL + \"/img/up.svg\"} alt=\"\"/>\r\n                </div>\r\n                <div onClick={hideLayoutHandler} className=\"layout-block__left-menu-item\">\r\n                    {!props.isHidden ? <img src={process.env.PUBLIC_URL + \"/img/show.svg\"} alt=\"\"/> : <img src=\"./img/hide.svg\" alt=\"\"/>}\r\n                </div>\r\n                <div onClick={deleteLayoutHandler} className=\"layout-block__left-menu-item\">\r\n                    <img src={process.env.PUBLIC_URL + \"/img/delete.svg\"} alt=\"\"/>\r\n                </div>\r\n                <div onClick={downHandler} className=\"layout-block__left-menu-item\">\r\n                    <img src={process.env.PUBLIC_URL + \"/img/up.svg\"} alt=\"\" style={{transform: 'rotateX(180deg)'}}/>\r\n                </div>\r\n            </div>\r\n            <div className='layout-block__bottom-menu'>\r\n                <div className=\"layout-block__bottom-menu-item history\">–ò—Å—Ç–æ—Ä–∏—è</div>\r\n                <div onClick={historyBackHandler} className=\"layout-block__bottom-menu-item back\">\r\n                    <img src={process.env.PUBLIC_URL + \"/img/up.svg\"} alt=\"\" style={{transform: 'rotateZ(-90deg)'}}/>\r\n                </div>\r\n                <div onClick={historyNextHandler} className=\"layout-block__bottom-menu-item next\">\r\n                    <img src={process.env.PUBLIC_URL + \"/img/up.svg\"} alt=\"\" style={{transform: 'rotateZ(90deg)'}}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        defaultBackgorund: state.setting.canvasDefaultBackground\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Layout);","import React, {useEffect, useRef, useState} from 'react';\r\nimport './ContextMenu.scss';\r\n\r\nlet timeoutId;\r\n\r\nfunction ContextMenu(props) {\r\n\r\n    let [menuClass, setMenuClass] = useState('context-menu disabled');\r\n\r\n    function contextMenuMouseLeaveHandler() {\r\n        setMenuClass('context-menu');\r\n        timeoutId=setTimeout(()=>{\r\n            console.log('timeout end');\r\n            props.setMenuActive(false);\r\n        },300);\r\n    }\r\n    function contextMenuOnMouseMove() {\r\n        clearTimeout(timeoutId);\r\n        setMenuClass('context-menu active');\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if(props.active){\r\n            setMenuClass('context-menu');\r\n            setTimeout(()=>{\r\n                setMenuClass('context-menu active');\r\n            }, 300);\r\n        }else {\r\n            setMenuClass('context-menu disabled');\r\n        }\r\n    }, [props.active]);\r\n\r\n    return (\r\n        <div className={menuClass}\r\n              onMouseLeave={contextMenuMouseLeaveHandler}\r\n             onMouseEnter={contextMenuOnMouseMove}\r\n              style={{top: props.menuPosition.x, left: props.menuPosition.y}}>\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ContextMenu;","import React, {useState} from 'react';\r\n\r\nimport {connect} from 'react-redux';\r\nimport './Layouts.scss';\r\nimport LayoutModel from '../../../../../models/Layout';\r\nimport ReactDOM from 'react-dom';\r\nimport LayoutManager from '../../../../../Managers/LayoutManager/LayoutManager';\r\nimport FrameManager from '../../../../../Managers/FrameManager/FrameManager';\r\nimport Layout from './Layout/Layout';\r\nimport ContextMenu from '../../../../Dump/ContextMenu/ContextMenu';\r\n\r\nfunction Layouts(props) {\r\n\r\n    let [menuPosition, setMenuPosition] = useState({x: 0, y: 0});\r\n    let [active, setMenuActive] = useState(false);\r\n\r\n    function addLayoutHandler() {\r\n        //–û–±—ã—á–Ω—ã–π —Å–ª–æ–π –∏–∑ –º–æ–¥–µ–ª–∏\r\n        let layout = new LayoutModel(props.canvas, props.context, true, ++LayoutManager.id);\r\n        LayoutManager.addLayout(layout);\r\n    }\r\n\r\n    function addToMultiplication(e) {\r\n        //–û–±—ã—á–Ω—ã–π —Å–ª–æ–π –∏–∑ –º–æ–¥–µ–ª–∏, –ø—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–æ –±—ã–ª–æ –¥—Ä—É–≥–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ –∏–º–ø–æ—Ä—Ç–µ\r\n        let layout = new LayoutModel(props.canvas, props.context, true, ++LayoutManager.id);\r\n        FrameManager.addFrame(layout, 100);\r\n    }\r\n\r\n    function deleteSelectedHandler(e) {\r\n        setMenuActive(false);\r\n        let indexArray = [];\r\n        console.log(props.layoutList);\r\n        props.layoutList.map((value, index) => {\r\n            if (value.isSelected()) indexArray.push(index);\r\n            return value;\r\n        });\r\n        LayoutManager.deleteSelectedLayouts(indexArray);\r\n    }\r\n\r\n    function combineSelectedHandler(e) {\r\n        LayoutManager.combineSelected();\r\n        setMenuActive(false);\r\n    }\r\n\r\n    function unselectAllHandler() {\r\n        LayoutManager.unSelectAll();\r\n    }\r\n    function copyLayout(){\r\n        LayoutManager.copyLayouts();\r\n    }\r\n\r\n    let layoutMenu = <ContextMenu setMenuActive={setMenuActive}\r\n                                  active={active}\r\n                                  menuPosition={menuPosition}\r\n    >\r\n        <div onClick={copyLayout} className=\"context-menu-item\">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</div>\r\n        <div onClick={deleteSelectedHandler} className=\"context-menu-item\">–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ</div>\r\n        <div onClick={combineSelectedHandler} className=\"context-menu-item\">–û–±—å–µ–¥–µ–Ω–∏—Ç—å</div>\r\n        <div onClick={unselectAllHandler} className=\"context-menu-item\">–û—Ç–º–µ–Ω–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ</div>\r\n    </ContextMenu>\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className='right-panel__layout-buttons'>\r\n                <button onClick={addLayoutHandler}>–î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–π</button>\r\n                <button onClick={addToMultiplication}>–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–∞–¥—Ä—ã</button>\r\n            </div>\r\n            {ReactDOM.createPortal(layoutMenu, document.getElementById('root'))}\r\n            <div className='right-panel__layout-list'>\r\n                {\r\n                    props.layoutList.map((layout, index) => {\r\n                        return <Layout key={layout.getId()}\r\n                                       layout={layout}\r\n                                       index={index}\r\n                                       isCurrent={index === props.currentLayoutIndex}\r\n                                       isHidden={layout.isHidden()}\r\n                                       isSelected={layout.isSelected()}\r\n                                       setMenuPosition={setMenuPosition}\r\n                                       setMenuActive={setMenuActive}\r\n                        />;\r\n                    })\r\n                }\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        layoutList: state.layouts.layoutList,\r\n        currentLayoutIndex: state.layouts.currentLayoutIndex,\r\n        canvas: state.canvas.canvas,\r\n        context: state.canvas.context\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Layouts);","import React, {useEffect} from 'react';\r\nimport './FrameItem.scss';\r\nimport {connect} from 'react-redux';\r\nimport FrameManager from '../../../../../../Managers/FrameManager/FrameManager';\r\nimport LayoutManager from '../../../../../../Managers/LayoutManager/LayoutManager';\r\nimport Layout from '../../../../../../models/Layout';\r\n\r\nfunction FrameItem(props) {\r\n\r\n    const value = props.value;\r\n    const id = value.getId();\r\n\r\n    const index = props.index;\r\n    const refFrameBlock = React.createRef();\r\n\r\n    useEffect(() => {\r\n        if (props.isOpen) {\r\n            refFrameBlock.current.prepend(value.getCanvas());\r\n            value.getCanvas().style.backgroundColor = props.defaultBackgorund;\r\n        }\r\n        return () => {\r\n            value.getCanvas().remove();\r\n        };\r\n    }, [id, props.defaultBackgorund, value, props.isOpen,  refFrameBlock]);\r\n\r\n\r\n    function deleteFrameHandler(e) {\r\n        FrameManager.deleteFrame(index);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function changeDelayHandler(e) {\r\n        let delay = e.currentTarget.value;\r\n        value.setDelay(delay);\r\n        FrameManager.changeFrame(index, value);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function addToLayoutListHandler(e) {\r\n        let canvas = document.createElement('canvas');\r\n        canvas.width = value.getCanvas().width;\r\n        canvas.height = value.getCanvas().height;\r\n        let ctx = canvas.getContext('2d');\r\n        ctx.drawImage(value.getCanvas(), 0, 0);\r\n\r\n        let layout = new Layout(canvas, ctx, true, ++LayoutManager.id);\r\n        props.layoutList.push(layout);\r\n        LayoutManager.changeLayoutList(props.layoutList);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function upPositionHandler(e) {\r\n        FrameManager.swap(index, index - 1);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function downPositionHandler(e) {\r\n        FrameManager.swap(index, index + 1);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    function frameClickHandler(e) {\r\n        if(e.ctrlKey){\r\n            if(props.isSelected)  value.unSelect();\r\n            else value.select();\r\n            FrameManager.changeFrame();\r\n            e.stopPropagation();\r\n            return;\r\n        }\r\n        FrameManager.set–°urrentFrameIndex(index);\r\n    }\r\n\r\n    function clickOpenHandler(e) {\r\n        FrameManager.openCloseFrame(value);\r\n        e.stopPropagation();\r\n    }\r\n    function onContextMenuHandler(e){\r\n        if(props.isSelected){\r\n            let x = e.pageY - 10;\r\n            let y = e.pageX - 20;\r\n            //–µ—Å–ª–∏ –º–µ–Ω—é –≤—ã–µ–∑–∂–∞–µ—Ç –∑–∞ –ø—Ä–∞–≤—ã–π –∫—Ä–∞–π\r\n            if (y + 200 >= window.innerWidth) {\r\n                y = window.innerWidth - 200;\r\n            }\r\n            if (x + 200 >= window.innerHeight) {\r\n                x = window.innerHeight - 200;\r\n            }\r\n            props.setMenuPosition({x, y});\r\n            props.setMenuActive(true);\r\n        }\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    let className = props.isOpen ? 'frame-block opened' : 'frame-block';\r\n    className = props.isSelected ? className + ' selected' : className;\r\n    return (\r\n        <div ref={refFrameBlock}\r\n             className={className}\r\n             style={props.currentFrameIndex === index ? {background: 'darkred'} : {}}\r\n             onClick={frameClickHandler}\r\n            onContextMenu={onContextMenuHandler}>\r\n            <span className='frame-block__index'>{props.index + 1}</span>\r\n\r\n            <div className='frame-block__open-close-btn'\r\n                 onClick={clickOpenHandler}></div>\r\n\r\n            <div className='frame-block__menu frame-menu'>\r\n                <div onClickCapture={upPositionHandler} className=\"frame-menu__item\">\r\n                    <img src={process.env.PUBLIC_URL + \"/img/up.svg\"} alt=\"\"/>\r\n                </div>\r\n                <div className=\"frame-menu__item\">\r\n                    <button onClickCapture={addToLayoutListHandler}>–í —Å–ª–æ–∏</button>\r\n                </div>\r\n                <div onClickCapture={downPositionHandler} className=\"frame-menu__item down-arrow\">\r\n                    <img src={process.env.PUBLIC_URL + \"/img/up.svg\"} alt=\"\"/>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"frame-block__input-block\">\r\n                <h2>–ó–∞–¥–µ—Ä–∂–∫–∞</h2>\r\n                <input onClickCapture={e => e.stopPropagation()}\r\n                       value={value.getDelay()}\r\n                       onChange={changeDelayHandler}\r\n                       min='0' type=\"number\"/>\r\n            </div>\r\n            <div className='frame-block__delete-btn'>\r\n                <img onClickCapture={deleteFrameHandler} src={process.env.PUBLIC_URL + \"/img/delete.svg\"} alt=\"\"/>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nfunction mapStateToPorps(state) {\r\n    return {\r\n        currentFrameIndex: state.frames.currentFrameIndex,\r\n        defaultBackgorund: state.setting.canvasDefaultBackground,\r\n        layoutList: state.layouts.layoutList\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToPorps)(FrameItem);","import React, {useState} from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport {connect} from 'react-redux';\r\nimport FrameBlock from './FrameBlock/FrameItem';\r\nimport './Frames.scss';\r\nimport ContextMenu from '../../../../Dump/ContextMenu/ContextMenu';\r\nimport FrameManager from '../../../../../Managers/FrameManager/FrameManager';\r\n\r\nfunction Frames(props) {\r\n\r\n    let [menuActive, setMenuActive] = useState(false);\r\n    let [menuPosition, setMenuPosition] = useState({x:'0px',y:'0px'});\r\n    let [contextMenuDelay, setContextMenuDelay] = useState(100);\r\n\r\n\r\n    //–£—Å—Ç–∞–Ω–≤–ª–∏–≤–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–ª–æ–µ–≤\r\n    function clickContextBtnDelayHandler(e){\r\n        setMenuActive(false);\r\n        FrameManager.setDelaySelectedFrames(contextMenuDelay);\r\n    }\r\n\r\n    function unSelectAllFrame(){\r\n        FrameManager.unSelectAllFrame();\r\n    }\r\n\r\n    function deleteSelectedFrame(){\r\n        setMenuActive(false);\r\n        if(window.confirm('–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞–¥—Ä—ã ?')) FrameManager.deleteSelectedFrame();\r\n    }\r\n    let FrameMenu = <ContextMenu active={menuActive}\r\n                                 setMenuActive={setMenuActive}\r\n                                 menuPosition={menuPosition}>\r\n                        <div className='context-menu-item'>\r\n                            <div>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É</div>\r\n                            <div>\r\n                                <input className='context-menu-item__input'\r\n                                       value={contextMenuDelay}\r\n                                       onChange={(e)=>{setContextMenuDelay(e.currentTarget.value)}}\r\n                                       type='number'/>\r\n                                       <button onClick={clickContextBtnDelayHandler}>OK</button>\r\n                            </div>\r\n                        </div>\r\n                        <div className='context-menu-item'\r\n                            onClick={deleteSelectedFrame}>–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ</div>\r\n                        <div className='context-menu-item'\r\n                            onClick={unSelectAllFrame}>–û—Ç–º–µ–Ω–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ</div>\r\n                    </ContextMenu>;\r\n\r\n    return (\r\n        <div className='right-panel__frames'>\r\n            {ReactDOM.createPortal(<>{FrameMenu}</>, document.getElementById('root'))}\r\n            {\r\n                props.frameList.map((value, index) => {\r\n                        return <FrameBlock key={value.getId()}\r\n                                           value={value}\r\n                                           index={index}\r\n                                           delay={value.getDelay()}\r\n                                           isOpen={value.isOpen()}\r\n                                           isSelected={value.isSelected()}\r\n                                           setMenuActive={setMenuActive}\r\n                                           setMenuPosition={setMenuPosition}\r\n                        />\r\n                        })}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        frameList: state.frames.frameList\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(Frames);","import React, {useEffect, useState} from 'react';\r\n\r\nimport './Tabs.scss';\r\n\r\nimport Layouts from '../Layouts/Layouts';\r\nimport Frames from '../Frames/Frames';\r\n\r\n\r\nexport default function Tabs(props) {\r\n    let [tabsNumber, setTabsActive] = useState(0);\r\n    const setContent = props.setContent;\r\n\r\n    useEffect(() => {\r\n        switch (tabsNumber) {\r\n            case 0: {\r\n                setContent(<Layouts></Layouts>);\r\n                break;\r\n            }\r\n            case 1: {\r\n                setContent('history');\r\n                break;\r\n            }\r\n            case 2: {\r\n                setContent(<Frames></Frames>);\r\n                break;\r\n            }\r\n            default: {\r\n            }\r\n        }\r\n    }, [tabsNumber, setContent]);\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className='right-panel__tabs'>\r\n                <button onClick={() => {\r\n                    setTabsActive(0);\r\n                }}\r\n                        className={tabsNumber === 0 ? 'right-panel__tabs-button active' : 'right-panel__tabs-button'}>\r\n                    –°–ª–æ–∏\r\n                </button>\r\n                {/* <button onClick={()=>{setTabsActive(1)}} \r\n                        className={tabsNumber===1 ? 'right-panel__tabs-button active' : 'right-panel__tabs-button'}>\r\n                        –ò—Å—Ç–æ—Ä–∏—è\r\n                </button> */}\r\n                <button onClick={() => {\r\n                    setTabsActive(2);\r\n                }}\r\n                        className={tabsNumber === 2 ? 'right-panel__tabs-button active' : 'right-panel__tabs-button'}>\r\n                    –ö–∞–¥—Ä—ã\r\n                </button>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import React, {useState} from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport Layouts from './Layouts/Layouts';\r\nimport Tabs from './Tabs/Tabs';\r\n\r\n\r\nfunction RightPanelContent() {\r\n    const [content, setContent] = useState(<Layouts></Layouts>);\r\n    return (<>\r\n                <Tabs setContent={setContent}></Tabs>\r\n                {content}\r\n            </>\r\n    );\r\n}\r\n\r\nexport default connect()(RightPanelContent);","import React from 'react';\r\nimport './CenterSpace.scss';\r\n\r\n\r\nfunction CenterSpace(props) {\r\n    return (\r\n        <div className='center-space'>\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CenterSpace;","import React from 'react';\r\nimport WorkSpace from './WorkSpace/WorkSpace';\r\nimport TopPanel from '../../Dump/TopPanel/TopPanel';\r\nimport TopPanelMenu from '../TopPanelMenu/TopPanelMenu';\r\nimport ToolPanel from './ToolSettingPanel/ToolSettingPanel';\r\nimport LeftPanel from '../../Dump/LeftPanel/LeftPanel';\r\nimport ToolList from './ToolList/ToolList';\r\nimport RightPanel from '../../Dump/RightPanel/RightPanel';\r\nimport RightPanelContent from './RightPanelContent/RightPanelContent';\r\nimport CenterSpace from '../../Dump/CenterSpace/CenterSpace';\r\n\r\nexport default function DrawWindow() {\r\n    return (\r\n        <>\r\n            <TopPanel>\r\n                <TopPanelMenu></TopPanelMenu>\r\n                <ToolPanel></ToolPanel>\r\n            </TopPanel>\r\n            <LeftPanel>\r\n                <ToolList></ToolList>\r\n            </LeftPanel>\r\n            <RightPanel>\r\n                <RightPanelContent></RightPanelContent>\r\n            </RightPanel>\r\n            <CenterSpace>\r\n                <WorkSpace></WorkSpace>\r\n            </CenterSpace>\r\n        </>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport './SaveFormatTabs.scss';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nfunction SaveFormatTabs(props) {\r\n\r\n    return (\r\n        <div className='top-panel__save-tabs save-tabs'>\r\n            <NavLink to='/save/gif' className = 'save-tabs__item'>Gif</NavLink>\r\n            <NavLink to='/save/jpg' className = 'save-tabs__item'>Jpg</NavLink>\r\n            <NavLink to='/save/png' className = 'save-tabs__item'>Png</NavLink>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SaveFormatTabs;","export default __webpack_public_path__ + \"static/media/preloader.279ed7ee.gif\";","import React from 'react';\r\nimport './Preloader.scss'\r\nimport preloader from'./img/preloader.gif';\r\n\r\nfunction Preloader(props) {\r\n    return (\r\n        <div className='preloader'>\r\n            <h2>–ò–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞...</h2>\r\n            <img className='preloader__img' src={preloader} alt=\"\"/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Preloader;","import React, {useState} from 'react';\r\nimport InputsBlock from '../../../Dump/InputsBlock/InputsBlock';\r\nimport './SaveGifPanel.scss';\r\nimport GIF from 'gif.js';\r\nimport {connect} from 'react-redux';\r\nimport Preloader from '../../../Dump/Preloader/Preloader';\r\n\r\nfunction SaveGifPanel(props) {\r\n\r\n    const [repeat, setRepeat] = useState(0);\r\n    const [quality, setQuality] = useState(10);\r\n\r\n\r\n    const [width, setWidth] = useState(props.width);\r\n    const [height, setHeight] = useState(props.height);\r\n\r\n\r\n    const [background, setBackground] = useState('#ffffff');\r\n    const [loading, setLoading] = useState(false);\r\n    const [saveProportion, setSaveProportion] = useState(true);\r\n\r\n\r\n    function saveGifHandler() {\r\n        let frameList = props.frameList;\r\n        if(frameList.length===0) {\r\n            alert('–°–ø–∏—Å–æ–∫ —Ñ—Ä–µ–π–º–æ–≤ –ø—É—Å—Ç !');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        let gif = new GIF({\r\n            workers: 2,\r\n            quality,\r\n            repeat,\r\n        });\r\n        setTimeout(() => {\r\n            frameList.forEach((frame, index)=>{\r\n                let canvas = document.createElement('canvas');\r\n                canvas.width=width;\r\n                canvas.height=height;\r\n                let ctx = canvas.getContext('2d');\r\n                ctx.fillStyle = background;\r\n                ctx.fillRect(0,0, width, height);\r\n                ctx.drawImage(frame.getCanvas(), 0, 0, width, height);\r\n    \r\n                gif.addFrame(canvas, {delay: frame.getDelay(), copy: true})\r\n            });\r\n            gif.on('finished', function(blob) {\r\n                setLoading(false);\r\n                window.open(URL.createObjectURL(blob));\r\n            });\r\n            gif.render();\r\n        }, 0);\r\n\r\n    }\r\n\r\n\r\n    function heightChangeHandler(e){\r\n        setHeight(e.currentTarget.value);\r\n        saveProportion && setWidth(e.currentTarget.value * props.width / props.height);\r\n    }\r\n    function widthChangeHandler(e){\r\n        setWidth(e.currentTarget.value);\r\n        saveProportion && setHeight(e.currentTarget.value * props.height / props.width);\r\n    }\r\n\r\n    return (\r\n        <div className='save-gif-panel'>\r\n            <div className='save-gif-panel__row'>\r\n                <div className='save-gif-panel__item'>\r\n                    <h4>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –¥–ª—è gif. –ï—Å–ª–∏ -1, —Ç–æ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π. –ï—Å–ª–∏ 0 - –ø–æ–≤—Ç–æ—Ä—è—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ </h4>\r\n                    <InputsBlock\r\n                        title='–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏—è'\r\n                        max='1000'\r\n                        min = '-1'\r\n                        step='1'\r\n                        value = {repeat}\r\n                        onChange={(e)=> setRepeat(e.currentTarget.value)}\r\n                    />\r\n                </div>\r\n                <div className='save-gif-panel__item'>\r\n                    <h4>–ò–Ω—Ç–µ—Ä–≤–∞–ª –≤—ã–±–æ—Ä–∫–∏ –ø–∏–∫—Å–µ–ª–µ–π. –ß–µ–º –º–µ–Ω—å—à–µ, —Ç–µ–º –ª—É—á—à–µ</h4>\r\n                    <InputsBlock\r\n                        title='–ö–∞—á–µ—Å—Ç–≤–æ'\r\n                        max='100'\r\n                        min = '1'\r\n                        step='1'\r\n                        value = {quality}\r\n                        onChange={(e)=> setQuality(e.currentTarget.value)}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className='save-gif-panel__row'>\r\n                <div className='save-gif-panel__size'>\r\n                    <div className='save-gif-panel__item'>\r\n                    <span>–°–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏</span>\r\n                    <input type='checkbox'\r\n                           checked={saveProportion}\r\n                            onChange={(e)=>{\r\n                                setSaveProportion(e.currentTarget.checked)\r\n                            }}/>\r\n                    </div>\r\n                    <div className='save-gif-panel__item'>\r\n                        <InputsBlock\r\n                            title='–®–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏'\r\n                            max='2000'\r\n                            min = '0'\r\n                            step='1'\r\n                            value = {width}\r\n                            onChange={widthChangeHandler}\r\n                        />\r\n                    </div>\r\n                    <div className='save-gif-panel__item'>\r\n                        <InputsBlock\r\n                            title='–í—ã—Å–æ—Ç–∞'\r\n                            max='2000'\r\n                            min = '0'\r\n                            step='1'\r\n                            value = {height}\r\n                            onChange={heightChangeHandler}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className='save-gif-panel__color'>\r\n                    <h4>–¶–≤–µ—Ç —Ñ–æ–Ω–∞</h4>\r\n                    <input className='save-gif-panel__color-input'\r\n                            type='color'\r\n                           value={background}\r\n                           onChange={(e)=>{setBackground(e.currentTarget.value)}}/>\r\n                </div>\r\n            </div>\r\n            <div className='save-gif-panel__row'>\r\n                <div className='save-gif-panel__save-btn-wrapper'>\r\n                {loading ? <Preloader/> : <button className='save-gif-panel__save-btn' onClick={saveGifHandler}>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å !</button>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state){\r\n    return {\r\n        frameList: state.frames.frameList,\r\n        width: parseInt(state.canvas.size.width),\r\n        height: parseInt(state.canvas.size.height),\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(SaveGifPanel);","import React from 'react';\r\nimport './SaveWindow.scss';\r\nimport TopPanel from '../../Dump/TopPanel/TopPanel';\r\nimport TopPanelMenu from '../TopPanelMenu/TopPanelMenu';\r\nimport SaveFormatTabs from './SaveFormatTabs/SaveFormatTabs';\r\nimport {Route} from 'react-router';\r\nimport LeftPanel from '../../Dump/LeftPanel/LeftPanel';\r\nimport RightPanel from '../../Dump/RightPanel/RightPanel';\r\nimport SaveGifPanel from './SaveGifPanel/SaveGifPanel';\r\nimport CenterSpace from '../../Dump/CenterSpace/CenterSpace';\r\n\r\nfunction SaveWindow(props) {\r\n    return (\r\n        <div className='save-window'>\r\n            <TopPanel>\r\n                <TopPanelMenu></TopPanelMenu>\r\n                <SaveFormatTabs></SaveFormatTabs>\r\n            </TopPanel>\r\n            <LeftPanel></LeftPanel>\r\n            <RightPanel></RightPanel>\r\n            <CenterSpace>\r\n                <Route path='/save/gif'>\r\n                    <SaveGifPanel></SaveGifPanel>\r\n                </Route>\r\n                <Route path='/save/jpg'>\r\n                    <div>JPG</div>\r\n                </Route>\r\n                <Route path='/save/png'>\r\n                    <div>PNG</div>\r\n                </Route>\r\n                <Route exact path='/save'>\r\n                    <div className='save-window__file-type-title'><h1>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ñ–∞–π–ª–∞</h1></div>\r\n                </Route>\r\n            </CenterSpace>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SaveWindow;","import React, {useEffect, useRef} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport FrameManager from '../../../../Managers/FrameManager/FrameManager';\r\n\r\nfunction FrameCanvasPanel(props) {\r\n    let canvasRef = useRef();\r\n\r\n    useEffect(() => {\r\n        FrameManager.setMultiplicateCanvas(canvasRef.current);\r\n        return ()=>{\r\n            FrameManager.pause();\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (props.frameList.length === 0) return;\r\n        let context = canvasRef.current.getContext('2d');\r\n        renderCanvas();\r\n        function renderCanvas() {\r\n            //–Ω—É–∂–Ω–æ –¥–ª—è requestAnimationFrame. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –æ–Ω –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –Ω—É–∂–Ω—ã–π —Ñ—Ä–µ–π–º –≤ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –æ–Ω –º–µ–Ω—è–µ—Ç—Å—è\r\n            if (!props.frameList[props.currentFrameIndex]) return;\r\n\r\n            context.clearRect(0, 0, props.drawCanvas.width, props.drawCanvas.height);\r\n\r\n            context.drawImage(props.frameList[props.currentFrameIndex].getCanvas(), 0, 0);\r\n            requestAnimationFrame(renderCanvas);\r\n\r\n        }\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <canvas ref={canvasRef} width={props.drawCanvas.width} height={props.drawCanvas.height}></canvas>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        drawCanvas: state.canvas.canvas,\r\n        frameList: state.frames.frameList,\r\n        currentFrameIndex: state.frames.currentFrameIndex\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(FrameCanvasPanel);","import React, {useState} from 'react';\r\nimport Frames from '../../DrawWindow/RightPanelContent/Frames/Frames';\r\nimport FrameManager from '../../../../Managers/FrameManager/FrameManager';\r\n\r\nexport default function FrameRightPanel() {\r\n\r\n    let [delay, setDelay] = useState(100);\r\n\r\n    function setDelayToAllHandler() {\r\n        FrameManager.setDelayToAll(delay);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                <h3>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è –≤—Å–µ—Ö —Å–ª–æ–µ–≤</h3>\r\n                <input type='number'\r\n                       value={delay}\r\n                       onChange={(e) => {\r\n                           setDelay(e.currentTarget.value);\r\n                       }}></input>\r\n                <button onClick={setDelayToAllHandler}>\r\n                    OK\r\n                </button>\r\n\r\n            </div>\r\n            <Frames></Frames>\r\n        </>\r\n    );\r\n}","import React from 'react';\r\nimport './FrameButtons.scss';\r\nimport FrameManager from '../../../../../Managers/FrameManager/FrameManager';\r\nimport {connect} from 'react-redux';\r\nimport {canPlay} from '../../../../../redux/actionCreators/multiplicateActionCreators';\r\n\r\nfunction FrameButtons(props) {\r\n\r\n    function play() {\r\n        props.canPlay();\r\n        FrameManager.playFilm();\r\n    }\r\n\r\n    function pause() {\r\n        FrameManager.pause();\r\n    }\r\n\r\n    return (\r\n        <div className=\"top-panel-buttons\">\r\n            <button className='pause-button' onClick={pause}></button>\r\n            <button className='play-button' onClick={play}></button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default connect(null, {canPlay: canPlay})(FrameButtons);","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './FramesInputs.scss';\r\nimport FrameManager from '../../../../../Managers/FrameManager/FrameManager';\r\nimport InputsBlock from '../../../../Dump/InputsBlock/InputsBlock';\r\n\r\nfunction FramesInputs(props) {\r\n    function changecurrentFrameIndex(e) {\r\n        FrameManager.set–°urrentFrameIndex(+e.target.value);\r\n    }\r\n    return (\r\n        <div className='top-panel-inputs-block'>\r\n            <InputsBlock title={'–§—Ä—ç–π–º—ã'}\r\n                         onChange={changecurrentFrameIndex}\r\n                         value={props.currentFrameIndex}\r\n                         min='0'  max={props.frameList.length - 1}\r\n                         step='1'\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        currentFrameIndex: state.frames.currentFrameIndex,\r\n        frameList: state.frames.frameList\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(FramesInputs);","import React from 'react';\r\nimport FrameButtons from './FrameButtons/FrameButtons';\r\nimport FramesInputs from './FramesInputs/FramesInputs';\r\nimport './FrameTopPanelContent.scss';\r\n\r\nexport default function FrameTopPanelContent() {\r\n    return (\r\n        <>\r\n            <div className=\"top-panel-content\">\r\n                <FrameButtons></FrameButtons>\r\n                <FramesInputs></FramesInputs>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport FrameCanvasPanel from './FrameCanvasPanel/FrameCanvasPanel';\r\nimport FrameRightPanel from './FrameRightPanel/FrameRightPanel';\r\nimport FrameTopPanelContent from './FrameTopPanelContent/FrameTopPanelContent';\r\nimport TopPanel from '../../Dump/TopPanel/TopPanel';\r\nimport TopPanelMenu from '../TopPanelMenu/TopPanelMenu';\r\nimport RightPanel from '../../Dump/RightPanel/RightPanel';\r\nimport CenterSpace from '../../Dump/CenterSpace/CenterSpace';\r\nimport LeftPanel from '../../Dump/LeftPanel/LeftPanel';\r\nimport {connect} from 'react-redux';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nfunction FrameWindow(props) {\r\n    if(!props.canvas) return <Redirect to='/draw'></Redirect>;\r\n    return (\r\n        <div>\r\n            <TopPanel>\r\n                <TopPanelMenu></TopPanelMenu>\r\n                <FrameTopPanelContent></FrameTopPanelContent>\r\n            </TopPanel>\r\n\r\n            <RightPanel>\r\n                <FrameRightPanel></FrameRightPanel>\r\n            </RightPanel>\r\n\r\n            <CenterSpace>\r\n                <FrameCanvasPanel></FrameCanvasPanel>\r\n            </CenterSpace>\r\n\r\n            <LeftPanel></LeftPanel>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        canvas: state.canvas.canvas\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(FrameWindow);\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\n\r\nimport './App.scss';\r\n\r\nimport DrawWindow from './Smart/DrawWindow/DrawWindow';\r\nimport {BrowserRouter, HashRouter, Redirect, Route, Switch} from 'react-router-dom';\r\nimport SaveWindow from './Smart/SaveWindow/SaveWindow';\r\nimport FrameWindow from './Smart/MultiplicateWindow/FrameWindow';\r\n\r\nfunction App() {\r\n    return (\r\n        <HashRouter>\r\n            <div className='main'>\r\n                <Switch>\r\n                    <Route path='/draw' render={() => <DrawWindow/>}/>\r\n                    <Route path='/frames' render={() =><FrameWindow/>}/>\r\n                    <Route path='/save' render={() => <SaveWindow/>}/>\r\n                    <Redirect from='/'  to='/draw'/>\r\n                </Switch>\r\n            </div>\r\n        </HashRouter>\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\nexport default connect()(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\nimport Main from './components/App';\nimport {Provider} from 'react-redux';\nimport store from './redux/store';\n\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <Main></Main>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n\nreportWebVitals();"],"sourceRoot":""}